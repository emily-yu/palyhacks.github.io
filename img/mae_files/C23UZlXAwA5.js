if (self.CavalryLogger) { CavalryLogger.start_js(["rwSAL"]); }

__d("MessengerPlatformBubbleAspectRatio",[],(function a(b,c,d,e,f,g){f.exports={IMAGE_ASPECT_RATIO_HORIZONTAL:1.91,IMAGE_ASPECT_RATIO_SQUARE:1};}),null);
__d("MNCommerceLoggerEvents",[],(function a(b,c,d,e,f,g){f.exports={RECEIVE_API_LATENCY:"receive_api_latency",NLP_API_LATENCY:"nlp_api_latency",NLP_API_FAILED:"nlp_api_failed",EVENTS_PUSH_SUCCESS:"events_push_success",EVENTS_PUSH_FAILED:"events_push_failed",ENTITY_CONFIGURATION_ERROR:"entity_configuration_error",ENTITY_SUBSCRIPTION_SUCCESS:"entity_subscribed",ENTITY_UNSUBSCRIPTION_SUCCESS:"entity_unsubscribed",ENTITY_UNSUBSCRIPTION_FAILED:"entity_unsubscribe_request_failed",ENTITY_SUBSCRIPTION_FAILED:"entity_subscribe_request_failed",APP_TO_PAGE_ASSOC_DELETE_FAILED:"app_to_page_assoc_delete_failed",APP_TO_PAGE_ASSOC_SET_FAILED:"app_to_page_assoc_delete_failed",TAO_EXCEPTION:"tao_exception",IRIS_SUBSCRIPTION_NOTIFY:"iris_subscription_notify",RECEIVE_API_E2E_HANDLER_FAILURE:"receive_api_e2e_handler_failure",SKIPPED_STALE_DELTA_NEW_MESSAGE:"skipped_stale_delta_new_message",SEND_API_ERROR:"send_api_error",SEND_API_LATENCY:"send_api_latency",SEND_MESSAGE_WITH_AUDIO:"send_message_with_audio",SEND_MESSAGE_WITH_FILE:"send_message_with_file",SEND_MESSAGE_WITH_IMAGE:"send_message_with_image",SEND_MESSAGE_WITH_TEXT:"send_message_with_text",SEND_MESSAGE_WITH_VIDEO:"send_message_with_video",SEND_MESSAGE_WITH_ROBOTEXT:"send_message_with_robotext",SEND_MESSAGE_WITH_ATTACHMENT:"send_message_with_attachment",SEND_MESSAGE_WITH_LOG_MESSAGE:"send_message_with_log_message",SEND_MESSAGE_FAILURE:"send_message_failure",SEND_MESSAGE_INNER_FAILURE:"send_message_inner_failure",SEND_MESSAGE_WITH_AD_TEXT:"send_ad_message_with_text",SEND_MESSAGE_WITH_AD_ATTACHMENT:"send_ad_message_with_attachment",UPLOAD_API_ERROR:"upload_api_error",ID_CONVERSION_ERROR:"id_conversion_error",ID_CONVERSION_SUCCESS:"id_conversion_success",GIF_UPLOAD:"gif_upload",HIGH_MPS_ON:"high_mps_on",HIGH_MPS_OFF:"high_mps_off",USER_PROFILE_API_FAILED:"user_profile_api_failed",RECEIVE_MESSAGE_WITH_TEXT:"receive_message_with_text",RECEIVE_MESSAGE_WITH_IMAGE:"receive_message_with_image",RECEIVE_MESSAGE_WITH_VIDEO:"receive_message_with_video",RECEIVE_MESSAGE_WITH_AUDIO:"receive_message_with_audio",RECEIVE_MESSAGE_WITH_FILE:"receive_message_with_file",RECEIVE_MESSAGE_WITH_ATTACHMENT:"receive_message_with_attachment",PAGE_PROMETHEUS_STATUS_NOTIFICATION:"page_prometheus_status_notification",GEN_CALL:"gen_call",DUPLICATE_CALL:"duplicate_call",ERROR:"error",APP_ID_FETCH_FAILURE:"app_id_fetch_failure",GEN_SHIPMENT_ENT:"gen_shipment_ent",GEN_SHIPMENT_TRACKING_ENT:"gen_shipment_tracking_ent",SHIPMENT_NOTIFICATION_READY:"shipment_notification_ready",SHIPMENT_NOTIFICATION_SENT:"shipment_notification_sent",SHIPMENT_NOTIF_READY:"shipment_notif_ready",SHIPMENT_NOTIF_SENT:"shipment_notif_sent",ETA_NOTIF_READY:"eta_notif_ready",ETA_NOTIF_SENT:"eta_notif_sent",DELIVERED_NOTIF_READY:"delivered_notif_ready",DELIVERED_NOTIF_SENT:"delivered_notif_sent",OUT_FOR_DELIVERY_NOTIF_READY:"out_for_delivery_notif_ready",OUT_FOR_DELIVERY_NOTIF_SENT:"out_for_delivery_notif_sent",DELAYED_NOTIF_READY:"delayed_notif_ready",DELAYED_NOTIF_SENT:"delayed_notif_sent",IN_TRANSIT_NOTIF_READY:"in_transit_notif_ready",IN_TRANSIT_NOTIF_SENT:"in_transit_notif_sent",ASYNC_EXECUTION:"async_execution",ASYNC_SCHEDULE:"async_schedule",ASYNC_THROTTLE:"async_throttle",ASYNC_USER_ACCOUNT_DISABLED:"async_user_account_disabled",ASYNC_GEN_DATA_ERROR:"async_gen_data_error",TRACKING_SHUTDOWN_WITH_EXCEPTION_ERROR:"tracking_shutdown_with_exception",TRACKING_SHUTDOWN_WITH_RETRY_ERROR:"tracking_shutdown_with_retry",DELIVERED_STATS:"delivered_stats",USER_LINKED:"user_linked",USER_LINK_FAILED:"user_link_failed",USER_TOKEN_DECRYPTION_FAILED:"user_token_decryption_failed",USER_TOKEN_DELIVERY_ATTEMPT:"user_token_delivery_attempt",USER_TOKEN_DELIVERED:"user_token_delivered",USER_TOKEN_DELIVERY_FAILED:"user_token_delivery_failed",USER_TOKEN_CRITICAL_LOOKUP:"user_token_critical_lookup",USER_TOKEN_LOOKUP_FAILED:"user_token_lookup_failed",USER_UNLINKED:"user_unlinked",USER_UNLINK_FAILED:"user_unlink_failed",USER_UNLINK_BUSINESS_NOTIFIED:"user_unlink_business_notified",USER_UNLINK_BUSINESS_NOTIFICATION_FAILED:"user_unlink_business_notification_failed",PLATFORM_PLUGIN_PAGE_APP_ID_MISMATCH:"platform_plugin_page_app_id_mismatch",SEND_TO_MESSENGER_RENDERED:"send_to_messenger_rendered",SEND_TO_MESSENGER_CLICKED:"send_to_messenger_clicked",SEND_TO_MESSENGER_OPT_IN:"send_to_messenger_opt_in",SEND_TO_MESSENGER_ID_DELIVERY_FAILURE:"send_to_messenger_id_delivery_failure",SEND_TO_MESSENGER_UNSUPPORTED_APP:"send_to_messenger_unsupported_app",SEND_TO_MESSENGER_ERROR:"send_to_messenger_error",MESSAGE_US_RENDERED:"message_us_rendered",MESSAGE_US_CLICKED:"message_us_clicked",MESSAGE_US_ERROR:"message_us_error",MESSENGER_PRECHECKED_ERROR:"messenger_prechecked_error",MESSENGER_PRECHECKED_RENDERED:"messenger_prechecked_rendered",MESSENGER_PRECHECKED_HIDDEN:"messenger_prechecked_hidden",MESSENGER_PRECHECKED_LOGIN:"messenger_prechecked_login",MESSENGER_PRECHECKED_NOTYOU:"messenger_prechecked_notyou",MESSENGER_PRECHECKED_CHECKED:"messenger_prechecked_checked",MESSENGER_PRECHECKED_UNCHECKED:"messenger_prechecked_unchecked",MESSENGER_PRECHECKED_PIXEL_ERROR:"messenger_prechecked_pixel_error",MESSENGER_PRECHECKED_PIXEL_INVALID_APP_ID:"messenger_prechecked_pixel_invalid_app_id",MESSENGER_PRECHECKED_PIXEL_NO_APP_SUBSCRIPTION:"messenger_prechecked_pixel_no_app_subscription",MESSENGER_PRECHECKED_PIXEL_ENT_NOT_FOUND:"messenger_prechecked_pixel_ent_not_found",MESSENGER_PRECHECKED_PIXEL_USER_MISMATCH:"messenger_prechecked_pixel_user_mismatch",MESSENGER_PRECHECKED_PIXEL_INVALID_PLUGIN_STATE:"messenger_prechecked_pixel_invalid_plugin_state",MESSENGER_PRECHECKED_PIXEL_EVENT_SAVED:"messenger_prechecked_pixel_event_saved",MESSENGER_PRECHECKED_PIXEL_WEBHOOK_EVENT_SENT:"messenger_prechecked_pixel_webhook_event_sent",MESSENGER_PRECHECKED_API_ENT_NOT_FOUND:"messenger_prechecked_api_ent_not_found",MESSENGER_PRECHECKED_API_INVALID_USER_ID:"messenger_prechecked_api_invalid_user_id",MESSENGER_PRECHECKED_API_INVALID_PLUGIN_STATE:"messenger_prechecked_api_invalid_plugin_state",MESSENGER_PRECHECKED_API_PIXEL_NOT_FIRED:"messenger_prechecked_api_pixel_not_fired",MESSENGER_PRECHECKED_API_USER_MATCH_SUCCEEDED:"messenger_prechecked_api_user_match_succeeded",MESSENGER_PRECHECKED_API_ADMIN_MESSAGE_SENT:"messenger_prechecked_api_admin_message_sent",MESSENGER_PRECHECKED_API_ERROR:"messenger_prechecked_api_error",PLUGIN_ID_MATCH_INITIATED:"plugin_id_match_initiated",PLUGIN_ID_MATCH_FAILED:"plugin_id_match_failed",PLUGIN_ID_MATCH_NO_LOGGED_IN_USER:"plugin_id_match_no_logged_in_user",PLUGIN_ID_MATCH_HAS_NAME_MATCH:"plugin_id_match_has_name_match",PLUGIN_ID_MATCH_NO_NAME_MATCH:"plugin_id_match_no_name_match",PLUGIN_ID_MATCH_HAS_EMAIL_MATCH:"plugin_id_match_has_email_match",PLUGIN_ID_MATCH_NO_EMAIL_MATCH:"plugin_id_match_no_email_match",PLUGIN_ID_MATCH_HAS_MATCH:"plugin_id_match_has_match",PLUGIN_ID_MATCH_NO_MATCH:"plugin_id_match_no_match",PLUGIN_ID_MATCH_ERROR:"plugin_id_match_error",ECOMMERCE_OPT_IN:"ecommerce_opt_in",ECOMMERCE_OPT_IN_EVENT_DELIVERED:"ecommerce_opt_in_event_delivered",ECOMMERCE_OPT_OUT:"ecommerce_opt_out",ECOMMERCE_OPT_OUT_EVENT_DELIVERED:"ecommerce_opt_out_event_delivered",ECOMMERCE_ERROR:"ecommerce_error",AUTH_MUTATION_SUCCEEDED:"auth_mutation_succeeded",AUTH_MUTATION_ERROR:"auth_mutation_error",THREAD_DELETION_REVOKE_SUCCESS:"thread_deletion_revoke_success",THREAD_DELETION_REVOKE_FAILURE:"thread_deletion_revoke_failure",COMMERCE_TOKEN_CONVERSION_REQUESTED:"commerce_token_conversion_requested",COMMERCE_TOKEN_CONVERSION_INVALID_TOKEN:"commerce_token_conversion_invalid_token",COMMERCE_TOKEN_CONVERSION_USER_NOT_LINKED:"commerce_token_conversion_user_not_linked",COMMERCE_TOKEN_CONVERSION_NO_THREAD:"commerce_token_conversion_no_thread",COMMERCE_TOKEN_CONVERSION_PSID_GENEREATED:"commerce_token_conversion_psid_genereated",COMMERCE_TOKEN_CONVERSION_FAILURE:"commerce_token_conversion_failure",PLUGIN_CLIENT_RENDERED:"plugin_client_rendered",PLUGIN_RENDERED:"plugin_rendered",PLUGIN_HIDDEN_ALREADY_LINKED:"plugin_hidden_already_linked",PLUGIN_BLOCKED:"plugin_blocked",PLUGIN_UPDATES_DISALLOWED:"plugin_updates_disallowed",PLUGIN_UPDATES_REALLOWED:"plugin_updates_reallowed",PLUGIN_ASSOC_MUTATE_FAILED:"plugin_assoc_mutate_failed",PLUGIN_ASSOC_READ_FAILED:"plugin_assoc_read_failed",PLUGIN_MESSAGE_US_CLICK:"plugin_message_us_click",LAST_DIGITS_PLUGIN_ERROR_PARSING_MESSAGE:"last_digits_plugin_error_parsing_message",LAST_DIGITS_PLUGIN_ERROR_UNAUTHORIZED_DOMAIN:"last_digits_plugin_error_unauthorized_domain",LAST_DIGITS_PLUGIN_VERIFICATION_RESULT:"last_digits_plugin_verification_result",LAST_DIGITS_PLUGIN_MESSAGE_RECEIVED:"last_digits_plugin_message_received",LAST_DIGITS_PLUGIN_MESSAGE_POSTED:"last_digits_plugin_message_posted",SIMPLE_LINK_PLUGIN_IMPRESSION:"simple_link_plugin_impression",SIMPLE_LINK_PLUGIN_UNCHECKED:"simple_link_plugin_unchecked",SIMPLE_LINK_PLUGIN_LINKED:"simple_link_plugin_linked",ORDER_CANCELLED:"order_cancelled",ORDER_CANCELLATION_FAILED:"order_cancellation_failed",SEND_BLOCK_ALL_LOG_MESSAGE_EXCEPTION:"send_block_all_log_message_exception",SEND_UNBLOCK_ALL_LOG_MESSAGE_EXCEPTION:"send_unblock_all_log_message_exception",DIALOG_OPENED:"dialog_opened",DIALOG_CLOSED:"dialog_closed",DIALOG_LOAD_ERROR:"dialog_load_error",DIALOG_LOAD_SUCCESS:"dialog_load_success",PLATFORM_SUBSCRIPTION_LAST_USER_SENT_MESSAGE_UPDATED:"platform_subscription_last_user_sent_message_updated",PLATFORM_SUBSCRIPTION_EXTRA_MESSAGE_COUNT_UPDATED:"platform_subscription_extra_message_count_updated",PLATFORM_SUBSCRIPTION_STATE_MUTATION_FAILED:"platform_subscription_state_mutation_failed",PLATFORM_SUBSCRIPTION_ASSOC_NOT_FOUND:"platform_subscription_assoc_not_found",PLATFORM_SUBSCRIPTION_MESSAGE_WITHIN_ONE_DAY:"platform_subscription_message_within_one_day",PLATFORM_SUBSCRIPTION_WHITELISTED_TEMPLATE:"platform_subscription_whitelisted_template",PLATFORM_SUBSCRIPTION_PERMISSION_CHECK:"platform_subscription_permission_check",NOT_YOU_CLICKED:"not_you_clicked",PRODUCT_SUBSCRIPTION_CLICKED:"product_subscription_clicked",RECEIPTS:"receipts",CANCELLATIONS:"cancellations",SHIPMENTS:"shipments",NOW_IN_STOCK:"nowinstock",NOTIFY_ME:"notifyme",PROMOTIONAL_MESSAGE:"promotionalmessage",RETAIL_CANCELLATIONS:"retailcancellations",RETAIL_RECEIPTS:"retailreceipts",UPDATE_RECEIPTS:"updatereceipts",RETAIL_SHIPMENTS:"retailshipments",RETAIL_UPDATE_RECEIPTS:"retailupdatereceipts",AIRLINE_ITINERARY:"airlineitinerary",AIRLINE_REMINDER:"airlinereminder",AIRLINE_CHECKIN:"airlinecheckin",AIRLINE_UPDATE:"airlineupdate",AIRLINE_BOARDINGPASS:"airlineboardingpass",BILL_PAYMENT_REQUEST:"billpaymentrequest",SIMPLE_LINK_WITH_STATE:"simplelinkwithstate",BUSINESS_MESSAGE:"businessmessage",MARK_SPAM:"spam",ACCOUNT_UNLINK_SUCCESS:"account_unlink_success",ACCOUNT_UNLINK_FAILURE:"account_unlink_failure",ACCOUNT_UNLINK_UNKNOWN_FAILURE:"account_unlink_unknown_failure",ACCOUNT_UNLINK_FORCE_FAILURE:"account_unlink_force_failure",ACCOUNT_UNLINK_NO_WEBHOOK_SUBSCRIPTION:"account_unlink_no_webhook_subscription",ACCOUNT_LINK_SUCCESS:"account_link_success",ACCOUNT_LINK_FAILURE:"account_link_failure",ACCOUNT_LINK_NO_WEBHOOK_SUBSCRIPTION:"account_link_no_webhook_subscription",ACCOUNT_LINK_UNKNOWN_FAILURE:"account_link_unknown_failure",ACCOUNT_LINK_NO_AUTHORIZATION_CODE:"account_link_no_authorization_code",ACCOUNT_LINK_INVALID_NONCE:"account_link_invalid_nonce",ACCOUNT_LINKING_URL_DELETE_FAILED:"account_linking_url_delete_failed",ACCOUNT_LINKING_TOKEN_CREATED:"account_linking_token_created",ACCOUNT_LINK_REDIRECT_REQUEST:"account_link_redirect_request",ACCOUNT_LINK_FB_COOKIE_NOT_SET:"account_link_fb_cookie_not_set",ACCOUNT_LINK_INVALID_VIEWER_CONTEXT:"account_link_invalid_viewer_context",ACCOUNT_LINK_URI_GEN_INPROGRESS:"account_link_uri_gen_inprogress",ACCOUNT_LINK_URI_GEN_START:"account_link_uri_gen_start",ACCOUNT_LINK_URI_GEN_END:"account_link_uri_gen_end",ACCOUNT_LINK_NULL_URI:"account_link_null_uri",PROMOTION_CREATION_ATTEMPTED:"promotion_creation_attempted",PROMOTION_ENT_CREATED:"promotion_ent_created",PROMOTION_SCHEDULED:"promotion_scheduled",PROMOTION_KILLED:"promotion_killed",PROMOTION_USER_ATTEMPTED:"promotion_user_attempted",PROMOTION_USER_GK_FAILED:"promotion_user_gk_failed",PROMOTION_USER_GK_PASSED:"promotion_user_gk_passed",PROMOTION_USER_ALREADY_LINKED:"promotion_user_already_linked",PROMOTION_USER_NOT_LINKED:"promotion_user_not_linked",PROMOTION_USER_PREVIOUSLY_UNLINKED:"promotion_user_previously_unlinked",PROMOTION_USER_BLOCKED_PROMOTION:"promotion_user_blocked_promotion",PROMOTION_USER_SEND_MESSAGE_EXCEPTION:"promotion_user_send_message_exception",PROMOTION_ATOMIC_MESSAGE_SENT:"promotion_atomic_message_sent",PROMOTION_LOG_MESSAGE_SENT:"promotion_log_message_sent",PROMOTION_ROBOTEXT_SENT:"promotion_robotext_sent",PROMOTION_ATTACHMENT_SENT:"promotion_attachment_sent",PROMOTION_ASYNC_JOB_ERROR:"promotion_async_job_error",REF_SEND_SUCCESS:"referral_send_success",REF_SEND_FAILURE:"referral_send_failure",REF_SEND_NO_PSID:"referral_send_no_psid_inplace",REF_SEND_INVALID_AUTH_STATE:"referral_send_invalid_auth_state",USER_CONTROL_BLOCKED_ALL:"user_control_blocked_all",USER_CONTROL_BLOCKED_PROMOTION:"user_control_blocked_promotion",USER_CONTROL_UNBLOCKED_ALL:"user_control_unblocked_all",USER_CONTROL_UNBLOCKED_PROMOTION:"user_control_unblocked_promotion",USER_CONTROL_REPORT_AD:"user_control_report_ad",USER_CONTROL_REPORT_OTHER_ABUSE:"user_control_report_other_abuse",ACCEPT_MESSAGE_REQUEST_ACTION:"accept_message_request",IGNORE_MESSAGE_REQUEST_ACTION:"ignore_message_request",PLATFORM_REPORT_FAILURE:"platform_report_failure",PLATFORM_REPORT_SUCCEEDED:"platform_report_succeeded",PLATFORM_REPORT_ADMIN_MSG_SENT:"platform_report_admin_msg_sent",PLATFORM_REPORT_PAGE_BLOCKED:"platform_report_page_blocked",PLATFORM_REPORT_PAGE_REPORT_FAILURE:"platform_report_page_report_failure",M_SUGGESTION_CALL:"m_suggestion_call",M_SUGGESTION_ENT_CREATED:"m_suggestion_ent_created",M_SUGGESTION_LINK_IF_NECESSARY:"m_suggestion_link_if_necessary",M_SUGGESTION_SEND_MESSAGE:"m_suggestion_send_message",GEN_CANCELLATION_ENT:"gen_cancellation_ent",CANCELLATION_NOTIFICATION_READY:"cancellation_notification_ready",CANCELLATION_NOTIFICATION_SENT:"cancellation_notification_sent",LIVECHAT_HISTORY_USER_FETCH_FAILURE:"livechat_history_user_fetch_failure",LIVECHAT_HISTORY_PAGE_FETCH_FAILURE:"livechat_history_page_fetch_failure",LIVECHAT_HISTORY_API_SUCCESS:"livechat_history_api_success",LIVECHAT_HISTORY_API_FAILURE:"livechat_history_api_failure",ECOMMERCE_EVENT_CALL:"ecommerce_event_call",ECOMMERCE_EVENT_DATA_VALIDATED:"ecommerce_event_data_validated",ECOMMERCE_EVENT_SECURITY_CHECKED:"ecommerce_event_security_checked",ECOMMERCE_EVENT_MESSAGE_SENT:"ecommerce_event_message_sent",ECOMMERCE_EVENT_INVALID_SENDER:"ecommerce_event_invalid_sender",ECOMMERCE_EVENT_MULTIPLE_WELCOME_MESSAGE_NOT_ALLOWED:"ecommerce_event_multiple_welcome_message_not_allowed",ECOMMERCE_EVENT_NO_OPT_IN:"ecommerce_event_no_opt_in",ECOMMERCE_EVENT_HANDLER_EXCEPTION:"ecommerce_event_handler_exception",PROMOTION_CTA_CLICKED:"promotion_cta_clicked",ACCESS_ENT_WITHOUT_MESSAGE_ID:"access_ent_without_message_id",ACCESS_ENT_WITH_WRONG_MESSAGE_ID:"access_ent_with_wrong_message_id",ACCESS_ENT_WITHOUT_CAN_SEE_SHARE_TOKEN:"access_ent_without_can_see_share_token",ACCESS_ENT_WITH_WRONG_SHARE_ID:"access_ent_with_wrong_share_id",BOT_SHARE_MSG_SENT:"bot_share_msg_sent",PAGE_SHARE_MSG_SENT:"page_share_msg_sent",PAGE_SHARE_MSG_FAILURE:"page_share_msg_failure",ELEMENT_SHARE_MSG_SENT:"element_share_msg_sent",EXTENSIBLE_SHARE_MSG_SENT:"extensible_share_msg_sent",SUBSCRIPTION_SHARE_MSG_SENT:"subscription_share_msg_sent",ELEMENT_SHARE_MSG_FAILURE:"element_share_msg_failure",SUBSCRIPTION_SHARE_MSG_FAILURE:"subscription_share_msg_failure",ELEMENT_SHARE_ATTACHMENT_CREATION_FAILED:"element_share_attachment_creation_failed",ELEMENT_SHARE_GET_PAGE_LINK_FAILED:"element_share_get_page_link_failed",WEBVIEW_SHARE_ATTACHMENT_CREATION_FAILED:"webview_share_attachment_creation_failed",WEBVIEW_SHARE_MSG_FAILURE:"webview_share_msg_failure",WEBVIEW_SHARE_MSG_SENT:"webview_share_msg_sent",WEBVIEW_SHARE_NULL_PAGE_ID:"webview_share_with_null_page_id",WEBVIEW_SHARE_EMPTY_TITLE:"webview_share_with_empty_title",WEBVIEW_SHARE_INVALID_BUTTON_DATA:"webview_share_with_invalid_button_data",WEBVIEW_SHARE_URL_MISSING:"webview_share_without_url_data",PAGE_ATTACHMENT_FORWARDING:"page_attachment_forwarding",BOT_ATTACHMENT_FORWARDING:"bot_attachment_forwarding",MEDIA_ATTACHMENT_FORWARDING:"media_attachment_forwarding",BOT_REVIEW_CREATION:"bot_review_creation",BOT_REVIEW_UPDATE:"bot_review_update",BOT_REVIEW_DELETION:"bot_review_deletion",BOT_REVIEW_FAILURE:"bot_review_failure",BOT_REVIEW_DEVSITE_PAGE_SKIPPED:"bot_review_devsite_page_skipped",AGGREGATE_BOT_RATING_FETCH_FAILURE:"aggregate_bot_rating_fetch_failure",AGGREGATE_BOT_RATING_INC_FAILURE:"aggregate_bot_rating_inc_failure",AGGREGATE_BOT_RATING_INC_PERM_FAILURE:"aggregate_bot_rating_inc_perm_failure",INVALID_RATING:"invalid_rating",BOT_REVIEW_ADMIN_MSG_FAILURE:"bot_review_admin_msg_failure",BOT_REVIEW_NOTIF_FAILURE:"bot_review_notification_failure",BOT_REVIEW_NOTIF_INVALID_DB_DATA:"bot_review_notification_invalid_db_data",BOT_REVIEW_NOTIF_PAGE_REVIEW_GEN_FAILURE:"bot_review_notification_page_review_gen_failure",BOT_REVIEW_NOTIF_SEND_FAILURE:"bot_review_notification_send_failure",BOT_REVIEW_NOTIF_SEND_SUCCESS:"bot_review_notification_send_success",BOT_REVIEW_NOTIF_PAGE_SEND_FAILURE:"bot_review_notification_page_send_failure",LINK_CLICK:"link_click",POSTBACK_CLICKED:"postback_cta_clicked",POSTBACK_SUCCESS:"postback_cta_success",POSTBACK_NO_WEBHOOK_SUBSCRIPTION:"postback_no_webhook_subscription",POSTBACK_SEND_FAILED:"postback_send_failed",POSTBACK_FAILED:"postback_failed",POSTBACK_INVALID_IDS:"postback_invalid_ids",COMPOSER_CTA_PAGE_GEN_FAILED:"composer_cta_page_gen_failed",COMPOSER_CTA_DOUBLE_TAPPED:"composer_cta_double_tapped",NULLSTATE_CTAS_DELETE_INITIATED:"nullstate_ctas_delete_initiated",NULLSTATE_CTAS_DELETE_FAILED:"nullstate_ctas_delete_failed",NULLSTATE_CTAS_UPDATE_INITIATED:"nullstate_ctas_update_initiated",NULLSTATE_CTAS_UPDATE_FAILED:"nullstate_ctas_update_failed",NULLSTATE_CTAS_ADDED:"nullstate_ctas_added",NULLSTATE_CTAS_UPDATED:"nullstate_ctas_updated",NULLSTATE_CTAS_DELETED:"nullstate_ctas_deleted",NULLSTATE_ATTACHMENT_CREATION_FAILED:"nullstate_attachment_creation_failed",STRUCTURED_MENU_CTAS_DELETE_INITIATED:"structured_menu_ctas_delete_initiated",STRUCTURED_MENU_CTAS_DELETE_FAILED:"structured_menu_ctas_delete_failed",STRUCTURED_MENU_CTAS_UPDATE_INITIATED:"structured_menu_ctas_update_initiated",STRUCTURED_MENU_CTAS_UPDATE_FAILED:"structured_menu_ctas_update_failed",STRUCTURED_MENU_CTAS_ADDED:"structured_menu_ctas_added",STRUCTURED_MENU_CTAS_UPDATED:"structured_menu_ctas_updated",STRUCTURED_MENU_CTAS_DELETED:"structured_menu_ctas_deleted",V2_STRUCTURED_MENU_UPDATED:"v2_structured_menu_updated",V2_STRUCTURED_MENU_UPDATE_FAIL:"v2_structured_menu_update_fail",NULLSTATE_GREETING_UPDATE_INITIATED:"nullstate_greeting_update_initiated",NULLSTATE_GREETING_UPDATE_FAILED:"nullstate_greeting_update_failed",NULLSTATE_GREETING_DELETE_SUCCEEDED:"nullstate_greeting_delete_succeeded",NULLSTATE_GREETING_DELETE_FAILED:"nullstate_greeting_delete_failed",WHITELIST_DOMAIN_UPDATED:"whitelist_domain_updated",WHITELIST_DOMAIN_UPDATE_FAILED:"whitelist_domain_update_failed",PAYMENT_SETTING_UPDATED:"payment_setting_updated",PAYMENT_SETTING_UPDATE_FAILED:"payment_setting_update_failed",THREAD_SETTING_DELETE_FAILED:"thread_setting_delete_failed",PAYMENT_SETTING_DELETE_FAILED:"payment_setting_delete_failed",TARGET_AUDIENCE_UPDATE_FAILED:"target_audience_update_failed",TARGET_AUDIENCE_UPDATE_SUCCEEDED:"target_audience_update_succeeded",DEVX_GET_STARTED_RENDERED:"devx_get_started_rendered",DEVX_TOS_CARD_RENDERED:"devx_tos_card_rendered",DEVX_BOT_CREATION_STARTED:"devx_bot_creation_started",DEVX_BOT_CREATION_SUCCESS:"devx_bot_creation_success",DEVX_BOT_CREATION_FAIL:"devx_bot_creation_fail",DEVX_PAGE_TOKEN_CARD_RENDERED:"devx_page_token_card_rendered",DEVX_PAGE_TOKEN_CALLBACK:"devx_page_token_callback",DEVX_PAGE_TOKEN_CALLBACK_NO_PAGE:"devx_page_token_callback_no_page",DEVX_PAGE_TOKEN_CALLBACK_NO_PERMISSIONS:"devx_page_token_callback_no_permissions",DEVX_PAGE_TOKEN_GENERATED:"devx_page_token_generated",DEVX_FINITE_LENGTH_PAGE_TOKEN_GENERATED:"devx_finite_length_page_token_generated",DEVX_PAGE_TOKEN_CALLBACK_FAILED:"devx_page_token_callback_failed",DEVX_PAKE_TOKEN_POPUP_OPEN_FAILED:"devx_page_token_popup_open_failed",DEVX_UPSELL_CARD_RENDERED:"devx_upsell_card_rendered",DEVX_UPSELL_LEARN_MORE_CLICKED:"devx_upsell_learn_more_clicked",DEBUG_EVENT_FOR_SEND_MESSAGE:"debug_event_send_message",PARSE_USER_INFO_FAILURE:"parse_user_info_failure",QUICK_REPLY_FALLBACK:"quick_reply_fallback",QUICK_REPLY_DECODE_FAILED:"quick_reply_decode_failed",QUICK_REPLY_PAYLOAD_WITH_WRONG_IDS:"quick_rely_payload_with_wrong_ids",PAGE_MESSAGE_TOPICS:"page_message_topics",DELIVER_PAYMENT_TO_WEBHOOK_SUCCEED:"deliver_payment_to_webhook_succeed",DELIVER_PAYMENT_TO_WEBHOOK_FAILED:"deliver_payment_to_webhook_failed",BROADCAST_MESSAGE_API_ERROR:"broadcast_message_api_error",DELIVER_CHECKOUT_UPDATES_TO_WEBHOOK_SUCCEED:"deliver_checkout_updates_to_webhook_succeed",DELIVER_CHECKOUT_UPDATES_TO_WEBHOOK_FAILED:"deliver_checkout_updates_to_webhook_failed",PAYMENT_CHECKOUT_UPDATES_SUCCEED:"payment_checkout_updates_succeed",PAYMENT_CHECKOUT_UPDATES_FAILED:"payment_checkout_updates_failed",PAYMENT_CHARGE_CALL_SUCCEED:"payment_charge_call_succeed",PAYMENT_CHARGE_CALL_FAILED:"payment_charge_call_failed",PAYMENTS_WEB_FORM_SUCCESS:"payments_web_form_success",PAYMENTS_WEB_FORM_FAILURE:"payments_web_form_failure",PAYMENTS_WEB_FORM_APPROVED:"payments_web_form_approved",PAYMENTS_WEB_FORM_APPROVAL_FAILED:"payments_web_form_approval_failed",PAYMENTS_WEB_FORM_REQUEST_PROCESSED:"payments_web_form_request_processed",PAYMENTS_WEB_FORM_REQUEST_PROCESSING_FAILED:"payments_web_form_request_processing_failed",PAYMENTS_WEB_FORM_DEVELOPER_AGREEMENT_SENT:"payments_web_form_developer_agreement_sent",SEARCH_POST_RANK_FAILED:"search_post_rank_failed",SEARCH_EXISTING_THREADS_FAILED:"search_existing_threads_failed",MESSENGER_PROFILE_DELETE_SUCCESS:"messenger_profile_delete_success",MESSENGER_PROFILE_DELETE_FAILURE:"messenger_profile_delete_failure",MESSENGER_PROFILE_INVALID_DATA:"messenger_profile_invalid_data",MESSENGER_PROFILE_UPDATE_SUCCESS:"messenger_profile_update_success",MESSENGER_PROFILE_UPDATE_FAILURE:"messenger_profile_update_failure"};}),null);
__d("MNCommerceMessageType",[],(function a(b,c,d,e,f,g){f.exports={TEXT:"text",IMAGE:"image",VIDEO:"video",AUDIO:"audio",FILE:"file",ROBOT_TEXT:"robot_text",LOCATION:"location",FORCED_FETCH_MESSAGE:"forced_fetch_message",SENDER_ACTION:"sender_action",RETAIL_PRODUCT_SUBSCRIPTION:"retail_product_subscription",RETAIL_PROMOTION:"retail_promotion",RETAIL_CANCELLATION:"retail_cancellation",RETAIL_SHIPMENT:"retail_shipment",SHIPMENT_TRACKING_EVENT:"shipment_tracking_event",AIRLINE_CHECKIN_REMINDER:"airline_checkin_reminder",AIRLINE_BOARDING_PASS:"airline_boarding_pass",AIRLINE_CHECKIN:"airline_checkin",AIRLINE_BOARDINGPASS:"airline_boardingpass",AIRLINE_UPDATE:"airline_update",AIRLINE_ITINERARY:"airline_itinerary",CONTENT_SUBSCRIPTION:"content_subscription",AD_ADMIN_TEXT:"ad_admin_text",AD_TEXT:"ad_text",AD_BUBBLE:"ad_bubble",NON_AD:"non_ad",UNKNOWN:"unknown",OTHER:"other",TEMPLATE:"template",GENERIC:"generic",LIST:"list",COMPACT_LIST:"compact_list",BUTTON:"button",RECEIPT:"receipt",GENERIC_LEGACY:"generic_legacy",FALLBACK:"fallback",RIDE_INTENT:"ride_intent",RIDE_SIGNUP:"ride_signup",RIDE_WELCOME:"ride_welcome",RIDE_ORDER_CONFIRMATION:"ride_order_confirmation",RIDE_REQUESTED:"ride_requested",RIDE_DRIVER_ON_THE_WAY:"ride_driver_on_the_way",RIDE_NO_DRIVER:"ride_no_driver",RIDE_DRIVER_ARRIVING:"ride_driver_arriving",RIDE_DRIVER_CANCELED:"ride_driver_canceled",RIDE_RIDER_CANCELED:"ride_rider_canceled",RIDE_COMPLETE:"ride_complete",RIDE_ADMIN_MESSAGE:"ride_admin_message",RIDE_RECEIPT:"ride_receipt",RIDE_REENGAGEMENT_FIRST_RIDE:"ride_reengagement_first_ride",GET_RIDE:"give_get_ride",GIVE_RIDE:"send_give_get_ride",REFERER_PROMO:"referer_promo",INSTANT_GAMES_SHARE:"instant_games_share",INSTANT_GAMES_SCORE:"instant_games_score",LINK:"link_admin_message",UNLINK:"unlink_admin_message",BLOCK_ALL:"block_all_admin_message",UNBLOCK_ALL:"unblock_all_admin_message",BLOCK_PROMOTION:"block_promotion_admin_message",UNBLOCK_PROMOTION:"unblock_promotion_admin_message",INITIAL_PROMOTION:"initial_promotion_admin_message",WEAK_CONSENT_ADMIN_MESSAGE:"weak_consent_admin_message",MESSENGER_TEAM_BOT_MESSAGE:"messenger_team_bot",MESSENGER_BOT_BASE_GENERIC:"messenger_bot_base_generic",COMMERCE_COMPACT_LIST:"commerce_compact_list"};}),null);
__d("PageProductTransactionPaymentTypeDataKey",[],(function a(b,c,d,e,f,g){f.exports={ACCOUNT_NAME:"account_name",ACCOUNT_NO:"account_no"};}),null);
__d('FileInput.react',['cx','invariant','FileInput','InlineBlock.react','React','ReactDOM','joinClasses'],(function a(b,c,d,e,f,g,h,i){var j,k,l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;function m(){var n,o;'use strict';for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=k.constructor).call.apply(n,[this].concat(q)),this.getFileInput=function(){return this.$FileInput1;}.bind(this),this.focus=function(){var s=c('ReactDOM').findDOMNode(this.refs.fileInput);if(!s.disabled)s.focus();}.bind(this),o;}m.prototype.render=function(){'use strict';var n=c('joinClasses')("_m",this.props.containerClassName),o='container',p=c('React').createElement('input',babelHelpers['extends']({},this.props,{type:'file',className:c('joinClasses')(this.props.className,"_n"),ref:'fileInput'}),undefined);if(this.props.display==='inline-block')return c('React').createElement(c('InlineBlock.react'),{className:n,ref:o},this.props.children,p);return c('React').createElement('span',{className:n,ref:o},this.props.children,p);};m.prototype.componentDidMount=function(){'use strict';var n=c('ReactDOM').findDOMNode(this.refs.fileInput),o=c('ReactDOM').findDOMNode(this.refs.container),p=o.firstChild;p.nodeName==='A'||i(0);p.setAttribute('rel','ignore');this.$FileInput1=new (c('FileInput'))(o,p,n);};m.prototype.componentWillUnmount=function(){'use strict';this.$FileInput1.destroy();this.$FileInput1=null;};m.propTypes={containerClassName:l.string,display:l.oneOf(['inline-block','inline'])};m.defaultProps={display:'inline-block'};f.exports=m;}),null);
__d("XOmnipickerPhotoUploadController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/omnipicker\/upload\/file\/photo\/",{source:{type:"Enum",required:true,enumType:0},waterfall_id:{type:"String"},vault_fbid:{type:"String"}});}),null);
__d('CommerceContactMerchantManualPaymentSection.react',['cx','fbt','FBPaymentsStringHelper','FileInput.react','FileInputUploader','Image.react','PageProductTransactionPaymentTypeDataKey','React','ReactDOM','XOmnipickerPhotoUploadController','XUIButton.react','XUIGrayText.react','XUISpinner.react','XUIText.react'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes,m=29,n=120;j=babelHelpers.inherits(o,c('React').Component);k=j&&j.prototype;function o(p){k.constructor.call(this,p);this.$CommerceContactMerchantManualPaymentSection6=function(event,q){var r=q.response.getPayload()[0];this.setState({photoUploading:false,receiptPhotoID:r.fbid,receiptPhotoURL:r.src});this.props.onReceiptUpdated(r.fbid,r.src);}.bind(this);this.$CommerceContactMerchantManualPaymentSection2=function(q){var r=c('XOmnipickerPhotoUploadController').getURIBuilder().setEnum('source',m).getURI(),s=this.refs.fileInput,t=new (c('FileInputUploader'))(c('ReactDOM').findDOMNode(s)).setURI(r);t.subscribe('failure',this.$CommerceContactMerchantManualPaymentSection5);t.subscribe('success',this.$CommerceContactMerchantManualPaymentSection6);t.send();s.getFileInput().clear();this.setState({photoUploading:true});}.bind(this);this.state={receiptPhotoID:null,receiptPhotoURL:null,photoUploading:false};}o.prototype.render=function(){var p=this.props.paymentOptionDetails,q=p[c('PageProductTransactionPaymentTypeDataKey').ACCOUNT_NAME],r=p[c('PageProductTransactionPaymentTypeDataKey').ACCOUNT_NO],s=c('FBPaymentsStringHelper').stringToMarkup(p.description),t=r==null?null:c('React').createElement(c('XUIGrayText.react'),{display:'block',shade:'dark',size:'small',className:"_3-8m"},i._("Account Number"),": ",r),u=q==null?null:c('React').createElement(c('XUIGrayText.react'),{display:'block',shade:'dark',size:'small',className:"_3-8m"},i._("Name on Account"),": ",q);return c('React').createElement('div',{className:"_2ph-"},c('React').createElement(c('XUIGrayText.react'),{display:'block',shade:'light',size:'small'},this.$CommerceContactMerchantManualPaymentSection1()),c('React').createElement(c('XUIText.react'),{display:'block',weight:'bold',size:'small',className:"_3-8m"},this.props.paymentOptionDetails.name),t,u,c('React').createElement(c('XUIGrayText.react'),{display:'block',shade:'dark',size:'small',className:"_3-8m"},s),c('React').createElement(c('XUIGrayText.react'),{className:"_3-97",display:'block',size:'small'},i._("Order #{order_number}",[i.param('order_number',this.props.invoiceID)])),c('React').createElement('div',null,c('React').createElement(c('XUISpinner.react'),{className:"_3-9c"+(!this.state.photoUploading?' '+"hidden_elem":'')}),c('React').createElement('div',{className:(this.state.photoUploading?"hidden_elem":'')+(' '+"_3-96")},c('React').createElement(c('FileInput.react'),{name:'file',multiple:false,ref:'fileInput',accept:'image/*',onChange:this.$CommerceContactMerchantManualPaymentSection2},c('React').createElement(c('XUIButton.react'),{href:{url:'#'},label:this.$CommerceContactMerchantManualPaymentSection3()})))),this.$CommerceContactMerchantManualPaymentSection4());};o.prototype.$CommerceContactMerchantManualPaymentSection4=function(){if(!this.state.receiptPhotoURL)return null;return c('React').createElement(c('Image.react'),{src:this.state.receiptPhotoURL,height:n,width:n});};o.prototype.$CommerceContactMerchantManualPaymentSection3=function(){return this.state.receiptPhotoID?i._("Attach Different Receipt"):i._("Attach Receipt");};o.prototype.$CommerceContactMerchantManualPaymentSection1=function(){return i._("Payment instructions from seller");};o.prototype.$CommerceContactMerchantManualPaymentSection5=function(p){};o.propTypes={paymentOptionDetails:l.object.isRequired,invoiceID:l.string.isRequired,onReceiptUpdated:l.func.isRequired};f.exports=o;}),null);
__d('FBAccordion.react',['cx','invariant','React','joinClasses'],(function a(b,c,d,e,f,g,h,i){var j,k;j=babelHelpers.inherits(l,c('React').Component);k=j&&j.prototype;function l(){var m,n;'use strict';for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=k.constructor).call.apply(m,[this].concat(p)),this.$FBAccordion1=function(r){var s=0,t=this.state?this.state.expandedSectionKey:null,u=null;c('React').Children.forEach(r.children,function(v,w){var x=v.props.expanded;u=t===w?t:u;if(x&&t===null){s===0||i(0);s++;u=w;}else if(u===null)u=w;});return u;}.bind(this),this.$FBAccordion2=function(r){if(this.state.expandedSectionKey!==r)this.setState({expandedSectionKey:r});}.bind(this),this.state={expandedSectionKey:this.$FBAccordion1(this.props)},n;}l.prototype.componentWillReceiveProps=function(m){'use strict';var n=this.$FBAccordion1(m);if(this.state.expandedSectionKey!==n)this.setState({expandedSectionKey:n});};l.prototype.render=function(){'use strict';var m=c('React').Children.map(this.props.children,function(n,o){return c('React').cloneElement(n,{isExpanded:this.state.expandedSectionKey===o,onSectionClick:this.$FBAccordion2,sectionKey:o});}.bind(this));return c('React').createElement('div',babelHelpers['extends']({},this.props,{className:c('joinClasses')(this.props.className,"_5ygd")}),m);};f.exports=l;}),null);
__d('FBAccordionSection.react',['cx','React','emptyFunction'],(function a(b,c,d,e,f,g,h){var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;function l(){var m,n;'use strict';for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.onClick=function(){this.props.onSectionClick(this.props.sectionKey);this.props.onClick(this.props.sectionKey);}.bind(this),n;}l.prototype.render=function(){'use strict';var m=this.props.maxHeight||'100%';return c('React').createElement('div',{className:"_4r-a"+(this.props.isExpanded?' '+"_3uxn":'')},c('React').createElement('div',{className:"_5yg8",onClick:this.onClick,role:'button',tabIndex:'0'},this.props.header),c('React').createElement('div',{className:"_1flr",style:{maxHeight:this.props.isExpanded?m:0}},this.props.children));};l.propTypes={expanded:k.bool,header:k.node.isRequired,maxHeight:k.number,onClick:k.func};l.defaultProps={expanded:false,onClick:c('emptyFunction')};f.exports=l;}),null);
__d('FBPaymentsBankDetailsShape_DEPRECATED',['React'],(function a(b,c,d,e,f,g){'use strict';var h=c('React').PropTypes,i=h.shape({code:h.string.isRequired,image:h.string,name:h.string.isRequired});f.exports=i;}),null);
__d('FBPaymentsBankSelector_DEPRECATED.react',['ix','cx','fbt','FBPaymentsBankDetailsShape_DEPRECATED','Image.react','React','XUIPopoverButton.react','XUISingleSelector.react','fbglyph'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l,m=c('XUISingleSelector.react').Option,n=c('React').PropTypes,o='data:image/png;base64,',p=480;k=babelHelpers.inherits(q,c('React').Component);l=k&&k.prototype;function q(){var r,s;for(var t=arguments.length,u=Array(t),v=0;v<t;v++)u[v]=arguments[v];return s=(r=l.constructor).call.apply(r,[this].concat(u)),this.onChange=function(w){this.props.onBankSelected(this.props.banks.find(function(x){return x.code===w.value;}));}.bind(this),s;}q.prototype.renderBankIcon=function(r){if(!r.image)return null;return (c('React').createElement(c('Image.react'),{className:"_4e1_",src:o+r.image}));};q.prototype.renderCustomButton=function(){var r=c('React').createElement(c('Image.react'),{className:"_4e20",src:h("images\/assets_DO_NOT_HARDCODE\/fb_glyphs\/double-triangle-v_16_fig-dark-50.png")});return (c('React').createElement(c('XUIPopoverButton.react'),{chevron:r,className:"_4e22",maxwidth:0,size:'large'}));};q.prototype.renderDefaultOption=function(){return (c('React').createElement(m,{className:"_4e23",'default':true,key:'default'},j._("Select your bank")));};q.prototype.render=function(){return (c('React').createElement(c('XUISingleSelector.react'),{className:"_4e2g",customButton:this.renderCustomButton(),maxheight:this.props.maxheight,maxwidth:0,onChange:this.onChange,size:'large'},this.renderDefaultOption(),this.props.banks.map(function(r){return (c('React').createElement(m,{className:"_4e23",icon:this.renderBankIcon(r),key:r.code,value:r.code},r.name));}.bind(this))));};q.propTypes={banks:n.arrayOf(c('FBPaymentsBankDetailsShape_DEPRECATED')).isRequired,maxheight:n.number,onBankSelected:n.func.isRequired};q.defaultProps={maxheight:p};f.exports=q;}),null);
__d('FBPaymentsPaymentMethodShape_DEPRECATED',['FBPaymentsMethodType','React'],(function a(b,c,d,e,f,g){'use strict';var h=c('React').PropTypes,i=h.shape({title:h.string,type:h.oneOf(Object.values(c('FBPaymentsMethodType'))).isRequired});f.exports=i;}),null);
__d('FBPaymentsChoosePaymentMethodForm_DEPRECATED.react',['cx','fbt','FBAccordion.react','FBAccordionSection.react','FBPaymentsBankSelector_DEPRECATED.react','FBPaymentsCreditCardForm_DEPRECATED.react','FBPaymentsMethodType','FBPaymentsPaymentMethodShape_DEPRECATED','Link.react','P2PCreditCardDetails.react','P2PLinkConstants','P2PText.react','React','XUIRadioList.react','emptyFunction','setImmediate'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('XUIRadioList.react').Item,m=c('React').PropTypes;j=babelHelpers.inherits(n,c('React').Component);k=j&&j.prototype;function n(o){k.constructor.call(this,o);this.handleBankSelected=function(p){this.props.onPaymentMethodConfigured({bank:p,isValid:!!p,type:c('FBPaymentsMethodType').NET_BANKING});}.bind(this);this.handleCreditCardFormValidation=function(p,q){this.props.onPaymentMethodConfigured({isValid:p,formData:q,type:c('FBPaymentsMethodType').NEW_CREDIT_CARD});}.bind(this);this.renderPaymentMethodItem=function(p,q){var r=null,s=null;switch(p.type){case c('FBPaymentsMethodType').GENERIC_CARD:r=c('React').createElement(c('P2PCreditCardDetails.react'),{creditCard:p.creditCard});break;case c('FBPaymentsMethodType').NEW_CREDIT_CARD:r=i._("Credit or Debit Card");s=this.renderCreditCardFormSection(q);break;case c('FBPaymentsMethodType').NET_BANKING:r=i._("Online Banking");s=this.renderBankSelectorSection(p);break;case c('FBPaymentsMethodType').PAY_OVER_COUNTER:r=i._("Payment at Store Counter");break;case c('FBPaymentsMethodType').MANUAL_TRANSFER:r=p.title;break;default:r=p.title?p.title:p.type;s=c('React').createElement(c('P2PText.react'),{type:'primary'},'Expanded content for ',r);break;}s=s?c('React').createElement('div',{className:"_51c-"},s):null;var t=c('React').createElement(l,{className:"_51c_",selectedValue:this.state.selectedKey,value:q},c('React').createElement(c('P2PText.react'),{type:'primary'},r));return (c('React').createElement(c('FBAccordionSection.react'),{header:t,key:q,onClick:this.onSectionClick.bind(this)},s));}.bind(this);this.state={selectedKey:0};}n.prototype.componentWillMount=function(){c('setImmediate')(function(){return this.onSectionClick(this.state.selectedKey);}.bind(this));};n.prototype.onSectionClick=function(o){this.setState({selectedKey:o});var p=this.props.paymentMethods[o];this.props.onPaymentMethodSelected(p);switch(p.type){case c('FBPaymentsMethodType').PAY_OVER_COUNTER:this.props.onPaymentMethodConfigured({isValid:true,type:p.type});break;case c('FBPaymentsMethodType').MANUAL_TRANSFER:var q=p.manual_transfer_info&&p.manual_transfer_info.id;this.props.onPaymentMethodConfigured({isValid:true,type:p.type,optionId:q});break;case c('FBPaymentsMethodType').GENERIC_CARD:this.props.onPaymentMethodConfigured({isValid:true,creditCard:p.creditCard,type:p.type});break;}};n.prototype.getSections=function(){return this.props.paymentMethods.map(this.renderPaymentMethodItem,this);};n.prototype.renderCreditCardFormSection=function(o){if(o!==this.state.selectedKey)return null;return c('React').createElement('div',null,c('React').createElement(c('FBPaymentsCreditCardForm_DEPRECATED.react'),{onValidation:this.handleCreditCardFormValidation,saveErrors:this.props.saveErrors,showIcons:false,showSecondaryIcons:true,showZipCodeField:false,useGutters:true}),c('React').createElement(c('P2PText.react'),{className:"_3-8y",type:'secondary'},i._("Your payment info is stored securely. {Link with text that goes to learn more page}",[i.param('Link with text that goes to learn more page',c('React').createElement(c('Link.react'),{href:c('P2PLinkConstants').securePayInfoLearnMoreURI,target:'_blank'},i._("Learn More")))])));};n.prototype.renderBankSelectorSection=function(o){return c('React').createElement(c('FBPaymentsBankSelector_DEPRECATED.react'),{banks:o.banks,onBankSelected:this.handleBankSelected});};n.prototype.render=function(){return (c('React').createElement('ul',{className:"_51d0"},c('React').createElement(c('FBAccordion.react'),null,this.getSections())));};n.propTypes={onPaymentMethodConfigured:m.func.isRequired,onPaymentMethodSelected:m.func.isRequired,paymentMethods:m.arrayOf(c('FBPaymentsPaymentMethodShape_DEPRECATED')).isRequired,saveErrors:m.object};n.defaultProps={onPaymentMethodConfigured:c('emptyFunction')};f.exports=n;}),null);
__d('FBPaymentsLegalDisclaimer_DEPRECATED.react',['fbt','FBPaymentsLinkHelper','FBPaymentsMethodType','Link.react','P2PText.react','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;function l(m){j.constructor.call(this,m);}l.prototype.getLegalDisclaimerText=function(){var m=c('FBPaymentsLinkHelper').getPayTermsAndPoliciesURI(this.props.paymentType),n=h._("By clicking Complete Purchase, you agree to Facebook's {=terms and policies}",[h.param('=terms and policies',c('React').createElement(c('Link.react'),{href:m,target:'_blank'},'terms and policies'))]),o=h._("By clicking Pay, you agree to Facebook's and 2C2P's {=terms and policies}",[h.param('=terms and policies',c('React').createElement(c('Link.react'),{href:m,target:'_blank'},'terms and policies'))]),p=h._("By clicking Log In and Pay, you agree to Facebook's and 2C2P's {=terms and policies}",[h.param('=terms and policies',c('React').createElement(c('Link.react'),{href:m,target:'_blank'},'terms and policies'))]),q=h._("By clicking Continue to Pay, you agree to Facebook's and 2C2P's {=terms and policies}",[h.param('=terms and policies',c('React').createElement(c('Link.react'),{href:m,target:'_blank'},'terms and policies'))]);switch(this.props.paymentMethodType){case c('FBPaymentsMethodType').GENERIC_CARD:return o;case c('FBPaymentsMethodType').NET_BANKING:return p;case c('FBPaymentsMethodType').PAY_OVER_COUNTER:return q;case c('FBPaymentsMethodType').MANUAL_TRANSFER:return n;default:return null;}};l.prototype.render=function(){return (c('React').createElement(c('P2PText.react'),{type:'secondary'},this.getLegalDisclaimerText()));};l.propTypes={paymentMethodType:k.string.isRequired,paymentType:k.string.isRequired};l.defaultProps={paymentType:''};f.exports=l;}),null);
__d('FBPaymentsCreditCardVerificationDialog_DEPRECATED.react',['cx','fbt','CreditCardFormParam','FBPaymentsCreditCardVerificationForm_DEPRECATED.react','P2PButton.react','P2PCreditCard','P2PDialog.react','P2PDialogBody.react','P2PDialogFooter.react','P2PDialogTitle.react','P2PLoadingMask.react','P2PText.react','PaymentMethodUtils','React','emptyFunction'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=k.constructor).call.apply(n,[this].concat(q)),this.state={cscInput:null,isValid:false},this.handleValidation=function(s,t){this.setState({cscInput:t[c('CreditCardFormParam').CSC],isValid:s});}.bind(this),this.handleConfirmClick=function(){this.props.onConfirm(this.state.cscInput);}.bind(this),this.getMaxCSCLength=function(){var s=this.props.creditCard.getCardType();return c('PaymentMethodUtils').getCardTypeFromCode(s).cscDigits;}.bind(this),this.getMessage=function(){if(this.getMaxCSCLength()===3){return i._("Please re-enter your card's three-digit security code.");}else return i._("Please re-enter your card's four-digit security code.");}.bind(this),this.renderFooter=function(){var s=i._("Cancel"),t=this.props.showCancelButton?c('React').createElement(c('P2PButton.react'),{label:s,onClick:this.props.onCancel,use:'default'}):null;return (c('React').createElement(c('P2PDialogFooter.react'),{className:"_3-8-",leftContent:this.props.leftContent},t,c('React').createElement(c('P2PButton.react'),{disabled:!this.state.isValid,label:this.props.primaryButtonText,onClick:this.handleConfirmClick,use:'confirm'})));}.bind(this),o;}m.prototype.render=function(){var n={};n[c('CreditCardFormParam').CARD_NUMBER]=this.props.creditCard.getCreditCardNumberMask();n[c('CreditCardFormParam').CARD_EXPIRATION]=this.props.creditCard.getExpFormattedShort();return (c('React').createElement(c('P2PDialog.react'),{layerHideOnBlur:false,repositionOnUpdate:true,shown:true},c('React').createElement(c('P2PDialogTitle.react'),null,i._("Enter Security Code")),c('React').createElement(c('P2PDialogBody.react'),null,c('React').createElement(c('FBPaymentsCreditCardVerificationForm_DEPRECATED.react'),{cscMaxLength:this.getMaxCSCLength(),onValidation:this.handleValidation,prefilledFormData:n}),c('React').createElement(c('P2PText.react'),{className:"_3-8y",type:'secondary'},this.getMessage())),this.renderFooter(),c('React').createElement(c('P2PLoadingMask.react'),{visible:this.props.loading})));};m.propTypes={creditCard:l.instanceOf(c('P2PCreditCard')).isRequired,leftContent:l.node,loading:l.bool,onCancel:l.func,onConfirm:l.func.isRequired,primaryButtonText:l.node,showCancelButton:l.bool};m.defaultProps={loading:false,onCancel:c('emptyFunction'),onConfirm:c('emptyFunction'),primaryButtonText:i._("Confirm"),showCancelButton:true};f.exports=m;}),null);
__d('MNContentSubscriptionMessageUserEngagementTypedLogger',['Banzai','GeneratedLoggerUtils','nullthrows'],(function a(b,c,d,e,f,g){'use strict';function h(){this.clear();}h.prototype.log=function(){c('GeneratedLoggerUtils').log('logger:MNContentSubscriptionMessageUserEngagementLoggerConfig',this.$MNContentSubscriptionMessageUserEngagementTypedLogger1,c('Banzai').BASIC);};h.prototype.logVital=function(){c('GeneratedLoggerUtils').log('logger:MNContentSubscriptionMessageUserEngagementLoggerConfig',this.$MNContentSubscriptionMessageUserEngagementTypedLogger1,c('Banzai').VITAL);};h.prototype.clear=function(){this.$MNContentSubscriptionMessageUserEngagementTypedLogger1={};return this;};h.prototype.updateData=function(j){this.$MNContentSubscriptionMessageUserEngagementTypedLogger1=babelHelpers['extends']({},this.$MNContentSubscriptionMessageUserEngagementTypedLogger1,j);return this;};h.prototype.setAppID=function(j){this.$MNContentSubscriptionMessageUserEngagementTypedLogger1.appid=j;return this;};h.prototype.setAppversion=function(j){this.$MNContentSubscriptionMessageUserEngagementTypedLogger1.appversion=j;return this;};h.prototype.setBroadcastUnitID=function(j){this.$MNContentSubscriptionMessageUserEngagementTypedLogger1.broadcast_unit_id=j;return this;};h.prototype.setClientUserID=function(j){this.$MNContentSubscriptionMessageUserEngagementTypedLogger1.client_userid=j;return this;};h.prototype.setClienttime=function(j){this.$MNContentSubscriptionMessageUserEngagementTypedLogger1.clienttime=j;return this;};h.prototype.setCommerceItemID=function(j){this.$MNContentSubscriptionMessageUserEngagementTypedLogger1.commerce_item_id=j;return this;};h.prototype.setCommerceMessageType=function(j){this.$MNContentSubscriptionMessageUserEngagementTypedLogger1.commerce_message_type=j;return this;};h.prototype.setCountry=function(j){this.$MNContentSubscriptionMessageUserEngagementTypedLogger1.country=j;return this;};h.prototype.setDeviceid=function(j){this.$MNContentSubscriptionMessageUserEngagementTypedLogger1.deviceid=j;return this;};h.prototype.setInterface=function(j){this.$MNContentSubscriptionMessageUserEngagementTypedLogger1['interface']=j;return this;};h.prototype.setMessageID=function(j){this.$MNContentSubscriptionMessageUserEngagementTypedLogger1.message_id=j;return this;};h.prototype.setMessageTs=function(j){this.$MNContentSubscriptionMessageUserEngagementTypedLogger1.message_ts=j;return this;};h.prototype.setName=function(j){this.$MNContentSubscriptionMessageUserEngagementTypedLogger1.name=j;return this;};h.prototype.setPageID=function(j){this.$MNContentSubscriptionMessageUserEngagementTypedLogger1.page_id=j;return this;};var i={appid:true,appversion:true,broadcast_unit_id:true,client_userid:true,clienttime:true,commerce_item_id:true,commerce_message_type:true,country:true,deviceid:true,'interface':true,message_id:true,message_ts:true,name:true,page_id:true};f.exports=h;}),null);
__d('MNPlatformMessageUserEngagementTypedLogger',['Banzai','GeneratedLoggerUtils','nullthrows'],(function a(b,c,d,e,f,g){'use strict';function h(){this.clear();}h.prototype.log=function(){c('GeneratedLoggerUtils').log('logger:MNPlatformMessageUserEngagementLoggerConfig',this.$MNPlatformMessageUserEngagementTypedLogger1,c('Banzai').BASIC);};h.prototype.logVital=function(){c('GeneratedLoggerUtils').log('logger:MNPlatformMessageUserEngagementLoggerConfig',this.$MNPlatformMessageUserEngagementTypedLogger1,c('Banzai').VITAL);};h.prototype.clear=function(){this.$MNPlatformMessageUserEngagementTypedLogger1={};return this;};h.prototype.updateData=function(j){this.$MNPlatformMessageUserEngagementTypedLogger1=babelHelpers['extends']({},this.$MNPlatformMessageUserEngagementTypedLogger1,j);return this;};h.prototype.setAppID=function(j){this.$MNPlatformMessageUserEngagementTypedLogger1.appid=j;return this;};h.prototype.setAppversion=function(j){this.$MNPlatformMessageUserEngagementTypedLogger1.appversion=j;return this;};h.prototype.setClientUserID=function(j){this.$MNPlatformMessageUserEngagementTypedLogger1.client_userid=j;return this;};h.prototype.setClienttime=function(j){this.$MNPlatformMessageUserEngagementTypedLogger1.clienttime=j;return this;};h.prototype.setCommerceItemID=function(j){this.$MNPlatformMessageUserEngagementTypedLogger1.commerce_item_id=j;return this;};h.prototype.setCommerceMessageType=function(j){this.$MNPlatformMessageUserEngagementTypedLogger1.commerce_message_type=j;return this;};h.prototype.setCountry=function(j){this.$MNPlatformMessageUserEngagementTypedLogger1.country=j;return this;};h.prototype.setDeviceid=function(j){this.$MNPlatformMessageUserEngagementTypedLogger1.deviceid=j;return this;};h.prototype.setInterface=function(j){this.$MNPlatformMessageUserEngagementTypedLogger1['interface']=j;return this;};h.prototype.setMessageID=function(j){this.$MNPlatformMessageUserEngagementTypedLogger1.message_id=j;return this;};h.prototype.setMessageTs=function(j){this.$MNPlatformMessageUserEngagementTypedLogger1.message_ts=j;return this;};h.prototype.setName=function(j){this.$MNPlatformMessageUserEngagementTypedLogger1.name=j;return this;};h.prototype.setPageID=function(j){this.$MNPlatformMessageUserEngagementTypedLogger1.page_id=j;return this;};var i={appid:true,appversion:true,client_userid:true,clienttime:true,commerce_item_id:true,commerce_message_type:true,country:true,deviceid:true,'interface':true,message_id:true,message_ts:true,name:true,page_id:true};f.exports=h;}),null);
__d('MNCommerceDialogStateActions',['MessengerDispatcher','MNCommerceActionTypes'],(function a(b,c,d,e,f,g){'use strict';var h={showDialog:function i(j,k){c('MessengerDispatcher').dispatch({type:c('MNCommerceActionTypes').DIALOG.SHOW,dialogContainer:j,state:k});},hideDialog:function i(){c('MessengerDispatcher').dispatch({type:c('MNCommerceActionTypes').DIALOG.HIDE});}};f.exports=h;}),null);
__d('MNCommerceOrderConfigActions',['MessengerDispatcher','MNCommerceActionTypes'],(function a(b,c,d,e,f,g){'use strict';var h={itemLoaded:function i(j){c('MessengerDispatcher').dispatch({type:c('MNCommerceActionTypes').RETAIL_ITEM.LOADED,item:j});},itemLoadError:function i(j){c('MessengerDispatcher').dispatch({type:c('MNCommerceActionTypes').RETAIL_ITEM.LOAD_ERROR,itemID:j});},itemReload:function i(j){c('MessengerDispatcher').dispatch({type:c('MNCommerceActionTypes').RETAIL_ITEM.RELOAD,itemID:j});}};f.exports=h;}),null);
__d('MNCommerceBubbleImage.react',['cx','React','joinClasses'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;l.prototype.render=function(){return (c('React').createElement('div',{className:c('joinClasses')("_4y9n"+(this.props.isSquare?' '+"_2j_n":'')+(!this.props.isSquare?' '+"_2j_r":''),this.props.className),style:{backgroundImage:'url(\''+this.props.source+'\')'}}));};function l(){i.apply(this,arguments);}l.propTypes={location:k.string,source:k.string.isRequired,width:k.number,isSquare:k.bool};f.exports=l;}),null);
__d('MNCommerceCheckoutButton.react',['cx','React','joinClasses'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes,l='medium';i=babelHelpers.inherits(m,c('React').Component);j=i&&i.prototype;m.getButtonSize=function(n){return l;};m.prototype.render=function(){var n="_48a0"+(this.props.disabled?' '+"_48a1":'')+(this.props.use==='default'?' '+"_48a2":'')+(this.props.use==='confirm'&&!this.props.disabled?' '+"_48a3":'');return (c('React').createElement('span',{className:c('joinClasses')(this.props.className,n),use:'default'},this.props.children));};function m(){i.apply(this,arguments);}m.propTypes={disabled:k.bool,use:k.oneOf(['default','confirm'])};f.exports=m;}),null);
__d('MNCommerceButton.react',['MessengerEnvironment','MessengerDialogButton.react','React','XUIButton.react'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('React').Component);i=h&&h.prototype;j.prototype.render=function(){var k=c('MessengerEnvironment').messengerui,l=k?c('MessengerDialogButton.react'):c('XUIButton.react'),m=this.props.type;if(!m)m=this.props.type==='confirm'?'primary':'secondary';var n=k?'default':this.props.use,o=babelHelpers['extends']({},this.props,{type:m,use:n});return (c('React').createElement(l,o,this.props.children));};function j(){h.apply(this,arguments);}f.exports=j;}),null);
__d('MNCommerceCheckoutOrderConfigReactShape',['React'],(function a(b,c,d,e,f,g){'use strict';var h=c('React').PropTypes,i=h.shape({allVariantOptions:h.object,id:h.string,initialVariantOptions:h.object,itemIDToItem:h.object,logo:h.string,name:h.string,optionToItems:h.object,ordered_product_items:h.array,product_item_id:h.string,variant_labels:h.array});f.exports=i;}),null);
__d('MNCommerceCheckoutOrderConfigUtils',['Map','Set'],(function a(b,c,d,e,f,g){'use strict';var h={DELIMITER:'!@*',addVariantOptions:function i(j){var k=j,l=this._buildItemMaps(k),m=l.optionToItems,n=l.itemIDToItem,o=l.variantToItemID,p=this._getVariantOptionsAndEligibleItems(k,m,n),q=p.allVariantOptions,r=p.initialVariantOptions;k.itemIDToItem=n;k.optionToItems=m;k.variantToItemID=o;k.allVariantOptions=q;k.initialVariantOptions=r;return k;},_buildItemMaps:function i(j){var k=new (c('Map'))(),l=new (c('Map'))(),m=new (c('Map'))();j.ordered_product_items.forEach(function(n){var o=n.variant_values,p=[];Object.keys(o).forEach(function(u){p.push(o[u]);});var q=p.join(h.DELIMITER);m.set(q,n.item_id);k.set(n.item_id,n);for(var r=0;r<p.length;r++){if(!l.has(r))l.set(r,new (c('Map'))());var s=p[r],t=l.get(r);if(!t.has(s)){t.set(s,new (c('Set'))([n.item_id]));}else t.get(s).add(n.item_id);}});return {itemIDToItem:k,optionToItems:l,variantToItemID:m};},_getVariantOptionsAndEligibleItems:function i(j,k,l){var m={},n={};for(var o=0;o<j.variant_labels.length;o++){m[o]={};var p=[];k.get(o).forEach(function(q,r){var s=new (c('Map'))();p.push({label:r,available:true});for(var t=0;t<j.variant_labels.length;t++){if(o===t)continue;var u=[];k.get(t).forEach(function(v,w){var x=this._getIntersection(v,k.get(o).get(r)),y=false;if(x.size>0)y=this._isInStock(x,l);u.push({label:w,available:y});}.bind(this),this);s.set(t,u);}m[o][r]=s;n[o]=p;}.bind(this),this);}return {allVariantOptions:m,initialVariantOptions:n};},_getIntersection:function i(j,k){var l=new (c('Set'))([]);j.forEach(function(m){if(k.has(m))l.add(m);});return l;},_isInStock:function i(j,k){var l=false;j.forEach(function(m){var n=k.get(m);if(n.commerce_inventory>0)l=true;});return l;}};f.exports=h;}),null);
__d('MNCommerceAttachmentConstants',[],(function a(b,c,d,e,f,g){var h={XLARGE_IMAGE_DIMENSION:72,LARGE_IMAGE_DIMENSION:60,SMALL_IMAGE_DIMENSION:32,SINGLE_IMAGE_HEIGHT:108,BUBBLE_PADDING:6,IMAGE_HEIGHT:{CHAT:108,WEB_INBOX:130},UNLINK_ERROR_DIALOG:{WIDTH:300},DIALOG:{WIDTH:445,PADDING:12},MDOTCOMDIALOG:{WIDTH:495},ORDER_DETAIL:{SUB_TOTAL:'subTotal',SHIPPING:'shippingCost',TAX:'tax',TOTAL:'totalCost'}};f.exports=h;}),null);
__d('MNCommerceDialog.react',['cx','MessengerEnvironment','LayerFadeOnHide','LayerHideOnEscape','MNCommerceAttachmentConstants','MessengerDialog.react','React','XUIDialog.react','emptyFunction','joinClasses'],(function a(b,c,d,e,f,g,h){'use strict';var i=c('React').PropTypes,j=c('React').createClass({displayName:'MNCommerceDialog',propTypes:{onToggle:i.func,shown:i.bool,width:i.number.isRequired},getDefaultProps:function k(){return {onToggle:c('emptyFunction'),repositionOnUpdate:true,shown:true,width:c('MessengerEnvironment').messengerui?c('MNCommerceAttachmentConstants').MDOTCOMDIALOG.WIDTH:c('MNCommerceAttachmentConstants').DIALOG.WIDTH};},componentDidUpdate:function k(){if(this.props.repositionOnUpdate)setTimeout(function(){if(this.isMounted()&&this.refs.dialog&&this.refs.dialog.layer)this.refs.dialog.layer.updatePosition();}.bind(this),0);},render:function k(){var l=c('MessengerEnvironment').messengerui,m=l?c('MessengerDialog.react'):c('XUIDialog.react');return (c('React').createElement(m,babelHelpers['extends']({behaviors:{LayerFadeOnHide:c('LayerFadeOnHide'),LayerHideOnEscape:c('LayerHideOnEscape')}},this.props,{className:c('joinClasses')(this.props.className,l?"_3rx0":''),ref:'dialog'}),this.props.children));}});f.exports=j;}),null);
__d('MNCommerceDialogBody.react',['MessengerEnvironment','MessengerDialogBody.react','React','XUIDialogBody.react'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('React').Component);i=h&&h.prototype;j.prototype.render=function(){var k=c('MessengerEnvironment').messengerui,l=k?c('MessengerDialogBody.react'):c('XUIDialogBody.react');return (c('React').createElement(l,this.props,this.props.children));};function j(){h.apply(this,arguments);}f.exports=j;}),null);
__d('MNCommerceDialogTitle.react',['MessengerEnvironment','MessengerDialogHeader.react','React','XUIDialogTitle.react'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('React').Component);i=h&&h.prototype;j.prototype.render=function(){var k=c('MessengerEnvironment').messengerui,l=k?c('MessengerDialogHeader.react'):c('XUIDialogTitle.react');return (c('React').createElement(l,this.props,this.props.children));};function j(){h.apply(this,arguments);}f.exports=j;}),null);
__d('MNCommerceDetailsDialog.react',['cx','fbt','React','MNCommerceDialog.react','MNCommerceDialogBody.react','MNCommerceDialogTitle.react','XUISpinner.react','XUIButton.react'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=k.constructor).call.apply(n,[this].concat(q)),this.$MNCommerceDetailsDialog3=function(){return this.props.title?c('React').createElement(c('MNCommerceDialogTitle.react'),null,this.props.title):null;}.bind(this),this.$MNCommerceDetailsDialog2=function(){return (c('React').createElement('div',{className:"_4y9b"},c('React').createElement('p',{className:"_4y9c"},i._("Sorry, Something Went Wrong")),c('React').createElement('p',{className:"_4y9d"},this.props.errorMessage),c('React').createElement(c('XUIButton.react'),{onClick:this.props.onTryAgain,label:i._("Try Again")})));}.bind(this),this.$MNCommerceDetailsDialog1=function(){return (c('React').createElement('div',{className:"_4y9e"},c('React').createElement(c('XUISpinner.react'),{background:'light',size:'large',paused:false})));},o;}m.prototype.render=function(){var n=null;if(this.props.loading){n=this.$MNCommerceDetailsDialog1();}else if(this.props.error){n=this.$MNCommerceDetailsDialog2();}else n=this.props.children;return c('React').createElement(c('MNCommerceDialog.react'),{className:this.props.className,modal:true,onToggle:this.props.onToggle,shown:this.props.shown},this.$MNCommerceDetailsDialog3(),c('React').createElement(c('MNCommerceDialogBody.react'),{useCustomPadding:true},n));};m.propTypes={error:l.object,errorMessage:l.node,loading:l.bool.isRequired,onToggle:l.func,onTryAgain:l.func,title:l.node,shown:l.bool.isRequired};m.defaultProps={shown:false};f.exports=m;}),null);
__d('MNCommerceDialogFooter.react',['cx','MessengerEnvironment','MessengerDialogFooter.react','React','XUIDialogFooter.react','joinClasses'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('React').Component);j=i&&i.prototype;k.prototype.render=function(){var l=c('MessengerEnvironment').messengerui,m=l?c('MessengerDialogFooter.react'):c('XUIDialogFooter.react'),n=void 0,o=this.props.children;if(l){n=c('React').Children.count(this.props.children);o=c('React').Children.map(this.props.children,function(p,q){if(!p)return null;return c('React').cloneElement(p,{className:c('joinClasses')(p.props.className,"_4ec0"),type:q===0&&n===2?'secondary':'primary'});});}return (c('React').createElement(m,this.props,o));};function k(){i.apply(this,arguments);}f.exports=k;}),null);
__d('MNCommerceLogoHeader.react',['cx','Image.react','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes,l={width:72,height:24},m={width:36,height:12},n=3,o=.75;i=babelHelpers.inherits(p,c('React').Component);j=i&&i.prototype;function p(){var q,r;for(var s=arguments.length,t=Array(s),u=0;u<s;u++)t[u]=arguments[u];return r=(q=j.constructor).call.apply(q,[this].concat(t)),this.$MNCommerceLogoHeader1=function(){var v=this.props.logo;if(!v||!v.src)return null;var w=l.width,x=l.height,y=v.width/v.height;if(Math.abs(n-y)<=o){w=m.width;x=m.height;}var z={float:this.props.children?this.props.logoPosition:'none'};z.maxWidth=w;return (c('React').createElement('div',{className:"_b0-",key:'logo'},c('React').createElement('div',{className:"_fz0"},c('React').createElement(c('Image.react'),{className:"_56rs",height:v.height,src:v.src,width:v.width,style:{maxHeight:x}}))));}.bind(this),r;}p.prototype.render=function(){var q=this.$MNCommerceLogoHeader1();if(this.props.children){var r=c('React').createElement('div',{className:"_fy-"+(this.props.logoPosition==='left'?' '+"_fy_":''),key:'children'},c('React').createElement('div',{className:"_56rv"},this.props.children)),s=[r];if(q)if(this.props.logoPosition==='right'){s.push(q);}else s.unshift(q);return c('React').createElement('div',{className:(!q&&this.props.childPosition==='right'?"_fy_":'')+(' '+"_56rt")},s);}else return q;};p.propTypes={logo:k.object,logoPosition:k.oneOf(['left','right']),childPosition:k.oneOf(['left','right'])};f.exports=p;}),null);
__d('MNCommerceItemText.react',['cx','fbt','MNCommerceOrderItemsStatus','React','joinClasses'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=k.constructor).call.apply(n,[this].concat(q)),this.$MNCommerceItemText1=function(){if(this.props.metalines)return (c('React').createElement('div',null,this.$MNCommerceItemText2(this.props.metalines.metaline_1),this.$MNCommerceItemText2(this.props.metalines.metaline_2),this.$MNCommerceItemText3()));return null;}.bind(this),this.$MNCommerceItemText2=function(s){if(s)return (c('React').createElement('div',null,s));return null;},this.$MNCommerceItemText3=function(){if(this.props.size!=='large')return null;if(this.props.statusType===c('MNCommerceOrderItemsStatus').CANCELED)return (c('React').createElement('div',null,c('React').createElement('span',{className:"__hz"},i._("Canceled"),' \u00b7 '),this.props.metalines.metaline_3));return (c('React').createElement('div',null,this.props.metalines.metaline_3));}.bind(this),o;}m.prototype.render=function(){var n=this.props,o=n.className,p=babelHelpers.objectWithoutProperties(n,['className']),q="_swr"+(p.size==='small'?' '+"_sws":'');return c('React').createElement('div',babelHelpers['extends']({className:c('joinClasses')(o,q)},p),c('React').createElement('div',{className:"_51fw"},this.props.title),c('React').createElement('div',{className:"_2y0f"},this.$MNCommerceItemText1()));};m.propTypes={metalines:l.shape({metaline_1:l.string,metaline_2:l.string,metaline_3:l.string}),title:l.string,size:l.oneOf(['large','small']),statusType:l.number};m.defaultProps={size:'small'};f.exports=m;}),null);
__d('MNCommerceSingleListItem.react',['cx','Image.react','MNCommerceItemText.react','React','joinClasses'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.$MNCommerceSingleListItem1=function(){var r=this.props.imageDimension;if(this.props.thumbURL){return (c('React').createElement(c('Image.react'),{className:"_1fle",height:r,src:this.props.thumbURL,width:r}));}else return (c('React').createElement('div',{className:"_1prr",style:{height:r,width:r}}));}.bind(this),n;}l.prototype.render=function(){return c('React').createElement('div',{className:c('joinClasses')(this.props.className,"_39q_"),style:{height:this.props.imageDimension,width:this.props.width}},c('React').createElement('div',{className:"_1fld"},this.$MNCommerceSingleListItem1()),c('React').createElement(c('MNCommerceItemText.react'),babelHelpers['extends']({className:"_1flf",style:{left:this.props.imageDimension},size:this.props.size,statusType:this.props.statusType},this.props)));};l.propTypes={description:k.string,thumbURL:k.string,imageDimension:k.number.isRequired,statusType:k.number};f.exports=l;}),null);
__d('MNCommerceCheckoutOrderConfigDialog.react',['cx','fbt','MessengerEnvironment','MNCommerceButton.react','MNCommerceCheckoutButton.react','MNCommerceCheckoutOrderConfigReactShape','MNCommerceCheckoutOrderConfigUtils','MNCommerceDetailsDialog.react','MNCommerceDialogFooter.react','MNCommerceDialogBody.react','MNCommerceLogoHeader.react','MNCommerceSingleListItem.react','React','Set','XUIRadioButtonGroup.react'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes,m=18,n='\u00B7';j=babelHelpers.inherits(o,c('React').Component);k=j&&j.prototype;function o(q,r){k.constructor.call(this,q,r);p.call(this);this.state=this.$MNCommerceCheckoutOrderConfigDialog1();}o.prototype.componentWillReceiveProps=function(q){this.setState(this.$MNCommerceCheckoutOrderConfigDialog1(q));};o.prototype.render=function(){var q=i._("Your item couldn't be shown.");return (c('React').createElement(c('MNCommerceDetailsDialog.react'),babelHelpers['extends']({errorMessage:q},this.props),this.$MNCommerceCheckoutOrderConfigDialog2()));};o.propTypes={error:l.object,checkoutOrderConfig:c('MNCommerceCheckoutOrderConfigReactShape'),loading:l.bool.isRequired,onContinue:l.func.isRequired,onTryAgain:l.func,shown:l.bool.isRequired,statusType:l.number};o.defaultProps={shown:false};var p=function q(){this.$MNCommerceCheckoutOrderConfigDialog1=function(r){var s=r||this.props,t=s.checkoutOrderConfig;if(!t)return {};return {variantOptions:t.initialVariantOptions,variants:[]};}.bind(this);this.$MNCommerceCheckoutOrderConfigDialog2=function(){if(this.props.error||this.props.loading)return null;var r=i._("Continue"),s=i._("Cancel"),t=this.props.checkoutOrderConfig,u=null,v=this.$MNCommerceCheckoutOrderConfigDialog3(),w=t&&t.ordered_product_items;if(v&&v.size){var x=v.values().next().value,y=t&&t.itemIDToItem.get(x);u=y&&y.images;}else if(w&&w.length)u=w[0].images;var z=this.state.variants.filter(function(ha){return ha;}).join(' '+n+' '),aa=z?{metaline_1:z}:null,ba=this.state.variants,ca=t&&t.variant_labels,da=t&&(!ca||ca.length===0||ba.length>0&&ba.every(function(ha){return ha;})),ea={src:t?t.logo:'',width:m,height:m},fa=c('React').createElement(c('MNCommerceButton.react'),{className:"_23qd",label:s,onClick:this.$MNCommerceCheckoutOrderConfigDialog4,use:'default'});fa=!c('MessengerEnvironment').messengerui?fa:null;var ga=t&&ca&&ca.length>0;return (c('React').createElement('div',{className:"_vg4"},c('React').createElement(c('MNCommerceDialogBody.react'),null,c('React').createElement('div',{className:ga?"_vg5":''},c('React').createElement(c('MNCommerceLogoHeader.react'),{className:"_vg6",logo:ea,logoPosition:'left'}),c('React').createElement('div',{className:"_vg7"},c('React').createElement(c('MNCommerceSingleListItem.react'),{imageDimension:60,metalines:aa,size:'large',thumbURL:u,title:t&&t.name}))),this.$MNCommerceCheckoutOrderConfigDialog5()),c('React').createElement(c('MNCommerceDialogFooter.react'),null,fa,c('React').createElement(c('MNCommerceButton.react'),{className:"_23qe",disabled:!da,label:r,onClick:this.$MNCommerceCheckoutOrderConfigDialog6,use:'default'}))));}.bind(this);this.$MNCommerceCheckoutOrderConfigDialog3=function(r){var s=this.props.checkoutOrderConfig;if(!s)return null;var t=r||this.state.variants,u=s.optionToItems,v=null;for(var w=0;w<t.length;w++){var x=t[w];if(x){var y=u.get(w),z=y&&y.get(x);if(!v){v=z;}else v=c('MNCommerceCheckoutOrderConfigUtils').$MNCommerceCheckoutOrderConfigDialog7(v,z);}}return v;}.bind(this);this.$MNCommerceCheckoutOrderConfigDialog8=function(r,s){this.setState(this.$MNCommerceCheckoutOrderConfigDialog9(r,s));}.bind(this);this.$MNCommerceCheckoutOrderConfigDialog10=function(r,s,t){var u=this.props.checkoutOrderConfig;if(!u)return null;var v=this.state.variants.slice();if(this.state.variants[r]!==s){v[r]=s;v[t]=null;}var w=this.$MNCommerceCheckoutOrderConfigDialog3(v),x=[],y=u.optionToItems,z=u.itemIDToItem;y.get(t).forEach(function(aa,ba){var ca=c('MNCommerceCheckoutOrderConfigUtils').$MNCommerceCheckoutOrderConfigDialog7(aa,w?w:new (c('Set'))()),da=false;if(ca.size>0)da=c('MNCommerceCheckoutOrderConfigUtils').$MNCommerceCheckoutOrderConfigDialog11(ca,z);x.push({label:ba,available:da});},this);return x;}.bind(this);this.$MNCommerceCheckoutOrderConfigDialog9=function(r,s){var t=this.props.checkoutOrderConfig;if(!t)return null;var u=[],v=[],w=t.allVariantOptions[r][s];for(var x=0;x<t.variant_labels.length;x++)if(x===r){u.push(s);v.push(this.state.variantOptions[x]);}else{var y=this.state.variants.filter(function(aa){return aa;}),z=null;if(t.variant_labels.length<=2||y.length<2){z=w.get(x);}else z=this.$MNCommerceCheckoutOrderConfigDialog10(r,s,x);v.push(z);u.push(this.state.variants[x]);}return {variants:u,variantOptions:v};}.bind(this);this.$MNCommerceCheckoutOrderConfigDialog6=function(r){var s=this.props.checkoutOrderConfig;if(!s||this.state.variants.some(function(w){return !w;}))return;var t=s.seller_id,u=this.state.variants.join(c('MNCommerceCheckoutOrderConfigUtils').DELIMITER),v=s.variantToItemID.get(u);this.props.onContinue(v,t,this.state.variants.join(' '+n+' '));this.props.onToggle(false);}.bind(this);this.$MNCommerceCheckoutOrderConfigDialog4=function(r){this.props.onToggle(false);}.bind(this);this.$MNCommerceCheckoutOrderConfigDialog12=function(r,s,t){var u=r.map(function(v,w){return (c('React').createElement(c('MNCommerceCheckoutButton.react'),{key:w,disabled:v.available===false,use:'default',value:v.label},v.label));});return (c('React').createElement(c('XUIRadioButtonGroup.react'),{onValueChange:s,selectedValue:t,selectedUse:'confirm'},u));};this.$MNCommerceCheckoutOrderConfigDialog5=function(){var r=this.props.checkoutOrderConfig;if(!r)return null;var s=i._("Select"),t=r.variant_labels.map(function(u,v){return (c('React').createElement('div',{key:v},c('React').createElement('div',{className:"_vg8"},s+' '+u),c('React').createElement('div',{className:"_vg9"},this.$MNCommerceCheckoutOrderConfigDialog12(this.state.variantOptions[v],this.$MNCommerceCheckoutOrderConfigDialog8.bind(this,v),this.state.variants[v]))));}.bind(this));return t;}.bind(this);};f.exports=o;}),null);
__d('MNCommerceDialogStateStore',['FluxStore','MessengerDispatcher','MNCommerceActionTypes'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('FluxStore'));i=h&&h.prototype;function j(){i.constructor.call(this,c('MessengerDispatcher'));this.$MNCommerceDialogStateStore1=null;this.$MNCommerceDialogStateStore2=null;}j.prototype.__onDispatch=function(k){var l=k.type;switch(l){case c('MNCommerceActionTypes').DIALOG.SHOW:this.$MNCommerceDialogStateStore1=k.dialogContainer;this.$MNCommerceDialogStateStore2=k.state;this.__emitChange();break;case c('MNCommerceActionTypes').DIALOG.HIDE:this.$MNCommerceDialogStateStore1=null;this.$MNCommerceDialogStateStore2=null;this.__emitChange();break;}};j.prototype.getDialogContainer=function(){return this.$MNCommerceDialogStateStore1;};j.prototype.getState=function(){return this.$MNCommerceDialogStateStore2;};f.exports=new j();}),null);
__d('MNCommerceLoggingConstants',[],(function a(b,c,d,e,f,g){var h={DIALOG_SURFACE:{CHECKOUT_ORDER_CONFIG:'checkout_order_config',SHIPMENT:'shipment',RECEIPT:'receipt',UNLINK:'unlink',UNLINK_ERROR:'unlink_error',MANAGE:'manage'}};f.exports=h;}),null);
__d("XMNCommerceCheckoutOrderConfigController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/messages\/commerce\/checkout_order_config\/",{item_id:{type:"String",required:true},owner_id:{type:"String",required:true}});}),null);
__d('MNCommerceOrderConfigDataManager',['AsyncRequest','MNCommerceOrderConfigActions','XMNCommerceCheckoutOrderConfigController'],(function a(b,c,d,e,f,g){'use strict';h.prototype.fetchItem=function(i,j){var k=c('XMNCommerceCheckoutOrderConfigController').getURIBuilder().setString('item_id',i).setString('owner_id',j).getURI();new (c('AsyncRequest'))().setURI(k).setHandler(this.$MNCommerceOrderConfigDataManager1).setErrorHandler(this.$MNCommerceOrderConfigDataManager2).send();};h.prototype.$MNCommerceOrderConfigDataManager1=function(i){c('MNCommerceOrderConfigActions').itemLoaded(i.payload);};h.prototype.$MNCommerceOrderConfigDataManager2=function(i){var j=i.getRequest().uri.getQueryData(),k=j.item_id;c('MNCommerceOrderConfigActions').itemLoadError(k);};function h(){}f.exports=new h();}),null);
__d('MNCommerceOrderConfigStore',['Cache','FluxStore','LoadObject','MessengerDispatcher','MNCommerceActionTypes','MNCommerceCacheTimeoutLimits','MNCommerceCheckoutOrderConfigUtils','MNCommerceOrderConfigDataManager'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('FluxStore'));i=h&&h.prototype;function j(){i.constructor.call(this,c('MessengerDispatcher'));this.$MNCommerceOrderConfigStore1=new (c('Cache'))();}j.prototype.__onDispatch=function(k){var l=k.type,m=k.item?k.item.id:k.itemID;switch(l){case c('MNCommerceActionTypes').RETAIL_ITEM.LOADED:var n=k.item;n=c('MNCommerceCheckoutOrderConfigUtils').addVariantOptions(n);this.$MNCommerceOrderConfigStore1.set(m,c('LoadObject').empty().setValue(n),null,c('MNCommerceCacheTimeoutLimits').SUCCESS_TIMEOUT);this.__emitChange();break;case c('MNCommerceActionTypes').RETAIL_ITEM.LOAD_ERROR:this.$MNCommerceOrderConfigStore1.set(m,c('LoadObject').empty().setError(new Error('Unable to load item: '+m)),null,c('MNCommerceCacheTimeoutLimits').ERROR_TIMEOUT);this.__emitChange();break;case c('MNCommerceActionTypes').RETAIL_ITEM.RELOAD:if(m){this.$MNCommerceOrderConfigStore1.set(m,c('LoadObject').loading());c('MNCommerceOrderConfigDataManager').fetchItem(m);}this.__emitChange();break;}};j.prototype.getItem=function(k,l){if(k&&!this.$MNCommerceOrderConfigStore1.has(k)){this.$MNCommerceOrderConfigStore1.set(k,c('LoadObject').loading().setValue({itemID:k}));c('MNCommerceOrderConfigDataManager').fetchItem(k,l);}return this.$MNCommerceOrderConfigStore1.get(k)||c('LoadObject').empty();};f.exports=new j();}),null);
__d('MNCommerceCheckoutOrderConfigDialogContainer.react',['BanzaiLogger','MNCommerceDialogStateActions','MNCommerceDialogStateStore','MNCommerceLoggingConstants','MNCommerceLoggerEvents','MNCommerceCheckoutOrderConfigDialog.react','MNCommerceOrderConfigActions','MNCommerceOrderConfigStore','PureStoreBasedStateMixin','React'],(function a(b,c,d,e,f,g){'use strict';var h=c('React').createClass({displayName:'MNCommerceCheckoutOrderConfigDialogContainer',mixins:[c('PureStoreBasedStateMixin')(c('MNCommerceOrderConfigStore'))],statics:{calculateState:function i(){var j=c('MNCommerceDialogStateStore').getState(),k=null,l=null,m=null;if(j){k=j.itemID;l=j.ownerID;m=j.onContinue;}var n=c('MNCommerceOrderConfigStore').getItem(k,l);if(!n.isLoading())c('BanzaiLogger').log('MessengerCommerceLoggerConfig',{event:n.hasError()?c('MNCommerceLoggerEvents').DIALOG_LOAD_ERROR:c('MNCommerceLoggerEvents').DIALOG_LOAD_SUCCESS,debug_data:JSON.stringify({dialog_surface:c('MNCommerceLoggingConstants').DIALOG_SURFACE.CHECKOUT_ORDER_CONFIG,item_id:k})});return {shown:!!j,loading:n.isLoading(),itemID:k,checkoutOrderConfig:n.getValue(),onContinue:m,error:n.getError()};}},render:function i(){return (c('React').createElement(c('MNCommerceCheckoutOrderConfigDialog.react'),{error:this.state.error,checkoutOrderConfig:this.state.loading?null:this.state.checkoutOrderConfig,loading:this.state.loading,onContinue:this.state.onContinue,onToggle:this._onToggle,onTryAgain:this._onTryAgainClick,shown:this.state.shown}));},_onToggle:function i(j){if(!j){c('BanzaiLogger').log('MessengerCommerceLoggerConfig',{event:c('MNCommerceLoggerEvents').DIALOG_CLOSED,debug_data:JSON.stringify({dialog_surface:c('MNCommerceLoggingConstants').DIALOG_SURFACE.CHECKOUT_ORDER_CONFIG,item_id:this.state.itemID})});c('MNCommerceDialogStateActions').hideDialog();}},_onTryAgainClick:function i(){c('MNCommerceOrderConfigActions').itemReload(this.state.itemID);}});f.exports=h;}),null);
__d('MessengerPlatformGenericItemMercuryAttachment.react',['cx','fbt','AsyncDialog','AsyncRequest','Banzai','MessengerEnvironment','FBConfirmDialog.react','FBPaymentsCheckoutFlowContainer.react','FBPaymentsSerializableCheckoutConfigurationParser','Link.react','MessageShareType','MessengerAdsWebTypedLogger','MessagingForwardAttachmentDialog.react','messengerForwardAttachmentDialogReact','MessengerPlatformBubbleAspectRatio','MNAdsLoggerEventEnum','MNCommerceCallToActionType','MNCommerceCTAProcessor','MNCommerceBubbleImage.react','MNCommerceMessageType','MNCommercePostbackCTADataManager','MNCommercePromotionReactShapes','MNContentSubscriptionMessageUserEngagementTypedLogger','React','MercuryShareAttachmentRenderLocations','Tooltip','idx','joinClasses'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('messengerForwardAttachmentDialogReact').comp,m=c('React').PropTypes;function n(q){if(q!==undefined){var r=q.match(/\d+/);if(r!==undefined&&r!==null)return r[0];}return null;}function o(q,r){return (c('React').createElement(c('Link.react'),{className:r,key:q.title+q.id,onClick:q.onClick},q.translated_title||q.title));}j=babelHelpers.inherits(p,c('React').PureComponent);k=j&&j.prototype;function p(){var q,r;for(var s=arguments.length,t=Array(s),u=0;u<s;u++)t[u]=arguments[u];return r=(q=k.constructor).call.apply(q,[this].concat(t)),this.state={showDialog:false,showShare:false,showPaymentCheckoutDialog:false},this.$MessengerPlatformGenericItemMercuryAttachment4=function(){if(this.props.mnMessageType==c('MNCommerceMessageType').CONTENT_SUBSCRIPTION){var v=n(this.props.pageID),w=this.props.retailItem&&this.props.retailItem.id;new (c('MNContentSubscriptionMessageUserEngagementTypedLogger'))().setPageID(v).setMessageID(this.props.messageID).setCommerceItemID(w).setName('mn_platform_msg_click').log();c('Banzai').post('mn_platform_message_click_setsuna',{page_id:v,item_id:w});}}.bind(this),this.$MessengerPlatformGenericItemMercuryAttachment3=function(){var v=this.props.retailItem;if(!v)return null;return (c('React').createElement('div',{className:"_3cne"},c('React').createElement('div',{className:"_3cnf"},c('React').createElement('div',{className:"_3cng"},c('React').createElement('div',{className:"_3cnh"},this.props.longestName),c('React').createElement('div',{className:this.props.longestName?"_3cni":''},v.name)),this.$MessengerPlatformGenericItemMercuryAttachment5(),this.$MessengerPlatformGenericItemMercuryAttachment6())));}.bind(this),this.$MessengerPlatformGenericItemMercuryAttachment7=function(){if(this.props.isSponsored)return null;return (c('React').createElement('div',{className:"_3cnj"},c('React').createElement('span',{className:"_3cnk"}),this.$MessengerPlatformGenericItemMercuryAttachment8()));}.bind(this),this.$MessengerPlatformGenericItemMercuryAttachment8=function(){var v=this.props.label;if(v===0){return i._("Promoted");}else if(v===1)return i._("Sponsored");return null;}.bind(this),this.$MessengerPlatformGenericItemMercuryAttachment5=function(){var v=this.props.retailItem&&this.props.retailItem.metalines;if(!v)return null;v=Object.keys(v).filter(function(w){return v&&v[w];}).map(function(w,x){var y=v&&v[w];return (c('React').createElement('div',{className:"_3cnl",key:w},c('React').createElement('div',{className:"_3cnh"},this.props.longestMetaline),c('React').createElement('div',{className:this.props.longestMetaline?"_3cni":''},y)));}.bind(this));return v;}.bind(this),this.$MessengerPlatformGenericItemMercuryAttachment9=function(event){if(this.props.isSponsored)new (c('MessengerAdsWebTypedLogger'))().setEvent(c('MNAdsLoggerEventEnum').LINK_CLICK_CTA).setIsSponsored(this.props.isSponsored).setItemID(this.props.retailItem&&this.props.retailItem.id).setMessageID(this.props.messageID).setPageID(this.props.pageID).log();}.bind(this),this.$MessengerPlatformGenericItemMercuryAttachment13=function(){this.setState({showShare:true});}.bind(this),this.$MessengerPlatformGenericItemMercuryAttachment12=function(){this.setState({showShare:false});}.bind(this),this.$MessengerPlatformGenericItemMercuryAttachment11=function(){this.setState({showPaymentCheckoutDialog:true});}.bind(this),this.$MessengerPlatformGenericItemMercuryAttachment14=function(){this.setState({showPaymentCheckoutDialog:false});}.bind(this),this.onConfirm=function(){this.setState({showDialog:true});}.bind(this),this.onCancel=function(){this.setState({showDialog:false});}.bind(this),r;}p.prototype.componentDidMount=function(){if(this.props.isSponsored)new (c('MessengerAdsWebTypedLogger'))().setEvent(c('MNAdsLoggerEventEnum').MESSAGE_SEEN_THREAD).setIsSponsored(this.props.isSponsored).setItemID(this.props.retailItem&&this.props.retailItem.id).setMessageID(this.props.messageID).setPageID(this.props.pageID).log();};p.prototype.render=function(){var q={};if(this.props.location===c('MercuryShareAttachmentRenderLocations').CHAT&&this.props.width)q.width=this.props.width;if(this.props.isButtonList)return c('React').createElement('div',{className:"_3cn0",style:q},c('React').createElement('div',{className:"_3cn1"},this.$MessengerPlatformGenericItemMercuryAttachment1()));return c('React').createElement('div',{className:"_3cn0"+(this.props.location===c('MercuryShareAttachmentRenderLocations').WEB_INBOX?' '+"_1hf9":''),style:q},this.$MessengerPlatformGenericItemMercuryAttachment2(),c('React').createElement('div',{className:"_3cn1"},this.$MessengerPlatformGenericItemMercuryAttachment3(),this.$MessengerPlatformGenericItemMercuryAttachment1()));};p.prototype.$MessengerPlatformGenericItemMercuryAttachment2=function(){var q=this.props,r=q.isSubattachment,s=q.retailItem;if(!s||!s.thumb_url)return null;var t=c('React').createElement(c('MNCommerceBubbleImage.react'),{className:(!r?"_3_om":'')+(!r?' '+"_4j39":''),location:this.props.location,source:s.thumb_url,width:this.props.width,isSquare:s.image_aspect_ratio===c('MessengerPlatformBubbleAspectRatio').IMAGE_ASPECT_RATIO_SQUARE}),u=null;if(s.item_url){u=c('React').createElement(c('Link.react'),{href:s.item_url,onClick:function(){this.$MessengerPlatformGenericItemMercuryAttachment4();}.bind(this),target:'_blank'},t);}else u=t;var v=c('React').createElement('div',{className:"_3cn2",key:'image'},u);return v;};p.prototype.$MessengerPlatformGenericItemMercuryAttachment6=function(){var q=this.props.retailItem&&this.props.retailItem.item_url;if(!this.props.isSponsored&&q){var r=document.createElement('a');r.href=q;var s=r.hostname;if(this.props.retailItem&&this.props.retailItem.source)s=this.props.retailItem.source;return c('React').createElement('div',{className:"_3cnn"},c('React').createElement('a',{href:q},s));}else return null;};p.prototype.$MessengerPlatformGenericItemMercuryAttachment1=function(){var q=this.props.retailItem,r=this.props.callToActions,s=this.props.threadID;if(!r||!r.length)return null;var t=function(ba,ca){return c('React').createElement(c('Link.react'),{className:ca,href:ba.onClick?null:ba.action_link,key:ba.title+ba.id,onClick:ba.onClick||this.$MessengerPlatformGenericItemMercuryAttachment9,target:'_blank'},ba.translated_title||ba.title);}.bind(this),u=function ba(ca,da){var ea=i._("The feature has been disabled.");return w(ca,da,ea);},v=function ba(ca,da){var ea=i._("To use this feature, use the Messenger app.");return w(ca,da,ea);},w=function ba(ca,da,ea){return c('React').createElement('div',babelHelpers['extends']({className:c('joinClasses')(da,"_3cno"),'data-tooltip-alignh':'center','data-tooltip-position':'above',key:ca.title},c('Tooltip').propsFor(ea)),ca.translated_title||ca.title);};r=r.filter(function(ba){return ba.action_link;}).map(function(ba,ca){var da,ea,fa="_3cnp"+(ca===0&&!q?' '+"_3cnq":'');if(ba.is_disabled)return u(ba,fa);var ga=ba.action_link.startsWith('fb-messenger://payments/buy/mc?')||ba.action_link.startsWith('fb-messenger://business/commerce/')||((da=ba)!=null?(ea=da.metadata)!=null?ea.referral_app_id:ea:da);switch(ba.action_type){case c('MNCommerceCallToActionType').POSTBACK:var ha=function(ra){this.onCancel();if(ba.is_mutable_by_server){c('MNCommercePostbackCTADataManager').send(ba.id,null,null,this.props.messageID);}else c('MNCommercePostbackCTADataManager').sendAndConfirm(ba.id,ba.title,s,null,null,null,[],this.props.messageID);}.bind(this),ia=null;if(this.state.showDialog&&ba.should_show_user_confirmation)ia=c('React').createElement(c('FBConfirmDialog.react'),{title:ba.confirmation_title,shown:true,onConfirm:ha,onCancel:this.onCancel,confirmButtonText:ba.confirmation_continue_label,cancelButtonText:ba.confirmation_cancel_label,content:ba.confirmation_message});var ja=ba.should_show_user_confirmation?this.onConfirm:ha;return c('React').createElement('div',{key:ca},c('React').createElement(c('Link.react'),{className:fa,onClick:ja},ba.translated_title||ba.title),ia);case c('MNCommerceCallToActionType').OPEN_URL:if(ga){return o(ba,fa);}else return t(ba,fa);case c('MNCommerceCallToActionType').OPEN_CANCEL_RIDE_MUTATION:return v(ba,fa);case c('MNCommerceCallToActionType').OPEN_NATIVE:if(ga){return o(ba,fa);}else return v(ba,fa);case c('MNCommerceCallToActionType').PAYMENT:var ka="_idv",la="_idw";return c('React').createElement('div',{key:ca},this.$MessengerPlatformGenericItemMercuryAttachment10(ba),c('React').createElement(c('Link.react'),{className:fa,onClick:this.$MessengerPlatformGenericItemMercuryAttachment11},c('React').createElement('div',{className:ka},ba.payment_metadata.total_price),c('React').createElement('div',{className:la},ba.translated_title||ba.title)));case c('MNCommerceCallToActionType').SHARE:var ma=c('MessengerEnvironment').messengerui?l:c('MessagingForwardAttachmentDialog.react'),na=i._("Share in Separate messages"),oa=c('React').createElement(ma,{attachmentID:ba.id,messageID:this.props.messageID,onClose:this.$MessengerPlatformGenericItemMercuryAttachment12,shown:this.state.showShare,title:na,shareType:c('MessageShareType').PLATFORM_SHARE_CTA});return c('React').createElement('div',{key:ca},c('React').createElement(c('Link.react'),{className:fa,onClick:this.$MessengerPlatformGenericItemMercuryAttachment13},ba.title),oa);case c('MNCommerceCallToActionType').ACCOUNT_LINK:var pa=function(ra){c('MNCommerceCTAProcessor').process(ba.id,this.props.messageID);}.bind(this);return c('React').createElement(c('Link.react'),{className:fa,key:ca,onClick:pa},ba.translated_title||ba.title);case c('MNCommerceCallToActionType').FACEBOOK_REPORT_A_PROBLEM:var qa=function ra(sa){c('AsyncDialog').send(new (c('AsyncRequest'))('/ajax/bugs/report'));};return c('React').createElement(c('Link.react'),{className:fa,key:ca,onClick:qa},ba.translated_title||ba.title);}}.bind(this));var x=this.props.longestCTAs,y=[];if(x&&x>r.length){for(var z=0;z<x-r.length;z++)y.push(c('React').createElement('div',{className:"_3cnh _3cnp",key:'placeholder'+z},'CTA placeHolder'));var aa=y.concat(r);return c('React').createElement('div',{className:"_3cnr"},aa);}return c('React').createElement('div',{className:"_3cnr"},r);};p.prototype.$MessengerPlatformGenericItemMercuryAttachment10=function(q){if(this.state.showPaymentCheckoutDialog){var r=c('FBPaymentsSerializableCheckoutConfigurationParser').parse(this.$MessengerPlatformGenericItemMercuryAttachment15(q.payment_metadata.payment_module_config));r.contentConfiguration.checkoutClosedCallback=this.$MessengerPlatformGenericItemMercuryAttachment14;var s=r.contentConfiguration.confirmationConfiguration||{};s.confirmationClosedCallback=this.$MessengerPlatformGenericItemMercuryAttachment14;r.contentConfiguration.confirmationConfiguration=s;return c('React').createElement(c('FBPaymentsCheckoutFlowContainer.react'),{configuration:r});}return null;};p.prototype.$MessengerPlatformGenericItemMercuryAttachment15=function(q){var r='';try{r=JSON.parse(q);}catch(s){return q;}if(r.checkout_configuration&&r.checkout_configuration.payment_info&&r.checkout_configuration.payment_info.extra_data)r.checkout_configuration.payment_info.extra_data.message_id=this.props.messageID;return JSON.stringify(r);};p.propTypes={callToActions:c('MNCommercePromotionReactShapes').CallToActions,isSponsored:m.bool,isSubattachment:m.bool,label:m.number,logo:m.object,location:m.oneOf(c('MercuryShareAttachmentRenderLocations').getValues()),longestCTAs:m.number,longestMetaline:m.string,longestName:m.string,messageID:m.string,mnMessageType:m.string,pageID:m.string,retailItem:c('MNCommercePromotionReactShapes').RetailItem,url:m.string,width:m.number,threadID:m.string};f.exports=p;}),null);
__d('P2PAddressStore',['P2PActionConstants','EventEmitter','ImmutableObject','P2PAPI','P2PDispatcher','immutable'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('immutable').List,k=new j(),l=false,m=false,n={},o=void 0,p=null,q=false;function r(u,v){if(u)n[u]=new (c('ImmutableObject'))(v);}function s(u,v){p=v;if(u)n[u]={error:v};}h=babelHelpers.inherits(t,c('EventEmitter'));i=h&&h.prototype;function t(){i.constructor.call(this);l=false;m=false;k=new j();n={};o=c('P2PDispatcher').register(this.onEventDispatched.bind(this));}t.prototype.onEventDispatched=function(u){var v=u.data,w=u.type;switch(w){case c('P2PActionConstants').ADDRESS_SAVING:this.handleAddressSaving(v);this.emit('change');break;case c('P2PActionConstants').ADDRESSES_UPDATED:this.handleAddressesUpdated(v);this.emit('change');break;case c('P2PActionConstants').ADDRESS_ADDED:this.handleAddressAdded(v);this.emit('change');break;case c('P2PActionConstants').ADDRESS_ADDED_ERROR:this.handleAddressAddedError(v);this.emit('change');break;case c('P2PActionConstants').ADDRESS_ADDED_ERROR_CLEARED:this.handleAddressAddedErrorCleared();this.emit('change');break;}};t.prototype.getAsyncRequestState=function(){return n;};t.prototype.isAddressesFetchComplete=function(){return l;};t.prototype.handleAddressSaving=function(){q=true;p=null;};t.prototype.handleAddressesUpdated=function(u){l=true;u=u.map(function(v){return new (c('ImmutableObject'))(v);});k=new j(u);};t.prototype.handleAddressAdded=function(u){q=false;r(u.requestID,u);if(!this.getAddressByID(u.id))k=k.push(new (c('ImmutableObject'))(u));};t.prototype.handleAddressAddedError=function(u){q=false;s(u.requestID,u.errors);};t.prototype.handleAddressAddedErrorCleared=function(){p=null;};t.prototype.getAll=function(u){if(!m){m=true;c('P2PAPI').getAddresses();}if(u)return k.filter(function(v){return v.isVerified;});return k;};t.prototype.getAddressByID=function(u){return k.find(function(v){return v.id===u;});};t.prototype.getDispatchToken=function(){return o;};t.prototype.getSaveErrors=function(){return p;};t.prototype.isSaving=function(){return q;};f.exports=new t();}),null);
__d('P2PAddressShape',['React'],(function a(b,c,d,e,f,g){'use strict';var h=c('React').PropTypes,i=h.shape({label:h.string,care_of:h.string,city:h.string,id:h.string,state:h.string,street1:h.string,street2:h.string,zip:h.string});f.exports=i;}),null);
__d('P2PAddressDetails.react',['P2PAddressShape','P2PText.react','React'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('React').Component);i=h&&h.prototype;j.prototype.render=function(){var k=this.props.address,l=[k.city,k.state],m=void 0,n=void 0,o=void 0,p={display:'block',type:'primary'},q=k.zip?' '+k.zip:'',r=k.country?' '+k.country:'';l=l.join(', ')+q+r;if(k.streeet2)m=c('React').createElement(c('P2PText.react'),p,k.street2);if(k.label)n=c('React').createElement(c('P2PText.react'),p,k.label);if(k.care_of)o=c('React').createElement(c('P2PText.react'),p,k.care_of);return (c('React').createElement('div',null,n,o,c('React').createElement(c('P2PText.react'),p,k.street1),m,c('React').createElement(c('P2PText.react'),p,l)));};function j(){h.apply(this,arguments);}j.propTypes={address:c('P2PAddressShape').isRequired};f.exports=j;}),null);
__d('P2PAddressForm.react',['cx','fbt','FBPaymentsAddressLabelFormField_DEPRECATED.react','FBPaymentsForm_DEPRECATED.react','FBPaymentsFormField_DEPRECATED.react','FBPaymentsFormFieldUtils_DEPRECATED','React'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=k.constructor).call.apply(n,[this].concat(q)),this.state={formData:{},isValid:false},this.handleValidation=function(s,t){this.setState({formData:t,isValid:s});this.props.onValidation(s,t);}.bind(this),o;}m.prototype.render=function(){var n=!!(this.props.prefilledFormData&&this.props.prefilledFormData.care_of);return (c('React').createElement(c('FBPaymentsForm_DEPRECATED.react'),{errorTitle:i._("Problem Saving Address"),prefilledFormData:this.props.prefilledFormData,onValidation:this.handleValidation,saveErrors:this.props.saveErrors},c('React').createElement(c('FBPaymentsAddressLabelFormField_DEPRECATED.react'),{className:"_3-96",name:'label',ignoreStyling:true,required:true}),c('React').createElement(c('FBPaymentsFormField_DEPRECATED.react'),{name:'care_of',initiallyFocused:!n,placeholder:i._("Name"),required:true,width:100}),c('React').createElement(c('FBPaymentsFormField_DEPRECATED.react'),{name:'street1',initiallyFocused:n,placeholder:i._("Street"),required:true,width:100}),c('React').createElement(c('FBPaymentsFormField_DEPRECATED.react'),{name:'street2',placeholder:i._("Street 2"),width:100}),c('React').createElement(c('FBPaymentsFormField_DEPRECATED.react'),{name:'city',placeholder:i._("City"),required:true,width:50}),c('React').createElement(c('FBPaymentsFormField_DEPRECATED.react'),{formatValue:function o(p){p=c('FBPaymentsFormFieldUtils_DEPRECATED').stripNonAlpha(p);return p.toUpperCase();},limit:2,name:'state',placeholder:i._("State"),required:true,width:25}),c('React').createElement(c('FBPaymentsFormField_DEPRECATED.react'),{formatValue:c('FBPaymentsFormFieldUtils_DEPRECATED').stripNonDigits,limit:5,name:'zip',placeholder:i._("ZIP"),required:true,width:25})));};m.propTypes={onValidation:l.func.isRequired,prefilledFormData:l.object,saveErrors:l.object};m.defaultProps={editMode:false,prefilledFormData:{},saveErrors:null};f.exports=m;}),null);
__d('P2PCheckoutConfigSection.react',['cx','fbt','LeftRight.react','Link.react','React','emptyFunction'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=k.constructor).call.apply(n,[this].concat(q)),this.renderChangeLink=function(){if(this.props.showEditOptions||!this.props.hasOptions)return null;return (c('React').createElement(c('Link.react'),{className:"_nb2",href:'#',onClick:this.props.onChangeClicked},i._("Change")));}.bind(this),this.renderContent=function(){var s=this.props,t=void 0,u=void 0;if(s.showEditOptions){t=this.renderSelector();}else if(s.hasOptions)t=this.renderCurrentItem();if(s.showForm)u=this.renderForm();return (c('React').createElement('div',null,t,u));}.bind(this),this.renderForm=function(){var s=void 0;if(!this.props.renderFormComponent)return null;if(this.props.renderFormFooterMessage)s=c('React').createElement('div',{className:"_nb4"},this.props.renderFormFooterMessage());return (c('React').createElement('div',{className:"_nb3",key:'form'},this.props.renderFormComponent(),s));}.bind(this),this.renderSelector=function(){return (c('React').createElement('div',{className:"_nb5",key:'selector'},this.props.renderSelectorComponent()));}.bind(this),this.renderCurrentItem=function(){if(!this.props.renderSelectedRow)return null;return (c('React').createElement('div',{className:"_nb6",key:'currentItem'},this.props.renderSelectedRow()));}.bind(this),o;}m.prototype.render=function(){return (c('React').createElement('div',{className:"_nb7"},c('React').createElement(c('LeftRight.react'),{className:"_nb8"},c('React').createElement('div',{className:"_nb9"},this.props.title),this.renderChangeLink()),c('React').createElement('div',{className:"_nba"},this.renderContent())));};m.propTypes={onChangeClicked:l.func,hasOptions:l.bool,showEditOptions:l.bool,showForm:l.bool,renderFormComponent:l.func,renderFormFooterMessage:l.func,renderSelectedRow:l.func,renderSelectorComponent:l.func.isRequired,title:l.string.isRequired};m.defaultProps={onChangeClicked:c('emptyFunction'),renderFormFooterMessage:c('emptyFunction'),renderFormComponent:c('emptyFunction'),renderSelectedRow:c('emptyFunction')};f.exports=m;}),null);
__d('P2PChooseAddressForm.react',['cx','fbt','immutable','P2PAddressShape','P2PAddressDetails.react','P2PText.react','React','XUIRadioList.react'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('immutable').List,m=c('XUIRadioList.react').Item,n=c('React').PropTypes,o='add_address';j=babelHelpers.inherits(p,c('React').Component);k=j&&j.prototype;function p(){var q,r;for(var s=arguments.length,t=Array(s),u=0;u<s;u++)t[u]=arguments[u];return r=(q=k.constructor).call.apply(q,[this].concat(t)),this.state={selectedValue:this.props.selectedAddress.id},this.getselectedAddress=function(){return this.props.addresses.filter(function(v){return v.id===this.state.selectedValue;}.bind(this)).first();}.bind(this),this.handleChange=function(v){var w=void 0;if(v===o){this.props.onNewAddressOptionSelected();this.setState({selectedValue:v});}else{w=this.props.addresses.filter(function(x){return x.id===v;}).first();this.setState({selectedValue:w.id});this.props.onChange(w);}}.bind(this),this.renderAddressItem=function(v){return (c('React').createElement(m,{className:"_54sy",key:v.id,value:v.id},c('React').createElement(c('P2PAddressDetails.react'),{address:v})));},this.renderAddNewAddressItem=function(){return (c('React').createElement(m,{className:"_54sy",key:o,value:o},c('React').createElement(c('P2PText.react'),{type:'primary'},i._("Add New Address"))));},this.getRadioListItems=function(){var v=this.props.addresses,w=v.map(this.renderAddressItem).concat(this.renderAddNewAddressItem());return w;}.bind(this),r;}p.prototype.render=function(){return (c('React').createElement(c('XUIRadioList.react'),{className:"_1ck2",onValueChange:this.handleChange,selectedValue:this.state.selectedValue},this.getRadioListItems()));};p.propTypes={addresses:n.instanceOf(l),onChange:n.func.isRequired,onNewAddressOptionSelected:n.func.isRequired,selectedAddress:c('P2PAddressShape')};f.exports=p;}),null);
__d('P2PAddressConfigSection.react',['fbt','MessengerEnvironment','FBPaymentsAddressForm_DEPRECATED.react','P2PAddressDetails.react','P2PAddressForm.react','P2PAddressShape','P2PCheckoutConfigSection.react','P2PChooseAddressForm.react','P2PText.react','React','immutable'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes,l='P2PAddressConfigSection_learnMoreSentenceID';i=babelHelpers.inherits(m,c('React').Component);j=i&&i.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=j.constructor).call.apply(n,[this].concat(q)),this.renderFormComponent=function(){var s=this.props;if(s.acceptInternational)return (c('React').createElement(c('FBPaymentsAddressForm_DEPRECATED.react'),{onValidation:s.onValidation,prefilledFormData:{care_of:this.props.buyerName},saveErrors:s.saveErrors}));return (c('React').createElement(c('P2PAddressForm.react'),{onValidation:s.onValidation,prefilledFormData:{care_of:this.props.buyerName},saveErrors:s.saveErrors}));}.bind(this),this.renderSelectedRow=function(){var s=this.props.selectedAddress;if(!s)return null;return (c('React').createElement(c('P2PAddressDetails.react'),{address:s}));}.bind(this),this.renderSelectorComponent=function(){var s=this.props;return (c('React').createElement(c('P2PChooseAddressForm.react'),{addresses:s.addresses,onChange:this.props.onAddressSelected,onNewAddressOptionSelected:this.props.onNewAddressSelected,selectedAddress:s.selectedAddress}));}.bind(this),this.renderFormFooterMessage=function(){return (c('React').createElement(c('P2PText.react'),{id:l,type:'secondary'},h._("Your shipping address will be stored securely for future purchases on Facebook.")));},this.getTitle=function(){if(c('MessengerEnvironment').messengerui)return h._("Shipping Address");return h._("SHIPPING ADDRESS");},o;}m.prototype.render=function(){var n=this.props;return (c('React').createElement(c('P2PCheckoutConfigSection.react'),{hasOptions:n.addresses.count()!==0,showEditOptions:n.showEditOptions,showForm:n.showForm,onChangeClicked:n.onChangeClicked,renderFormComponent:this.renderFormComponent,renderFormFooterMessage:this.renderFormFooterMessage,renderSelectedRow:this.renderSelectedRow,renderSelectorComponent:this.renderSelectorComponent,title:this.getTitle()}));};m.propTypes={acceptInternational:k.bool,addresses:k.instanceOf(c('immutable').List).isRequired,buyerName:k.string,showEditOptions:k.bool,showForm:k.bool,onAddressSelected:k.func.isRequired,onChangeClicked:k.func.isRequired,onNewAddressSelected:k.func.isRequired,onValidation:k.func.isRequired,selectedAddress:c('P2PAddressShape'),saveErrors:k.object};f.exports=m;}),null);
__d('P2PCreditCardConfigSection.react',['fbt','MessengerEnvironment','Link.react','MessengerPaymentProductType','P2PChooseCreditCardForm.react','P2PCreditCard','P2PCreditCardDetails.react','P2PCreditCardForm.react','P2PCheckoutConfigSection.react','P2PLinkConstants','P2PText.react','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes,l='P2PCreditCardConfigSection_learnMoreSentenceID';i=babelHelpers.inherits(m,c('React').Component);j=i&&i.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=j.constructor).call.apply(n,[this].concat(q)),this.renderFormComponent=function(){var s=this.props;return (c('React').createElement(c('P2PCreditCardForm.react'),{onValidation:s.onValidation,saveErrors:s.saveErrors,productType:c('MessengerPaymentProductType').MESSENGER_COMMERCE}));}.bind(this),this.renderSelectedRow=function(){var s=this.props.selectedCreditCard;if(!s)return null;return (c('React').createElement(c('P2PCreditCardDetails.react'),{creditCard:s}));}.bind(this),this.renderSelectorComponent=function(){var s=this.props;return (c('React').createElement(c('P2PChooseCreditCardForm.react'),{addCardOptionText:h._("Add New Card"),creditCards:s.creditCards,onAddDebitCardOptionSelected:this.props.onNewCreditCardSelected,onChange:this.props.onCreditCardSelected,selectedCard:s.selectedCreditCard,showAddDebitCardOption:true}));}.bind(this),this.renderFormFooterMessage=function(){return (c('React').createElement(c('P2PText.react'),{id:l,type:'secondary'},h._("Your payment info is stored securely."),c('React').createElement('div',null,c('React').createElement(c('Link.react'),{'aria-describedby':l,href:c('P2PLinkConstants').addDebitCardHelpURI,target:'_blank'},h._("Learn More")))));},this.getTitle=function(){if(c('MessengerEnvironment').messengerui)return h._("Payment Information");return h._("PAYMENT INFORMATION");},o;}m.prototype.render=function(){var n=this.props;return (c('React').createElement(c('P2PCheckoutConfigSection.react'),{hasOptions:n.creditCards.length!==0,showEditOptions:n.showEditOptions,showForm:n.showForm,onChangeClicked:n.onChangeClicked,renderFormComponent:this.renderFormComponent,renderFormFooterMessage:this.renderFormFooterMessage,renderSelectedRow:this.renderSelectedRow,renderSelectorComponent:this.renderSelectorComponent,title:this.getTitle()}));};m.propTypes={creditCards:k.arrayOf(k.instanceOf(c('P2PCreditCard'))).isRequired,showEditOptions:k.bool,showForm:k.bool,onCreditCardSelected:k.func.isRequired,onChangeClicked:k.func.isRequired,onNewCreditCardSelected:k.func.isRequired,onValidation:k.func.isRequired,selectedCreditCard:k.instanceOf(c('P2PCreditCard')),saveErrors:k.object};f.exports=m;}),null);
__d('P2PPaymentMethodConfigSection.react',['fbt','MessengerEnvironment','P2PCheckoutConfigSection.react','P2PCreditCardDetails.react','P2PText.react','FBPaymentsChoosePaymentMethodForm_DEPRECATED.react','FBPaymentsPaymentMethodShape_DEPRECATED','FBPaymentsMethodType','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.renderFormComponent=function(){return (c('React').createElement(c('FBPaymentsChoosePaymentMethodForm_DEPRECATED.react'),{onPaymentMethodConfigured:this.props.onPaymentMethodConfigured,onPaymentMethodSelected:this.props.onPaymentMethodSelected,paymentMethods:this.props.paymentMethods}));}.bind(this),this.renderSelectedRow=function(){var r=this.props.confirmedPaymentMethod;if(!r)return null;switch(r.type){case c('FBPaymentsMethodType').GENERIC_CARD:return c('React').createElement(c('P2PCreditCardDetails.react'),{creditCard:r.creditCard});case c('FBPaymentsMethodType').MANUAL_TRANSFER:return (c('React').createElement(c('P2PText.react'),{type:'primary'},h._("Transfer at ATM or Bank")));case c('FBPaymentsMethodType').NET_BANKING:var s=r.bank.name;return (c('React').createElement(c('P2PText.react'),{type:'primary'},h._("{bank_name} (Online Banking)",[h.param('bank_name',s)])));case c('FBPaymentsMethodType').PAY_OVER_COUNTER:return (c('React').createElement(c('P2PText.react'),{type:'primary'},h._("Payment at Store Counter")));default:return (c('React').createElement('div',null,r?r.toString():''));}}.bind(this),this.renderSelectorComponent=function(){return this.renderFormComponent();}.bind(this),n;}l.prototype.getTitle=function(){if(c('MessengerEnvironment').messengerui)return h._("Payment Method");return h._("PAYMENT METHOD");};l.prototype.render=function(){var m=this.props;return (c('React').createElement(c('P2PCheckoutConfigSection.react'),{hasOptions:!!m.confirmedPaymentMethod,showEditOptions:m.showEditOptions,showForm:m.showForm,onChangeClicked:m.onChangeClicked,renderFormComponent:this.renderFormComponent,renderSelectedRow:this.renderSelectedRow,renderSelectorComponent:this.renderSelectorComponent,title:this.getTitle()}));};l.propTypes={confirmedPaymentMethod:k.shape(c('FBPaymentsPaymentMethodShape_DEPRECATED')),onChangeClicked:k.func.isRequired,onPaymentMethodConfigured:k.func.isRequired,onPaymentMethodSelected:k.func.isRequired,paymentMethods:k.arrayOf(c('FBPaymentsPaymentMethodShape_DEPRECATED')).isRequired,showEditOptions:k.bool,showForm:k.bool};f.exports=l;}),null);
__d('P2PPlatformContextBannerShape',['React'],(function a(b,c,d,e,f,g){'use strict';var h=c('React').PropTypes,i=h.shape({shouldShowToBuyer:h.bool,shouldShowToSeller:h.bool,shouldShowPayNux:h.bool});f.exports=i;}),null);
__d('P2PPlatformContextShippingOptionShape',['React'],(function a(b,c,d,e,f,g){'use strict';var h=c('React').PropTypes,i=h.shape({formattedShippingPrice:h.string,formattedSubtotal:h.string,formattedTax:h.string,formattedTotal:h.string,id:h.string,rawTotal:h.string,title:h.string});f.exports=i;}),null);
__d('P2PPlatformContextShape',['P2PPlatformContextBannerShape','P2PPlatformContextProductItemShape','P2PPlatformContextShippingOptionShape','React'],(function a(b,c,d,e,f,g){'use strict';var h=c('React').PropTypes,i=h.shape({id:h.string,banner:c('P2PPlatformContextBannerShape'),buyerID:h.string,product:c('P2PPlatformContextProductItemShape'),sellerID:h.string,shippingOptions:h.arrayOf(c('P2PPlatformContextShippingOptionShape'))});f.exports=i;}),null);
__d('P2PChooseShippingOptionForm.react',['cx','P2PPlatformContextShippingOptionShape','React','P2PText.react','XUIRadioList.react'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('XUIRadioList.react').Item,l=c('React').PropTypes;i=babelHelpers.inherits(m,c('React').Component);j=i&&i.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=j.constructor).call.apply(n,[this].concat(q)),this.state={selectedValue:this.props.selectedShippingOption.id},this.handleChange=function(s){var t=this.props.shippingOptions.filter(function(u){return u.id===s;})[0];this.setState({selectedValue:t.id});this.props.onChange(t);}.bind(this),this.renderShippingOptionItem=function(s){return (c('React').createElement(k,{className:"_2i8o",key:s.id,value:s.id},c('React').createElement(c('P2PText.react'),{type:'primary'},s.title)));},this.getRadioListItems=function(){return this.props.shippingOptions.map(this.renderShippingOptionItem);}.bind(this),o;}m.prototype.render=function(){return (c('React').createElement(c('XUIRadioList.react'),{className:"_2i8p",onValueChange:this.handleChange,selectedValue:this.state.selectedValue},this.getRadioListItems()));};m.propTypes={shippingOptions:l.arrayOf(c('P2PPlatformContextShippingOptionShape')).isRequired,onChange:l.func.isRequired,selectedShippingOption:c('P2PPlatformContextShippingOptionShape')};f.exports=m;}),null);
__d('P2PShippingOptionsConfigSection.react',['fbt','MessengerEnvironment','P2PChooseShippingOptionForm.react','P2PPlatformContextShippingOptionShape','P2PCheckoutConfigSection.react','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.renderSelectorComponent=function(){var r=this.props;return (c('React').createElement(c('P2PChooseShippingOptionForm.react'),{shippingOptions:r.shippingOptions,onChange:this.props.onShippingOptionSelected,selectedShippingOption:r.selectedShippingOption}));}.bind(this),this.getTitle=function(){if(c('MessengerEnvironment').messengerui)return h._("Shipping Options");return h._("SHIPPING OPTIONS");},n;}l.prototype.render=function(){return (c('React').createElement(c('P2PCheckoutConfigSection.react'),{hasOptions:true,showEditOptions:true,showForm:false,renderSelectorComponent:this.renderSelectorComponent,title:this.getTitle()}));};l.propTypes={onShippingOptionSelected:k.func.isRequired,selectedShippingOption:c('P2PPlatformContextShippingOptionShape'),shippingOptions:k.arrayOf(c('P2PPlatformContextShippingOptionShape'))};f.exports=l;}),null);
__d('P2PCheckoutDialog.react',['cx','csx','fbt','CommerceContactMerchantManualPaymentSection.react','MessengerEnvironment','CSS','DOMQuery','FBPaymentsLegalDisclaimer_DEPRECATED.react','FBPaymentsMethodType','P2PActions','P2PAddressConfigSection.react','P2PAddressShape','P2PButton.react','P2PCheckoutPriceDetails.react','P2PCreditCardConfigSection.react','P2PCreditCard','P2PDialog.react','P2PDialogBody.react','P2PDialogFooter.react','P2PDialogTitle.react','P2PLoadingMask.react','P2PPaymentMethodConfigSection.react','P2PPlatformContextShape','P2PPlatformContextShippingOptionShape','P2PPlatformProductItemDetails.react','P2PShippingOptionsConfigSection.react','React','immutable'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k=c('React').PropTypes,l=c('React').createClass({displayName:'P2PCheckoutDialog',propTypes:{acceptInternationalAddresses:k.bool,addresses:k.instanceOf(c('immutable').List).isRequired,addressFormData:k.object,addressFormValid:k.bool,addressSaveErrors:k.object,asyncPaymentDetails:k.object,buyer:k.object,configuredPaymentMethod:k.object,confirmedPaymentMethod:k.object,creditCardFormData:k.object,creditCardFormValid:k.bool,creditCardSaveErrors:k.object,creditCards:k.arrayOf(k.instanceOf(c('P2PCreditCard'))).isRequired,customCheckoutDetails:k.node,editingPaymentMethod:k.bool,paymentMethods:k.array,paymentProductType:k.string,initialDataLoaded:k.bool,onClose:k.func.isRequired,onCompleteManualPayment:k.func.isRequired,onConfirmSelectedPaymentMethod:k.func.isRequired,onPlaceOrder:k.func.isRequired,onSaveAddress:k.func.isRequired,onSaveCreditCard:k.func.isRequired,onSetAddress:k.func.isRequired,orderID:k.string,platformContext:c('P2PPlatformContextShape'),receiptAttached:k.bool,saving:k.bool,selectedAddress:c('P2PAddressShape'),selectedCreditCard:k.instanceOf(c('P2PCreditCard')),selectedPaymentMethod:k.object,selectedShippingOption:c('P2PPlatformContextShippingOptionShape'),showAddressEditOptions:k.bool,showAsyncPaymentDetails:k.bool,showCreditCardEditOptions:k.bool,showPaymentMethodEditOptions:k.bool,showAddressForm:k.bool,showCreditCardForm:k.bool,showPaymentMethodForm:k.bool,showTaxField:k.bool,shippingOptions:k.arrayOf(c('P2PPlatformContextShippingOptionShape')),usePaymentMethods:k.bool},_toggledCreditCard:null,_toggledAddress:null,handleToggle:function m(n){if(!n)this.props.onClose();this.cleanup();},handleCloseDialog:function m(){this.props.onClose();this.cleanup();},componentDidMount:function m(){setTimeout(function(){if(this.isMounted()){var n=c('DOMQuery').find(document,"div._ugr");if(n)c('CSS').addClass(n,"_225w");}}.bind(this),200);},getProductFromPlatformContext:function m(){var n=this.props.platformContext;return n?n.product:null;},renderPriceDetails:function m(){var n=this.getProductFromPlatformContext(),o=this.props.selectedShippingOption,p=void 0,q=void 0,r=void 0,s=void 0;if(n){p=n.formattedAmount;s=p;}if(o){p=o.formattedSubtotal;r=o.formattedShippingPrice;q=o.formattedTax;s=o.formattedTotal;}return (c('React').createElement(c('P2PCheckoutPriceDetails.react'),{shipping:r,subtotal:p,tax:q,total:s,showShippingField:!this.props.showAsyncPaymentDetails,showSubtotalField:!this.props.showAsyncPaymentDetails,showTaxField:this.props.showTaxField&&!this.props.showAsyncPaymentDetails}));},renderItemSection:function m(){var n=this.getProductFromPlatformContext();if(!n)return null;var o=void 0;if(this.props.customCheckoutDetails)o=c('React').createElement('div',{className:"_145w"},this.props.customCheckoutDetails);return (c('React').createElement('div',null,c('React').createElement('div',{className:"_4oyy"},c('React').createElement(c('P2PPlatformProductItemDetails.react'),{configSelections:this.props.configSelections,item:n,size:'medium'})),o,c('React').createElement('div',{className:"_4oz5"},this.renderPriceDetails())));},renderRightPanel:function m(){var n=!this.props.showAsyncPaymentDetails;return (c('React').createElement('div',{className:(n?"_4oz9":'')+(!n?' '+"_334":'')},n?this.renderConfigSection():this.renderAsyncPaymentDetailsSection(),this.renderDialogFooter()));},renderConfigSection:function m(){if(!this.props.initialDataLoaded)return null;var n=void 0,o=c('React').createElement('div',{className:"_4gf2",key:'addressConigSection'},c('React').createElement(c('P2PAddressConfigSection.react'),{acceptInternational:this.props.acceptInternationalAddresses,addresses:this.props.addresses,buyerName:this.props.buyer&&this.props.buyer.name,onAddressSelected:this.handleAddressSelected,onChangeClicked:this.handleAddressChangeClicked,onNewAddressSelected:this.handleNewAddressSelected,onValidation:this.handleAddressFormValidation,saveErrors:this.props.addressSaveErrors,selectedAddress:this.props.selectedAddress,showEditOptions:this.props.showAddressEditOptions,showForm:this.props.showAddressForm})),p=this.props.usePaymentMethods?c('React').createElement('div',{className:"_4gf2",key:'paymentMethodConfigSection'},c('React').createElement(c('P2PPaymentMethodConfigSection.react'),{confirmedPaymentMethod:this.props.confirmedPaymentMethod,onPaymentMethodConfigured:this.handlePaymentMethodConfigured,onPaymentMethodSelected:this.handlePaymentMethodSelected,onChangeClicked:this.handlePaymentMethodChangeClicked,paymentMethods:this.props.paymentMethods,showEditOptions:this.props.showPaymentMethodEditOptions,showForm:this.props.showPaymentMethodForm})):c('React').createElement('div',{className:"_4gf2",key:'creditCardConfigSection'},c('React').createElement(c('P2PCreditCardConfigSection.react'),{creditCards:this.props.creditCards,onCreditCardSelected:this.handleCreditCardSelected,onChangeClicked:this.handleCreditCardChangeClicked,onNewCreditCardSelected:this.handleNewCreditCardSelected,onValidation:this.handleCreditCardFormValidation,saveErrors:this.props.creditCardSaveErrors,selectedCreditCard:this.props.selectedCreditCard,showEditOptions:this.props.showCreditCardEditOptions,showForm:this.props.showCreditCardForm}));if(this.props.shippingOptions&&this.props.shippingOptions.length&&this.props.selectedShippingOption)n=c('React').createElement('div',{className:"_4gf2",key:'shippingConfigSection'},c('React').createElement(c('P2PShippingOptionsConfigSection.react'),{onShippingOptionSelected:this.handleShippingOptionSelected,shippingOptions:this.props.shippingOptions,selectedShippingOption:this.props.selectedShippingOption}));if(this.props.showAddressEditOptions||this.props.showAddressForm){p=null;n=null;}if(this.props.showPaymentMethodEditOptions||this.props.showCreditCardEditOptions){o=null;n=null;}return (c('React').createElement('div',null,o,n,p));},renderAsyncPaymentDetailsSection:function m(){var n=this.props.asyncPaymentDetails,o=this.props.orderID;if(!n||!o)return null;return (c('React').createElement(c('CommerceContactMerchantManualPaymentSection.react'),{paymentOptionDetails:n,invoiceID:o,onReceiptUpdated:function p(q,r){c('P2PActions').checkoutManualPaymentReceiptUpdated({receiptFbid:q});}}));},renderDialogFooter:function m(){if(!this.props.initialDataLoaded)return null;var n=void 0,o=void 0,p=j._("Cancel"),q=j._("Continue"),r=void 0;if(c('MessengerEnvironment').messengerui)r=c('React').createElement(c('P2PButton.react'),{label:p,onClick:this.props.onClose});var s=this.props.editingPaymentMethod;if(s&&this.props.selectedPaymentMethod)switch(this.props.selectedPaymentMethod.type){case c('FBPaymentsMethodType').NEW_CREDIT_CARD:q=j._("Add Card");break;case c('FBPaymentsMethodType').NET_BANKING:q=j._("Confirm Bank");break;}var t=this.props.showCreditCardEditOptions||s||this.props.showAddressEditOptions||this.props.showAddressForm;if(t){n=c('React').createElement('div',null,c('React').createElement(c('P2PButton.react'),{label:p,onClick:this.handleEditCancelClicked}),c('React').createElement(c('P2PButton.react'),{disabled:this.isSaveDisabled(),label:q,onClick:this.handleContinueClicked,use:'confirm'}));}else if(this.props.showAsyncPaymentDetails){n=c('React').createElement('div',null,c('React').createElement(c('P2PButton.react'),{disabled:!this.props.receiptAttached,label:j._("Complete Purchase"),onClick:this.handleCompleteManualPaymentClicked,use:'confirm'}));}else{o=this.getLegalDisclaimerSection();n=c('React').createElement('div',{className:"_35cu"},r,c('React').createElement(c('P2PButton.react'),{className:this.props.usePaymentMethods?"_35cv":'',disabled:this.isSaveDisabled(),label:this.getCheckoutButtonLabel(),onClick:this.handlePlaceOrderClicked,use:'confirm'}));}return (c('React').createElement('div',{className:"_35cw"},c('React').createElement(c('P2PDialogFooter.react'),{className:"_ugq"+(t?' '+"_35cx":'')},o,n)));},isSaveDisabled:function m(){var n=this.props.configuredPaymentMethod&&this.props.configuredPaymentMethod.isValid&&this.isConfiguredPaymentMethodSelected();return (!!this.props.showCreditCardForm&&!this.props.creditCardFormValid||!!this.props.editingPaymentMethod&&!n||!!this.props.showAddressForm&&!this.props.addressFormValid);},isConfiguredPaymentMethodSelected:function m(){return (!!this.props.configuredPaymentMethod&&!!this.props.selectedPaymentMethod&&this.props.configuredPaymentMethod.type===this.props.selectedPaymentMethod.type);},getCheckoutButtonLabel:function m(){if(!this.props.usePaymentMethods)return j._("Place Order");var n=this.props.confirmedPaymentMethod,o=j._("Complete Purchase");if(!n)return o;switch(n.type){case c('FBPaymentsMethodType').NET_BANKING:return j._("Log In and Pay");case c('FBPaymentsMethodType').GENERIC_CARD:return j._("Pay");case c('FBPaymentsMethodType').PAY_OVER_COUNTER:return j._("Continue to Pay");default:return o;}},getLegalDisclaimerSection:function m(){if(!this.props.usePaymentMethods||!this.props.confirmedPaymentMethod)return null;return (c('React').createElement('div',{className:"_35d1"},c('React').createElement(c('FBPaymentsLegalDisclaimer_DEPRECATED.react'),{paymentMethodType:this.props.confirmedPaymentMethod.type,paymentType:this.props.paymentProductType})));},handleShippingOptionSelected:function m(n){c('P2PActions').checkoutShippingOptionSelected(n.id);},handleCreditCardFormValidation:function m(n,o){c('P2PActions').checkoutCreditCardFormValidated(n,o);},handleCreditCardChangeClicked:function m(){c('P2PActions').checkoutCreditCardEditOptionsToggled(true);},handlePaymentMethodChangeClicked:function m(){c('P2PActions').checkoutPaymentMethodEditOptionsToggled(true);},handleCreditCardSelected:function m(n){this._toggledCreditCard=n;c('P2PActions').checkoutCreditCardFormToggled(false);},handleNewCreditCardSelected:function m(){c('P2PActions').addCreditCardErrorCleared();c('P2PActions').checkoutCreditCardFormToggled(true);},saveCreditCard:function m(){this.props.onSaveCreditCard();},handlePaymentMethodSelected:function m(n){c('P2PActions').checkoutPaymentMethodSelected(n);},handlePaymentMethodConfigured:function m(n){c('P2PActions').checkoutPaymentMethodConfigured(n);},handleAddressFormValidation:function m(n,o){c('P2PActions').checkoutAddressFormValidated(n,o);},handleAddressChangeClicked:function m(){c('P2PActions').checkoutAddressEditOptionsToggled(true);},handleAddressSelected:function m(n){this._toggledAddress=n;c('P2PActions').checkoutAddressFormToggled(false);},handleNewAddressSelected:function m(){c('P2PActions').addAddressErrorCleared();c('P2PActions').checkoutAddressFormToggled(true);},saveAddress:function m(){this.props.onSaveAddress();},handleEditCancelClicked:function m(){if(!this.props.addresses.count()||this.props.showPaymentMethodForm)this.props.onClose();this.cleanup();},cleanup:function m(){c('P2PActions').addCreditCardErrorCleared();c('P2PActions').addAddressErrorCleared();c('P2PActions').checkoutEditCompleted();},handleContinueClicked:function m(){var n=this._toggledAddress;if(this.props.showCreditCardForm){this.saveCreditCard();}else if(this.props.showAddressForm){this.saveAddress();}else if(this.props.showCreditCardEditOptions){if(this._toggledCreditCard){c('P2PActions').checkoutCreditCardSelected(this._toggledCreditCard.getCredentialId());this._toggledCreditCard=null;}else this.handleEditCancelClicked();}else if(this.props.editingPaymentMethod){if(this.isConfiguredPaymentMethodSelected())this.props.onConfirmSelectedPaymentMethod();}else if(this.props.showAddressEditOptions)if(n){c('P2PActions').checkoutAddressSelected(n.id);if(this.props.platformContext)this.props.onSetAddress(n.id);this._toggledAddress=null;}else this.handleEditCancelClicked();},handleCompleteManualPaymentClicked:function m(){this.props.onCompleteManualPayment();},handlePlaceOrderClicked:function m(){this.props.onPlaceOrder();},render:function m(){var n=void 0,o=c('MessengerEnvironment').messengerui,p=o?720:680;if(!o)n=c('React').createElement(c('P2PDialogTitle.react'),null,j._("Checkout"));return (c('React').createElement(c('P2PDialog.react'),{className:"_ugr",hideOnEscape:true,layerHideOnBlur:o,onToggle:this.handleToggle,repositionOnUpdate:true,shown:true,width:p},n,c('React').createElement(c('P2PDialogBody.react'),{className:"_4oz6"+(this.props.initialDataLoaded?' '+"_3t72":'')},c('React').createElement('div',{className:"_4oz7"},c('React').createElement('div',{className:"_4oz8"},this.renderItemSection()),this.renderRightPanel()),c('React').createElement(c('P2PLoadingMask.react'),{visible:!this.props.initialDataLoaded||this.props.saving}))));}});f.exports=l;}),null);
__d('P2PPaymentMethodStore',['P2PActionConstants','CreditCardFormParam','EventEmitter','FBPaymentsMethodType','Map','P2PAPI','P2PCreditCard','P2PDispatcher'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('EventEmitter'));i=h&&h.prototype;function j(){i.constructor.call(this);this.$P2PPaymentMethodStore1=c('P2PDispatcher').register(this.onEventDispatched.bind(this));this.$P2PPaymentMethodStore2=new (c('Map'))();this.$P2PPaymentMethodStore3=new (c('Map'))();this.$P2PPaymentMethodStore4=new (c('Map'))();}j.prototype.onEventDispatched=function(k){var l=k.data,m=k.type;switch(m){case c('P2PActionConstants').PAYMENT_METHODS_UPDATED:this.handlePaymentMethodsUpdated(l);this.emit('change');break;case c('P2PActionConstants').PAYMENT_METHODS_UPDATED_ERROR:this.handlePaymentMethodsUpdatedError(l);this.emit('change');}};j.prototype.handlePaymentMethodsUpdated=function(k){var l=k.id,m=k.paymentMethodsData,n=m.available_payment_methods_details,o=m.existing_payment_methods;if(o){o=o.map(function(p){var q=p.data;q[c('CreditCardFormParam').CARD_NUMBER]=p.data.ccNumber;q[c('CreditCardFormParam').CREDENTIAL_ID]=p.id;return {creditCard:new (c('P2PCreditCard'))(q),type:c('FBPaymentsMethodType').GENERIC_CARD};});n=o.concat(n);}this.$P2PPaymentMethodStore3['delete'](l);this.$P2PPaymentMethodStore2.set(l,n);this.$P2PPaymentMethodStore4.set(l,o[0]);};j.prototype.handlePaymentMethodsUpdatedError=function(k){this.$P2PPaymentMethodStore3.set(k.id,k.error);};j.prototype.getPaymentMethodsForInvoice=function(k,l){if(!this.$P2PPaymentMethodStore2.has(l)){c('P2PAPI').getPaymentMethods({id:l,payment_type:k,extra_data:{invoice_id:l}});this.$P2PPaymentMethodStore2.set(l,null);}return this.$P2PPaymentMethodStore2.get(l);};j.prototype.getPreviousPaymentMethod=function(k){if(k&&this.$P2PPaymentMethodStore4.has(k))return this.$P2PPaymentMethodStore4.get(k);return null;};j.prototype.getDispatchToken=function(){return this.$P2PPaymentMethodStore1;};j.prototype.failedPaymentMethodsFetch=function(k){return this.$P2PPaymentMethodStore3.has(k);};j.prototype.getPaymentMethodsFetchError=function(k){return this.$P2PPaymentMethodStore3.get(k);};f.exports=new j();}),null);
__d('P2PCheckoutStore',['P2PActionConstants','CreditCardFormParam','EventEmitter','ImmutableObject','MessengerPaymentProductType','P2PAddressStore','P2PAPI','P2PCreditCard','P2PCreditCardStore','P2PDispatcher','P2PPaymentMethodStore','P2PPlatformContextStore'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=null,k=null,l=false,m=false,n=false,o=false,p=false,q=false,r=false,s=null,t=false,u=null,v=false,w=null,x=null,y=false,z=null,aa=null,ba=null,ca=null,da=null,ea=false,fa=null;h=babelHelpers.inherits(ga,c('EventEmitter'));i=h&&h.prototype;function ga(){i.constructor.call(this);this.$P2PCheckoutStore1=c('P2PDispatcher').register(this.onEventDispatched.bind(this));}ga.prototype.getDispatchToken=function(){return this.$P2PCheckoutStore1;};ga.prototype.onEventDispatched=function(ha){var ia=ha.data,ja=ha.type;c('P2PDispatcher').waitFor([c('P2PAddressStore').getDispatchToken(),c('P2PCreditCardStore').getDispatchToken(),c('P2PPlatformContextStore').getDispatchToken()]);switch(ja){case c('P2PActionConstants').CREDIT_CARD_UPDATED:case c('P2PActionConstants').CREDIT_CARD_VERIFIED:this.handleCreditCardUpdated(ia);this.emit('change');break;case c('P2PActionConstants').CHECKOUT_CART_INITIATED:this.handleCheckoutCartInitiated();this.emit('change');break;case c('P2PActionConstants').CHECKOUT_CART_CREATED:this.handleCheckoutCartCreated(ia);this.emit('change');break;case c('P2PActionConstants').CHECKOUT_ADDRESS_SELECTED:this.handleAddressSelected(ia);this.emit('change');break;case c('P2PActionConstants').CHECKOUT_SHIPPING_OPTION_SELECTED:this.handleShippingOptionSelected(ia);this.emit('change');break;case c('P2PActionConstants').CHECKOUT_CREDIT_CARD_SELECTED:this.handleCreditCardSelected(ia);this.emit('change');break;case c('P2PActionConstants').CHECKOUT_ADDRESS_FORM_TOGGLED:this.handleAddressFormToggled(ia);this.emit('change');break;case c('P2PActionConstants').CHECKOUT_CREDIT_CARD_FORM_TOGGLED:this.handleCreditCardFormToggled(ia);this.emit('change');break;case c('P2PActionConstants').CHECKOUT_ADDRESS_EDIT_OPTIONS_TOGGLED:this.handleAddressEditOptionsToggled(ia);this.emit('change');break;case c('P2PActionConstants').CHECKOUT_CREDIT_CARD_EDIT_OPTIONS_TOGGLED:this.handleCreditCardEditOptionsToggled(ia);this.emit('change');break;case c('P2PActionConstants').CHECKOUT_PAYMENT_METHOD_EDIT_OPTIONS_TOGGLED:this.handlePaymentMethodEditOptionsToggled(ia);this.emit('change');break;case c('P2PActionConstants').CHECKOUT_PAYMENT_METHOD_CONFIGURED:this.handlePaymentMethodConfigured(ia);this.emit('change');break;case c('P2PActionConstants').CHECKOUT_PAYMENT_METHOD_CONFIRMED:this.handlePaymentMethodConfirmed(ia);this.emit('change');break;case c('P2PActionConstants').CHECKOUT_PAYMENT_METHOD_SELECTED:this.handlePaymentMethodSelected(ia);this.emit('change');break;case c('P2PActionConstants').CHECKOUT_ADDRESS_FORM_VALIDATED:this.handleAddressFormValidated(ia.isValid,ia.formData);this.emit('change');break;case c('P2PActionConstants').CHECKOUT_CREDIT_CARD_FORM_VALIDATED:this.handleCreditCardFormValidated(ia.isValid,ia.formData);this.emit('change');break;case c('P2PActionConstants').CHECKOUT_EDIT_COMPLETED:this.handleCheckoutEditCompleted();this.emit('change');break;case c('P2PActionConstants').CHECKOUT_PROCESSING:this.handleCheckoutProcessing(ia);this.emit('change');break;case c('P2PActionConstants').CHECKOUT_BUYER_PROFILE_UPDATED:this.handleCheckoutBuyerProfileUpdated(ia);this.emit('change');break;case c('P2PActionConstants').CHECKOUT_MANUAL_PAYMENT_RECEIPT_UPDATED:this.handleManualPaymentReceiptUpdated(ia);this.emit('change');break;}};ga.prototype.handleCreditCardUpdated=function(ha){var ia=this.getSelectedCreditCard();if(ia&&ia.getCredentialId()===ha[c('CreditCardFormParam').CREDENTIAL_ID])k=c('P2PCreditCardStore').getCreditCardByCredentialID(ia.getCredentialId());};ga.prototype.handleCheckoutCartInitiated=function(){w=null;da=null;ba=null;j=null;x=null;fa=null;ea=false;};ga.prototype.handleCheckoutCartCreated=function(ha){w=ha.sellerID;da=ha.invoiceID;ea=!!ha.acceptInternationalAddresses;};ga.prototype.handleCheckoutProcessing=function(ha){v=ha;};ga.prototype.handleAddressSelected=function(ha){var ia=c('P2PAddressStore').getAll(!ea),ja=ia.find(function(ka){return ka.id===ha;});j=ja;x=null;this.handleCheckoutEditCompleted();};ga.prototype.handleShippingOptionSelected=function(ha){var ia=this.getPlatformContext(),ja=ia&&ia.shipping&&ia.shipping.shippingOptions,ka=void 0;if(ja)ka=ja.filter(function(la){return la.id===ha;})[0];x=ka;};ga.prototype.handleCreditCardSelected=function(ha){var ia=c('P2PCreditCardStore').getAll(c('MessengerPaymentProductType').MESSENGER_COMMERCE),ja=ia.filter(function(ka){return ka.getCredentialId()===ha;})[0];k=ja;this.handleCheckoutEditCompleted();};ga.prototype.handleAddressFormToggled=function(ha){l=ha;this.handleAddressFormValidated(false,null);};ga.prototype.handleCreditCardFormToggled=function(ha){m=ha;this.handleCreditCardFormValidated(false,null);};ga.prototype.handlePaymentMethodFormToggled=function(ha){n=ha;};ga.prototype.handleAddressEditOptionsToggled=function(ha){o=ha;};ga.prototype.handleAddressFormValidated=function(ha,ia){r=ha;s=ia;};ga.prototype.handleCreditCardFormValidated=function(ha,ia){t=ha;u=ia;};ga.prototype.handleCheckoutEditCompleted=function(){this.handleAddressFormValidated(false,null);this.handleAddressEditOptionsToggled(false);this.handleAddressFormToggled(false);this.handleCreditCardFormValidated(false,null);this.handleCreditCardEditOptionsToggled(false);this.handleCreditCardFormToggled(false);this.handlePaymentMethodSelected(null);this.handlePaymentMethodConfigured(null);this.handlePaymentMethodFormToggled(false);this.handlePaymentMethodEditOptionsToggled(false);};ga.prototype.handleCreditCardEditOptionsToggled=function(ha){p=ha;};ga.prototype.handlePaymentMethodEditOptionsToggled=function(ha){q=ha;};ga.prototype.handleCheckoutBuyerProfileUpdated=function(ha){z=ha;y=true;};ga.prototype.handleManualPaymentReceiptUpdated=function(ha){fa=ha.receiptFbid;};ga.prototype.handlePaymentMethodConfigured=function(ha){aa=ha;};ga.prototype.handlePaymentMethodConfirmed=function(ha){ba=ha;this.handleCheckoutEditCompleted();};ga.prototype.handlePaymentMethodSelected=function(ha){ca=ha;};ga.prototype.isAddressFormShown=function(){return !c('P2PAddressStore').getAll(!ea).count()||l;};ga.prototype.isCreditCardFormShown=function(){var ha=c('P2PCreditCardStore').getAll(c('MessengerPaymentProductType').MESSENGER_COMMERCE);return (!this.isAddressFormShown()&&(!ha.length||m));};ga.prototype.isPaymentMethodFormShown=function(){var ha=!this.isAddressFormShown()&&(!this.getConfirmedPaymentMethod()||n);return ha;};ga.prototype.isAddressEditOptionsShown=function(){return o;};ga.prototype.isCreditCardEditOptionsShown=function(){return p;};ga.prototype.isPaymentMethodEditOptionsShown=function(){return q;};ga.prototype.isEditingPaymentMethod=function(){return this.isPaymentMethodFormShown()||this.isPaymentMethodEditOptionsShown();};ga.prototype.getConfirmedPaymentMethod=function(){return ba||c('P2PPaymentMethodStore').getPreviousPaymentMethod(this.getInvoiceID());};ga.prototype.getConfiguredPaymentMethod=function(){return aa;};ga.prototype.getSelectedPaymentMethod=function(){return ca;};ga.prototype.getAttachedReceiptFbid=function(){return fa;};ga.prototype.getSelectedAddress=function(){var ha=this.getPlatformContext(),ia=c('P2PAddressStore').getAll(!ea),ja=void 0;if(j)return j;if(ha&&ha.shipping&&ha.shipping.selectedShippingAddressID){ja=ia.find(function(ka){return (ha&&ka.id===ha.shipping.selectedShippingAddressID);});if(ja)return ja;}return ia.first();};ga.prototype.getSelectedShippingOption=function(){var ha=this.getPlatformContext(),ia=ha&&ha.shipping,ja=ia&&ia.selectedShippingOptionID,ka=ia&&ia.shippingOptions,la=void 0;if(x)return x;if(ka&&ka.length){la=ka.filter(function(ma){return ma.id===ja;})[0];if(la)return la;}return ka&&ka[0];};ga.prototype.getSelectedCreditCard=function(){var ha=c('P2PCreditCardStore').getAll(c('MessengerPaymentProductType').MESSENGER_COMMERCE);return k||ha[0];};ga.prototype.isAddressFormValid=function(){return r;};ga.prototype.getAddressFormData=function(){return s;};ga.prototype.isCreditCardFormValid=function(){return t;};ga.prototype.getCreditCardFormData=function(){return u;};ga.prototype.isProcessing=function(){return v;};ga.prototype.isBuyerProfileFetchComplete=function(){return y;};ga.prototype.getPlatformContext=function(){if(w)return c('P2PPlatformContextStore').getPlatformContextByOtherUserID(w);};ga.prototype.getInvoiceID=function(){return da;};ga.prototype.getPlaceOrderFormData=function(){var ha=this.getPlatformContext(),ia=this.getSelectedShippingOption(),ja=this.getSelectedAddress(),ka=this.getSelectedCreditCard(),la=c('CreditCardFormParam').CREDENTIAL_ID,ma={};ma[la]=ka&&ka.getCredentialId();ma=babelHelpers['extends']({},ma,{amount:ia&&ia.rawTotal,platform_context_id:ha&&ha.id,receiverId:ha&&ha.sellerID,shippingAddressID:ja&&ja.id,shippingOptionID:ia&&ia.id});return ma;};ga.prototype.getBuyerProfileData=function(){if(z)return z;z={};c('P2PAPI').getCurrentUserProfileData();};f.exports=new ga();}),null);
__d('P2PCheckoutDialogContainer.react',['fbt','invariant','Arbiter','FBPaymentsCreditCardVerificationDialog_DEPRECATED.react','FBPaymentsMethodType','Link.react','P2PActions','P2PAPI','P2PAPIUtils','P2PAddressStore','P2PCreditCardStore','P2PCheckoutDialog.react','P2PCheckoutStore','P2PDispatcher','P2PEditCreditCardDialog.react','P2PErrorDialog.react','P2PLogger','P2PPasswordProtectionNUXDialog.react','P2PPasswordProtectionStatusTypes','P2PPaymentLoggerEvent','P2PPaymentLoggerEventFlow','P2PPlatformContextShape','P2PSuccessDialog.react','P2PText.react','P2PVerifyCreditCardDialog.react','React','ReactLayeredComponentMixin_DEPRECATED','StoreAndPropBasedStateMixin'],(function a(b,c,d,e,f,g,h,i){'use strict';var j=c('React').PropTypes,k='fbpay_login_and_pay',l='about:blank',m=c('React').createClass({displayName:'P2PCheckoutDialogContainer',mixins:[c('ReactLayeredComponentMixin_DEPRECATED'),c('StoreAndPropBasedStateMixin')(c('P2PAddressStore'),c('P2PCheckoutStore'),c('P2PCreditCardStore'))],propTypes:{acceptInternationalAddresses:j.bool,asyncPaymentDetails:j.object,onCheckoutSuccess:j.func,onClose:j.func.isRequired,onSeeReceiptClick:j.func,configSelections:j.string,customCheckoutDetails:j.node,paymentMethods:j.array,paymentMethodsFetchError:j.object,paymentProductType:j.string,platformContext:c('P2PPlatformContextShape'),platformContextSaveError:j.object,productItemID:j.string,showAsyncPaymentDetails:j.bool,showTaxField:j.bool,usePaymentMethods:j.bool},getInitialState:function n(){return {creditCardVerificationDialogShown:false,editCreditCardDialogShown:false,openedWindow:null,passwordProtectionNUXShown:false,successDialogShown:false,transferError:null,verifyCreditCardDialogShown:false};},statics:{calculateState:function n(o){return {addresses:c('P2PAddressStore').getAll(!o.acceptInternationalAddresses),addressFormData:c('P2PCheckoutStore').getAddressFormData(),addressFormValid:c('P2PCheckoutStore').isAddressFormValid(),addressSaveErrors:c('P2PAddressStore').getSaveErrors(),buyer:c('P2PCheckoutStore').getBuyerProfileData(),configuredPaymentMethod:c('P2PCheckoutStore').getConfiguredPaymentMethod(),confirmedPaymentMethod:c('P2PCheckoutStore').getConfirmedPaymentMethod(),creditCardAsyncRequestState:c('P2PCreditCardStore').getAsyncRequestState(),creditCardFormData:c('P2PCheckoutStore').getCreditCardFormData(),creditCardFormValid:c('P2PCheckoutStore').isCreditCardFormValid(),creditCards:c('P2PCreditCardStore').getAll(o.paymentProductType),creditCardSaveErrors:c('P2PCreditCardStore').getSaveErrors(),editingPaymentMethod:c('P2PCheckoutStore').isEditingPaymentMethod()&&o.usePaymentMethods,initialDataLoaded:o.platformContext&&(!!o.asyncPaymentDetails||c('P2PAddressStore').isAddressesFetchComplete()&&c('P2PCreditCardStore').isCreditCardsFetchComplete()&&c('P2PCheckoutStore').isBuyerProfileFetchComplete()&&(!o.usePaymentMethods||!!o.paymentMethods)),orderID:c('P2PCheckoutStore').getInvoiceID(),receiptAttached:!!c('P2PCheckoutStore').getAttachedReceiptFbid(),saving:c('P2PCheckoutStore').isProcessing()||c('P2PCreditCardStore').isSaving()||c('P2PAddressStore').isSaving(),selectedAddress:c('P2PCheckoutStore').getSelectedAddress(),selectedCreditCard:c('P2PCheckoutStore').getSelectedCreditCard(),selectedPaymentMethod:c('P2PCheckoutStore').getSelectedPaymentMethod(),selectedShippingOption:c('P2PCheckoutStore').getSelectedShippingOption(),shippingOptions:o.platformContext&&o.platformContext.shipping?o.platformContext.shipping.shippingOptions:null,showAddressForm:c('P2PCheckoutStore').isAddressFormShown(),showCreditCardForm:c('P2PCheckoutStore').isCreditCardFormShown()&&!o.usePaymentMethods,showAddressEditOptions:c('P2PCheckoutStore').isAddressEditOptionsShown(),showCreditCardEditOptions:c('P2PCheckoutStore').isCreditCardEditOptionsShown()&&!o.usePaymentMethods,showPaymentMethodEditOptions:c('P2PCheckoutStore').isPaymentMethodEditOptionsShown()&&o.usePaymentMethods,showPaymentMethodForm:c('P2PCheckoutStore').isPaymentMethodFormShown()&&o.usePaymentMethods};}},_paymentMethodAddCardRequestId:'',componentWillMount:function n(){this.log(c('P2PPaymentLoggerEvent').UI_ACTN_INITIATE_CHECKOUT);c('P2PDispatcher').explicitlyRegisterStores([c('P2PCheckoutStore')]);},componentWillUnmount:function n(){if(this._passwordCancelSubscribeToken!==null){c('Arbiter').unsubscribe(this._passwordCancelSubscribeToken);this._passwordCancelSubscribeToken=null;}},componentDidUpdate:function n(o,p){this._trackEvents(o,p);},log:function n(o,p){var q=this.props.platformContext,r={};if(q)r=q.product.rawAmount;c('P2PLogger').log(o,babelHelpers['extends']({www_event_flow:c('P2PPaymentLoggerEventFlow').UI_FLOW_CHECKOUT,raw_amount:r.amount,currency:r.currency,object_id:this.props.productItemID},p));},_placeOrderPending:false,_passwordCancelSubscribeToken:null,_passwordProtectionNUXPending:false,handleCancel:function n(){this.log(c('P2PPaymentLoggerEvent').UI_ACTN_CHECKOUT_CANCEL);this.props.onClose();},handleSuccess:function n(){var o=arguments.length<=0||arguments[0]===undefined?true:arguments[0];this.log(c('P2PPaymentLoggerEvent').UI_ACTN_CHECKOUT_SUCCESS);o&&this.props.onClose();},handleSaveAddress:function n(){this.saveAddress();},closeOpenedWindow:function n(){this.state.openedWindow&&this.state.openedWindow.close();},saveAddress:function n(){c('P2PAPI').addAddress(babelHelpers['extends']({},this.state.addressFormData,{platformContext:this.props.platformContext,onSuccess:this.handleSaveAddressSuccess,onError:this.handleSaveAddressError}));this.log(c('P2PPaymentLoggerEvent').UI_ACTN_CONFIRM_ADDRESS_DETAILS);},handleSaveAddressSuccess:function n(){this.log(c('P2PPaymentLoggerEvent').UI_ACTN_ADD_ADDRESS_SUCCESS);},handleSaveAddressError:function n(o){o=o.errors;this.log(c('P2PPaymentLoggerEvent').UI_ACTN_ADD_ADDRESS_FAIL,{message:o&&o.general?o.general.message:''});},handleSaveCreditCard:function n(){this.saveCreditCard();},saveCreditCard:function n(){c('P2PAPI').addCreditCard(babelHelpers['extends']({product_type:this.props.paymentProductType},this.state.creditCardFormData,{hasPlatformContext:!!this.props.platformContext,onSuccess:this.handleSaveCreditCardSuccess,onError:this.handleSaveCreditCardError}));this.log(c('P2PPaymentLoggerEvent').UI_ACTN_CONFIRM_CARD_DETAILS);},handleSaveCreditCardSuccess:function n(){if(this._placeOrderPending){this._placeOrderPending=false;this.placeOrder();}this.log(c('P2PPaymentLoggerEvent').UI_ACTN_ADD_CARD_SUCCESS);},handleSaveCreditCardError:function n(o){o=o.errors;this.log(c('P2PPaymentLoggerEvent').UI_ACTN_ADD_CARD_FAIL,{message:o&&o.general?o.general.message:''});},handleConfirmPaymentMethod:function n(){var o=this.state.configuredPaymentMethod;switch(o.type){case c('FBPaymentsMethodType').NEW_CREDIT_CARD:var p=c('P2PAPIUtils').genRequestID();this._paymentMethodAddCardRequestId=p;c('P2PAPI').addCreditCard(babelHelpers['extends']({product_type:this.props.paymentProductType,requestID:p},o.formData,{hasPlatformContext:!!this.props.platformContext,onSuccess:this.handleConfirmPaymentMethodSuccess}));break;case c('FBPaymentsMethodType').GENERIC_CARD:case c('FBPaymentsMethodType').PAY_OVER_COUNTER:case c('FBPaymentsMethodType').MANUAL_TRANSFER:case c('FBPaymentsMethodType').NET_BANKING:this.handleConfirmPaymentMethodSuccess();break;}},handleConfirmPaymentMethodSuccess:function n(){var o=this.state.configuredPaymentMethod;switch(o.type){case c('FBPaymentsMethodType').NEW_CREDIT_CARD:this.handleConfirmPaymentMethodAddCardSuccess();break;default:c('P2PActions').checkoutPaymentMethodConfirmed(o);}},handleConfirmPaymentMethodAddCardSuccess:function n(){var o=c('P2PCreditCardStore').getAsyncRequestState(),p=o[this._paymentMethodAddCardRequestId];if(!p)return;var q=c('P2PCreditCardStore').getCreditCardByCredentialID(p.credential_id),r={creditCard:q,type:c('FBPaymentsMethodType').GENERIC_CARD};this._paymentMethodAddCardRequestId='';c('P2PActions').checkoutPaymentMethodConfirmed(r);},handlePlaceOrder:function n(){if(this.props.usePaymentMethods){this.completePaymentMethodCheckout();return;}if(this.state.showCreditCardForm){this._placeOrderPending=true;this.saveCreditCard();}else this.placeOrderWithExistingCard();},handleCompleteManualPayment:function n(){var o=this.state.orderID,p=this.props.asyncPaymentDetails&&this.props.asyncPaymentDetails.id;o&&p||i(0);c('P2PAPI').completeReceiptUploadCheckout({onSuccess:function(){this.setState({successDialogShown:true});}.bind(this),onError:function(q){this.setState({transferError:q});}.bind(this),receiptImageID:c('P2PCheckoutStore').getAttachedReceiptFbid(),invoiceID:o,selectedPaymentOptionID:p});},placeOrderWithExistingCard:function n(){var o=c('P2PCheckoutStore').getSelectedCreditCard();o||i(0);if(!o.getIsVerified()){this.setState({verifyCreditCardDialogShown:true});return;}else if(o.isExpired()){this.setState({editCreditCardDialogShown:true});return;}this.placeOrder();},placeOrder:function n(){c('P2PActions').checkoutProcessing(true);this.setState({transferError:null});this._passwordCancelSubscribeToken=c('Arbiter').subscribeOnce('PasswordReauthDialogCancelClick',function(){this._passwordCancelSubscribeToken=null;c('P2PActions').checkoutProcessing(false);}.bind(this));c('P2PAPI').createTransaction({error:this.handlePlaceOrderError,formData:c('P2PCheckoutStore').getPlaceOrderFormData(),success:this.handlePlaceOrderSuccess});this.log(c('P2PPaymentLoggerEvent').UI_ACTN_CHECKOUT_CONFIRM);},handlePlaceOrderError:function n(o){c('P2PActions').checkoutProcessing(false);this.setState({transferError:o});},handlePlaceOrderSuccess:function n(o){c('P2PActions').checkoutProcessing(false);var p=o.passwordProtection===c('P2PPasswordProtectionStatusTypes').NOT_SET;if(p){this.setState({passwordProtectionNUXShown:true});}else this.handleSuccess();},completePaymentMethodCheckout:function n(){var o=this.state.confirmedPaymentMethod;switch(o.type){case c('FBPaymentsMethodType').NET_BANKING:case c('FBPaymentsMethodType').PAY_OVER_COUNTER:var p=window.open(l,k);this.setState({openedWindow:p});break;case c('FBPaymentsMethodType').GENERIC_CARD:if(o.creditCard.getCSC()){this.completeNMORCheckout({securityCode:o.creditCard.getCSC()});}else this.setState({creditCardVerificationDialogShown:true});return;}this.log(c('P2PPaymentLoggerEvent').UI_ACTN_CHECKOUT_CONFIRM);this.completeNMORCheckout();},completeNMORCheckout:function n(o){var p=this.props.platformContext;p||i(0);var q=this.state.confirmedPaymentMethod;q||i(0);var r=q.type,s=null,t=null;switch(r){case c('FBPaymentsMethodType').GENERIC_CARD:r='cc';t=q.creditCard.getCredentialId();o&&o.securityCode||i(0);break;case c('FBPaymentsMethodType').NET_BANKING:s={bank_code:q.bank.code};break;case c('FBPaymentsMethodType').MANUAL_TRANSFER:s={receipt_image_id:q.receiptFbid,transfer_option_id:q.optionId};break;}var u=babelHelpers['extends']({amount:this.state.selectedShippingOption.rawTotal,currency:p.product.rawAmount.currency,nmorOrderType:this.props.paymentProductType,receiverID:p.sellerID,orderID:this.state.orderID,paymentMethodType:r,paymentMethodData:s,credentialId:t,shippingAddressID:this.state.selectedAddress.id,shippingOptionID:this.state.selectedShippingOption.id,error:this.handleCompletePaymentMethodCheckoutError,success:this.handleCompletePaymentMethodCheckoutSuccess},o);c('P2PActions').checkoutProcessing(true);c('P2PAPI').completeNMORCheckout(u);},handleCreditCardVerificationCancel:function n(){this.setState({creditCardVerificationDialogShown:false});},handleVerifyCreditCardAndCompleteCheckout:function n(o){this.completeNMORCheckout({securityCode:o});},handleCompletePaymentMethodCheckoutError:function n(o){c('P2PActions').checkoutProcessing(false);this.setState({transferError:o});this.closeOpenedWindow();},handleCompletePaymentMethodCheckoutSuccess:function n(o,p){c('P2PActions').checkoutProcessing(false);this.setState({creditCardVerificationDialogShown:false});var q=this.props.onCheckoutSuccess;q&&q(o,p);var r=this.state.confirmedPaymentMethod;switch(r.type){case c('FBPaymentsMethodType').NET_BANKING:p&&p.net_banking_info||i(0);var s=p.net_banking_info.redirect_url;window.open(s,k);this.handleSuccess();break;case c('FBPaymentsMethodType').PAY_OVER_COUNTER:p&&p.pay_over_counter_info||i(0);var t=p.pay_over_counter_info.instructions_url;window.open(t,k);this.handleSuccess();break;case c('FBPaymentsMethodType').MANUAL_TRANSFER:this.handleSuccess(false);break;default:this.handleSuccess(false);this.setState({successDialogShown:true});}},handleSetAddress:function n(o){var p=this.props.platformContext;p||i(0);c('P2PAPI').setPlatformContextShippingAddress({platformContextID:p.id,shippingAddressID:o});},renderLayers:function n(){var o={};if(this.props.platformContextSaveError){o.error=c('React').createElement(c('P2PErrorDialog.react'),{title:h._("Problem with purchase"),onOKClick:this.handleCancel,error:this.props.platformContextSaveError});}else if(this.props.paymentMethodsFetchError){o.error=c('React').createElement(c('P2PErrorDialog.react'),{title:h._("Sorry, Something Went Wrong"),onOKClick:this.handleCancel,error:h._("We can't load the available payment methods at this time. Please try again later.")});}else if(this.state.transferError){o.error=c('React').createElement(c('P2PErrorDialog.react'),{title:h._("Problem with purchase"),onOKClick:this.handleCancel,error:this.state.transferError});}else if(this.state.verifyCreditCardDialogShown){o.verificationDialog=c('React').createElement(c('P2PVerifyCreditCardDialog.react'),{creditCard:this.state.selectedCreditCard,asyncRequestState:this.state.creditCardAsyncRequestState,isSending:true,onCancel:function(){this.setState({verifyCreditCardDialogShown:false});c('P2PActions').checkoutProcessing(false);}.bind(this),onSuccess:function(){this.setState({verifyCreditCardDialogShown:false});this.placeOrderWithExistingCard();}.bind(this)});}else if(this.state.editCreditCardDialogShown)o.editCreditCardDialog=c('React').createElement(c('P2PEditCreditCardDialog.react'),{asyncRequestState:this.state.creditCardAsyncRequestState,creditCard:this.state.selectedCreditCard,onCancel:function(){this.setState({editCreditCardDialogShown:false});c('P2PActions').checkoutProcessing(false);}.bind(this),onSuccess:function(){this.setState({editCreditCardDialogShown:false});this.placeOrderWithExistingCard();}.bind(this)});return o;},render:function n(){if(this.state.passwordProtectionNUXShown){return (c('React').createElement(c('P2PPasswordProtectionNUXDialog.react'),{onComplete:this.handleSuccess}));}else if(this.state.creditCardVerificationDialogShown){var o=this.state.confirmedPaymentMethod.creditCard,p=c('React').createElement(c('P2PText.react'),{size:'small',type:'secondary'},c('React').createElement(c('Link.react'),{onClick:this.handleCreditCardVerificationCancel,size:'small'},h._("Use Different Payment Method"))),q=h._("Pay");return (c('React').createElement(c('FBPaymentsCreditCardVerificationDialog_DEPRECATED.react'),{creditCard:o,leftContent:p,loading:this.state.saving,onConfirm:this.handleVerifyCreditCardAndCompleteCheckout,primaryButtonText:q,showCancelButton:false}));}else if(this.state.successDialogShown){var r=h._("Your purchase is complete. You'll receive a confirmation email soon.");if(this.props.asyncPaymentDetails)r=h._("Your proof of payment has been sent. The seller will verify your payment soon.");return (c('React').createElement(c('P2PSuccessDialog.react'),{buttonLabel:h._("See Receipt"),buttonUse:'confirm',onOKClick:this.props.onSeeReceiptClick||this.handleSuccess,onToggle:function(){this.handleSuccess();}.bind(this),showCloseButton:true,title:h._("Confirmation")},c('React').createElement(c('P2PText.react'),{type:'secondary',style:{textAlign:'center'}},r)));}return (c('React').createElement(c('P2PCheckoutDialog.react'),babelHelpers['extends']({},this.props,this.state,{onClose:this.handleCancel,onCompleteManualPayment:this.handleCompleteManualPayment,onConfirmSelectedPaymentMethod:this.handleConfirmPaymentMethod,onPlaceOrder:this.handlePlaceOrder,onSaveAddress:this.handleSaveAddress,onSaveCreditCard:this.handleSaveCreditCard,onSetAddress:this.handleSetAddress})));},_trackEvents:function n(o,p){if(!o.platformContextSaveError&&this.props.platformContextSaveError)this.log(c('P2PPaymentLoggerEvent').UI_ACTN_CHECKOUT_CART_CREATION_FAIL);if(!this.state.initialDataLoaded)return;if(!p.initialDataLoaded&&this.state.initialDataLoaded)this.log(c('P2PPaymentLoggerEvent').UI_ACTN_CHECKOUT_CART_CREATION_SUCCESS);if(!p.showCreditCardForm&&this.state.showCreditCardForm)this.log(c('P2PPaymentLoggerEvent').UI_ACTN_INITIATE_ADD_CARD);if(p.showCreditCardForm&&!this.state.showCreditCardForm)this.log(c('P2PPaymentLoggerEvent').UI_ACTN_CANCEL_ADD_CARD);if(!p.showCreditCardEditOptions&&this.state.showCreditCardEditOptions)this.log(c('P2PPaymentLoggerEvent').UI_ACTN_INITIATE_CHOOSE_CARD);if(!p.showAddressForm&&this.state.showAddressForm)this.log(c('P2PPaymentLoggerEvent').UI_ACTN_INITIATE_ADD_ADDRESS);if(p.showAddressForm&&!this.state.showAddressForm)this.log(c('P2PPaymentLoggerEvent').UI_ACTN_CANCEL_ADD_ADDRESS);if(!p.showAddressEditOptions&&this.state.showAddressEditOptions)this.log(c('P2PPaymentLoggerEvent').UI_ACTN_INITIATE_CHOOSE_ADDRESS);if(!p.verifyCreditCardDialogShown&&this.state.verifyCreditCardDialogShown)this.log(c('P2PPaymentLoggerEvent').UI_ACTN_VERIFY_CSC);if(!p.editCreditCardDialogShown&&this.state.editCreditCardDialogShown)this.log(c('P2PPaymentLoggerEvent').UI_ACTN_EDIT_CARD);if(!p.transferError&&this.state.transferError)this.log(c('P2PPaymentLoggerEvent').UI_ACTN_CHECKOUT_FAIL);}});f.exports=m;}),null);
__d('P2PMCCartCreationDialogContainer.react',['MessengerPaymentProductType','P2PActions','P2PAPI','P2PCheckoutDialogContainer.react','P2PCheckoutStore','P2PPlatformContextStore','React','StoreAndPropBasedStateMixin'],(function a(b,c,d,e,f,g){'use strict';var h=c('React').PropTypes,i=c('React').createClass({displayName:'P2PMCCartCreationDialogContainer',mixins:[c('StoreAndPropBasedStateMixin')(c('P2PCheckoutStore'),c('P2PPlatformContextStore'))],propTypes:{configSelections:h.string,productItemID:h.string.isRequired,sellerID:h.string.isRequired},statics:{calculateState:function j(k){return {platformContext:c('P2PCheckoutStore').getPlatformContext(),platformContextSaveError:c('P2PPlatformContextStore').getSaveError(k.productItemID)};}},componentWillMount:function j(){c('P2PAPI').createMCCart({productItemID:this.props.productItemID,sellerID:this.props.sellerID});},handleClose:function j(){c('P2PActions').clearPlatformContextSaveErrors(this.props.productItemID);c('P2PActions').hideDialog();},render:function j(){return (c('React').createElement(c('P2PCheckoutDialogContainer.react'),{onClose:this.handleClose,configSelections:this.props.configSelections,paymentProductType:c('MessengerPaymentProductType').MESSENGER_COMMERCE,platformContext:this.state.platformContext,platformContextSaveError:this.state.platformContextSaveError,productItemID:this.props.productItemID}));}});f.exports=i;}),null);
__d('MNCommercePromotionMercuryShareAttachment.react',['Banzai','MercuryConfig','MercuryFallbackShareAttachment.react','MercuryShareAttachmentReactShape','MercuryShareAttachmentRenderLocations','MessengerAdsWebTypedLogger','MNAdsLoggerEventEnum','MNCommerceCheckoutOrderConfigDialogContainer.react','MNCommerceDialogStateActions','MNCommerceMessageType','MessengerPlatformGenericItemMercuryAttachment.react','MNContentSubscriptionMessageUserEngagementTypedLogger','MNPlatformMessageUserEngagementTypedLogger','P2PActions','P2PMCCartCreationDialogContainer.react','React','StoryAttachmentStyle'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('React').PropTypes;function k(n){if(n!==undefined){var o=n.match(/\d+/);if(o!==undefined&&o!==null)return o[0];}return null;}function l(n,event){var o=k(n.props.pageID),p=n.getRetailItem(n.props.attachment.target),q=p&&p.id;if(n.props.mnMessageType==c('MNCommerceMessageType').CONTENT_SUBSCRIPTION){new (c('MNContentSubscriptionMessageUserEngagementTypedLogger'))().setPageID(o).setMessageID(n.props.messageID).setCommerceItemID(q).setName(event).log();switch(event){case 'mn_platform_msg_imp':c('Banzai').post('mn_platform_message_imp_setsuna',{page_id:o,item_id:q});break;case 'mn_platform_msg_click':c('Banzai').post('mn_platform_message_click_setsuna',{page_id:o,item_id:q});break;default:break;}}new (c('MNPlatformMessageUserEngagementTypedLogger'))().setPageID(o).setMessageID(n.props.messageID).setCommerceItemID(q).setName(event).log();}h=babelHelpers.inherits(m,c('React').Component);i=h&&h.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=i.constructor).call.apply(n,[this].concat(q)),this.$MNCommercePromotionMercuryShareAttachment2=function(s){var t=s.map(function(u){var v=u.action_link.startsWith('fb-messenger://payments/buy/mc?')||u.action_link.startsWith('fb-messenger://business/commerce/');if(v){if(c('MercuryConfig').WWWMessengerCheckout)return babelHelpers['extends']({onClick:this.$MNCommercePromotionMercuryShareAttachment3},u);return null;}else return u;}.bind(this));return t.filter(function(u){return u;});}.bind(this),this.$MNCommercePromotionMercuryShareAttachment3=function(){var s=this.props.attachment&&this.props.attachment.target;if(!s)return;var t=this.getRetailItem(s),u=t&&t.id;if(this.props.isSponsored)new (c('MessengerAdsWebTypedLogger'))().setEvent(c('MNAdsLoggerEventEnum').LINK_CLICK_CTA).setIsSponsored(this.props.isSponsored).setItemID(u).setMessageID(this.props.messageID).setPageID(this.props.pageID).log();l(this,'mn_platform_msg_click');var v=this.props.pageID,w=function x(y,z,aa){return c('P2PActions').showDialog(c('P2PMCCartCreationDialogContainer.react'),{productItemID:y,sellerID:z,configSelections:aa});};c('MNCommerceDialogStateActions').showDialog(c('MNCommerceCheckoutOrderConfigDialogContainer.react'),{onContinue:w,itemID:u,ownerID:v});}.bind(this),this.getRetailItem=function(s){var t=this.$MNCommercePromotionMercuryShareAttachment1();if(t)return s;if(s.items)if(s.items.length){return s.items[0];}else return null;return s;}.bind(this),o;}m.prototype.componentDidMount=function(){l(this,'mn_platform_msg_imp');};m.prototype.render=function(){var n=this.props.attachment&&this.props.attachment.target;if(!n)return c('React').createElement(c('MercuryFallbackShareAttachment.react'),this.props);var o=this.props.attachment&&this.props.attachment.uri,p=this.props.attachment&&this.props.attachment.label,q=this.$MNCommercePromotionMercuryShareAttachment1(),r=this.getRetailItem(n),s=r&&r.call_to_actions||n.call_to_actions;return c('React').createElement(c('MessengerPlatformGenericItemMercuryAttachment.react'),{callToActions:this.$MNCommercePromotionMercuryShareAttachment2(s),isSponsored:this.props.isSponsored,isSubattachment:this.props.isSubattachment,itemID:r&&r.id,label:p,location:this.props.location,longestCTAs:this.props.longestCTAs,longestMetaline:this.props.longestMetaline,longestName:this.props.longestName,messageID:this.props.messageID,mnMessageType:this.props.mnMessageType,pageID:this.props.pageID,threadID:this.props.threadID,retailItem:r,url:o,width:this.props.maxWidth,isButtonList:q});};m.prototype.$MNCommercePromotionMercuryShareAttachment1=function(){var n=this.props.attachment,o=n&&n.style_list;if(o&&o.length&&o[0]===c('StoryAttachmentStyle').MESSENGER_PLATFORM_BUTTON_LIST)return true;return false;};m.propTypes={attachment:c('MercuryShareAttachmentReactShape'),isSponsored:j.bool,isSubattachment:j.bool,location:j.oneOf(c('MercuryShareAttachmentRenderLocations').getValues()),maxWidth:j.number,messageID:j.string,mnMessageType:j.string,pageID:j.string,threadID:j.string,longestCTAs:j.number,longestMetaline:j.string,longestName:j.string};f.exports=m;}),null);