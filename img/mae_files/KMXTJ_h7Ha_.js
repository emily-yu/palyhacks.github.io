if (self.CavalryLogger) { CavalryLogger.start_js(["LLZey"]); }

__d('MessengerRTCIncomingDialog.react',['cx','fbt','ImageBlock.react','MercuryIDs','MercuryParticipants','MessengerActions','messengerContactImageReact','MessengerDialog.react','messengerDialogBodyReact','MessengerDialogButton.react','MessengerDialogFooter.react','MessengerDialogHeader.react','MessengerSpinner.react','React','StoreAndPropBasedStateMixin'],(function a(b,c,d,e,f,g,h,i){'use strict';var j=c('messengerContactImageReact').comp,k=c('messengerDialogBodyReact').comp,l=c('React').PropTypes,m=50,n=c('React').createClass({displayName:'MessengerRTCIncomingDialog',mixins:[c('StoreAndPropBasedStateMixin')(c('MercuryParticipants'))],propTypes:{callerID:l.string.isRequired,onAccept:l.func.isRequired,onDecline:l.func.isRequired,isVideoCall:l.bool.isRequired},statics:{calculateState:function o(p){return {callerParticipant:c('MercuryParticipants').getOrFetch(c('MercuryIDs').getParticipantIDFromUserID(p.callerID))};}},render:function o(){return (c('React').createElement(c('MessengerDialog.react'),{layerHideOnBlur:false,shown:true,onToggle:this._handleToggle,width:400},c('React').createElement(c('MessengerDialogHeader.react'),null,this._dialogTitle()),c('React').createElement(k,null,this._renderDialogBody()),c('React').createElement(c('MessengerDialogFooter.react'),null,c('React').createElement(c('MessengerDialogButton.react'),{label:i._("Decline"),onClick:this._handleDecline,type:'secondary'}),c('React').createElement(c('MessengerDialogButton.react'),{label:i._("Accept"),onClick:this._handleAccept,type:'primary'}))));},_dialogTitle:function o(){if(this.props.isVideoCall)return i._("Incoming Video Call");return i._("Incoming Audio Call");},_renderDialogBody:function o(){var p=this.state.callerParticipant;if(!p)return c('React').createElement(c('MessengerSpinner.react'),null);return (c('React').createElement(c('ImageBlock.react'),null,c('React').createElement(j,{isMessengerUser:p.is_messenger_user,size:m,src:p.big_image_src||p.image_src}),c('React').createElement('div',{className:"_2n1r"},c('React').createElement('div',{className:"_2n1s"},i._("{caller name} is calling you.",[i.param('caller name',p.name)])),c('React').createElement('div',{className:"_2n1t"},'The call will start as soon as you answer.'))));},_handleDecline:function o(event){event.preventDefault();c('MessengerActions').hideDialog(n);this.props.onDecline();},_handleAccept:function o(event){event.preventDefault();c('MessengerActions').hideDialog(n);this.props.onAccept();},_handleToggle:function o(p){if(!p){c('MessengerActions').hideDialog(n);this.props.onDecline();}}});f.exports=n;}),null);
__d('FBRTCSdpUtils',['UserAgent'],(function a(b,c,d,e,f,g){var h='m=video 0',i=function m(n){return n.match(/^a=rtpmap:(\d+)\s/)[1];},j=function m(n,o,p){var q=i(n[o]),r=n[p].split('RTP/SAVPF'),s=r[1].split(/\s+/),t=s.indexOf(q);s.splice(t,1);r[1]=s.join(' ');n[p]=r.join('RTP/SAVPF');n.splice(o,1);},k=function m(n,o,p){var q=i(n[o]);j(n,o,p);var r=new RegExp('^a=(rtcp-fb|fmtp):'+q+' ');n=n.filter(function(v){return !r.test(v);});var s=new RegExp('^a=fmtp:(\\d+)\\s+apt='+q+'($|;)'),t=n.reduce(function(v,w,x){var y=w.match(s);return y?[].concat(v,[y[1]]):v;},[]).join('|'),u=new RegExp('^a=rtpmap:('+t+')\\s+rtx/|^a=fmtp:('+t+')\\s+apt=');return n.filter(function(v){return !u.test(v);});},l={replaceRTPSAVPFProfile:function m(n){var o='UDP/TLS/RTP/SAVPF',p='RTP/SAVPF';while(n.indexOf(o)>=0)n=n.replace(o,p);return n;},addIceOptionToSdp:function m(n,o){"use strict";var p="a=ice-options:",q=n.indexOf(p);if(q>=0){var r=n.indexOf("\r",q);return [n.slice(0,r)," ",o,n.slice(r)].join('');}var s=p+o,t=n.split("\r\n"),u=false,v=-1;for(var w=0;w<t.length;w++){var x=t[w].slice(0,2);if(x=="s="){u=true;continue;}if(u&&x=="a="){v=w;break;}}if(v>=0){t.splice(v,0,s);return t.join("\r\n");}return [n,s,"\r\n"].join('');},preferIsac:function m(n){var o=n.split("\r\n"),p=-1,q=-1,r=-1;for(var s=0;s<o.length;s++){var t=o[s];if(t.match(/m=audio\s+\d+\s+RTP\/SAVPF(\s+\d+)+/))p=s;if(r===-1&&p>-1&&t.match(/^a=rtpmap:/))r=s;if(t.match(/^a=rtpmap:\d+\s+ISAC\/16000/))q=s;}if(p===-1||q===-1||r===-1)return o.join("\r\n");var u=o[q];j(o,q,p);o.splice(r,0,u);o[p]=o[p].replace('RTP/SAVPF','RTP/SAVPF '+i(u));return o.join("\r\n");},disableVideo:function m(n){var o=/m=video\s+\S+/;n=n.replace(o,h);if(c('UserAgent').isBrowser('Firefox <= 37'))n=this._makeDisabledVideoReceiveOnly(n);return n;},_makeDisabledVideoReceiveOnly:function m(n){if(n.indexOf(h)>-1){var o=n.split(h);o[1]=o[1].replace(/send(recv|only)/,'recvonly');n=o.join(h);}return n;},fixMobileIceSdp:function m(n){n=n.replace(/^a=/,'');n=n.split(/\s+username\s+.+password.+/)[0];var o=n.match(/\s+relay\s+|\s+srflx\s+/),p=n.match(/raddr.+rport.+/);if(o&&!p){o=o[0];var q=n.split(o),r=q[1].match(/^(\d+\.\d+\.\d+\.\d+)\s+(\d+)\s+/),s=void 0,t=void 0;if(r){s=r[1];t=r[2];q[1]=q[1].replace(r[0],'');}else{r=q[0].split(/\s+/);s=r[4];t=r[5];}n=''+q[0]+o+'raddr '+s+' rport '+t+' '+q[1];}return n;},addAudioNack:function m(n){var o=[];n=n.split('\r\n').map(function(p){var q='';if(o.length>0&&(/^a=rtpmap:(\d+)/.test(p)||/^a=ssrc/.test(p)||/^m=/.test(p))){q+=this._getrtcpFeedbackLinesFromAudioFMTs(o)+'\r\n';o=[];}if(/^m=audio/.test(p))o=p.match(/^m=audio\s+[\d\/]+\s+[\w\/]+([\s+\d+]+)/)[1].trim().split(' ');return q+p;}.bind(this)).join('\r\n');if(o.length>0)n+='\r\n'+this._getrtcpFeedbackLinesFromAudioFMTs(o);return n;},_getrtcpFeedbackLinesFromAudioFMTs:function m(n){return n.map(function(o){return 'a=rtcp-fb:'+o+' nack';}).join('\r\n');},removeFEC:function m(n){var o=n.split('\r\n'),p=void 0,q=void 0;for(var r=0;r<o.length;r++){if(o[r].match(/^a=rtpmap:\d+\s+red\//))p=r;if(o[r].match(/^m=video/))q=r;}if(p&&q)j(o,p,q);return o.join('\r\n');},removeH264:function m(n){var o=n.split('\r\n'),p=/^a=rtpmap:\d+\s+H264\//,q=o.findIndex(function(t){return p.test(t);}),r=/^m=video/,s=o.findIndex(function(t){return r.test(t);});return q!==-1&&s!==-1?k(o,q,s).join('\r\n'):n;},removeVP9:function m(n){var o=n.split('\r\n'),p=/^a=rtpmap:\d+\s+VP9\//,q=o.findIndex(function(t){return p.test(t);}),r=/^m=video/,s=o.findIndex(function(t){return r.test(t);});return q!==-1&&s!==-1?k(o,q,s).join('\r\n'):n;},isVideoSupported:function m(n){return (n&&n.indexOf('m=video')>-1&&n.indexOf(h)===-1);},setDtlsRole:function m(n,o){if(!n.match(/setup:(active|passive|actpass)/)){return n.replace(/(a=fingerprint:.+)/g,'$1\r\na=setup:'+o);}else return n.replace(/setup:actpass/g,'setup:'+o);},setVideoBitrateConstraint:function m(n){var o=720;if(n.match(/^b=AS:/m))return n;n=n.replace(/^a=mid:video\r\n/m,'a=mid:video\r\nb=AS:'+o+'\r\n');return n;},removeSdparta:function m(n){var o=n.split('\r\n'),p='audio',q=false,r=-1;for(var s=0;s<o.length;s++){var t=o[s];if(t.indexOf('m=audio')===0)p='audio';if(t.indexOf('m=video')===0){q=true;p='video';}if(t.indexOf('a=mid:sdparta_')===0)o[s]='a=mid:'+p;if(t.indexOf('a=group:BUNDLE sdparta_')===0)r=s;}if(r>-1)if(q){o[r]='a=group:BUNDLE audio video';}else o[r]='a=group:BUNDLE audio';return o.join('\r\n');}};f.exports=l;}),null);
__d('SoundSynchronizer',['SoundPlayer','WebStorage','createArrayFromMixed'],(function a(b,c,d,e,f,g){var h='fb_sounds_playing3';function i(){var m=c('WebStorage').getLocalStorage();if(m)try{var o=m[h];if(o){o=JSON.parse(o);if(Array.isArray(o))return o;}}catch(n){}return [];}function j(m){var n=c('WebStorage').getLocalStorage();if(n){var o=i();o.push(m);while(o.length>5)o.shift();try{n[h]=JSON.stringify(o);}catch(p){}}}function k(m){return i().some(function(n){return n===m;});}var l={play:function m(n,o,p){n=c('createArrayFromMixed')(n);o=o||n[0]+Math.floor(Date.now()/1000);if(k(o))return;c('SoundPlayer').play(n,p);j(o);},isSupported:function m(){return !!c('WebStorage').getLocalStorage();}};f.exports=l;}),null);
__d('SoundRPC',['Event','FBJSON','SoundSynchronizer'],(function a(b,c,d,e,f,g){function h(j,k,l){c('SoundSynchronizer').play(j,k,l);}var i={playLocal:h,playRemote:function j(k,l,m,n){var o={name:'SoundRPC',data:{paths:l,sync:m,loop:n}};k.postMessage(c('FBJSON').stringify(o),'*');},supportsRPC:function j(){return !!window.postMessage;},_listen:function j(){c('Event').listen(window,'message',function(k){if(!/\.facebook.com$/.test(k.origin))return;var l={};try{l=c('FBJSON').parse(k.data);}catch(m){}if(l.name==='SoundRPC')h(l.data.paths,l.data.sync,l.data.loop);});}};f.exports=i;}),null);
__d('Sound',['SoundInitialData','SoundPlayer','SoundRPC','SoundSynchronizer','URI','UserAgent_DEPRECATED','Visibility','isFacebookURI'],(function a(b,c,d,e,f,g){var h=null,i=false,j={init:function n(o){},play:function n(o,p,q){if(h){c('SoundRPC').playRemote(h.contentWindow,o,p,false);}else c('SoundRPC').playLocal(o,p,q);i=true;},hasPlayedSoundBefore:function n(){return i;},playOnlyIfImmediate:function n(o,p,q){if(!i&&c('Visibility').isHidden())return;this.play(o,p,q);},stop:function n(o){if(!h)c('SoundPlayer').stop(o);}},k=new (c('URI'))(location.href);if(k.getSubdomain()&&k.getSubdomain()!=='www')k.setSubdomain('www');var l=k.getDomain();function m(){if(c('UserAgent_DEPRECATED').ie()<9)return false;if(c('SoundInitialData').RPC_DISABLED)return false;return c('SoundSynchronizer').isSupported()&&c('SoundRPC').supportsRPC();}if(c('isFacebookURI')(k)&&location.host!==l&&m()){h=document.createElement('iframe');h.setAttribute('src','//'+l+'/sound_iframe.php');h.style.display='none';document.body.appendChild(h);}f.exports=j;}),null);
__d('FBRTCSoundController',['RTCConfig','Sound'],(function a(b,c,d,e,f,g){var h=[c('RTCConfig').ringtone_mp3_url,c('RTCConfig').ringtone_ogg_url],i={playIncomingRingtone:function j(k,l,m){var n=['incoming_ringtone',k.toString(),l.toString()].join('_');c('Sound').play(h,n,m);},stopIncomingRingtone:function j(){c('Sound').stop(h);}};f.exports=i;}),null);
__d('QE',['Banzai','Cache'],(function a(b,c,d,e,f,g){var h='qe_log_exposure',i=60,j=new (c('Cache'))(),k={logExposure:function l(m,n){var o=n?m+'|'+n:m;if(j.has(o))return;var p={signal:true},q={name:m,id:null};if(n)q.id=n;c('Banzai').post(h,q,p);j.set(o,true,1,i);}};f.exports=k;}),null);
__d('FBRTCExperiment',['FBRTCExperimentsConfig','QE'],(function a(b,c,d,e,f,g){'use strict';h.gen=function(i){var j={params:{},in_experiment:false,auto_exposure:false},k=c('FBRTCExperimentsConfig')[i]||j,l=new h(i,k.params,k.in_experiment);if(k.auto_exposure)l.logExposure(i);return l;};function h(i,j,k){this.$FBRTCExperiment2=i;this.$FBRTCExperiment3=j;this.$FBRTCExperiment1=k;}h.prototype.logExposure=function(){if(this.$FBRTCExperiment1)c('QE').logExposure(this.$FBRTCExperiment2);};h.prototype.getParam=function(i,j){if(this.$FBRTCExperiment3[i])return this.$FBRTCExperiment3[i].toString();return j;};h.prototype.getInt=function(i,j){if(this.$FBRTCExperiment3[i])return parseInt(this.$FBRTCExperiment3[i],10);return j;};h.prototype.getBool=function(i,j){var k=this.$FBRTCExperiment3;if(k[i])return k[i]==='1'||k[i]===1||k[i]==='true';return j;};f.exports=h;}),null);
__d('BanzaiScribe',['Banzai'],(function a(b,c,d,e,f,g){function h(j){return {log:function k(l,m,n){var o=[m];if(n!=null)o.push(n);c('Banzai').post('scribe:'+l,o,j);}};}var i=h({});i.create=h;f.exports=i;}),null);
__d('SamplingPolicyBase',[],(function a(b,c,d,e,f,g){function h(){'use strict';throw new Error('Tried to instantiate SamplingPolicyBase');}h.prototype.getName=function(){'use strict';return this.name;};h.prototype.isSampled=function(){'use strict';if(typeof this.sampled=='undefined')this.sampled=this.decideIfSampled();return this.sampled;};f.exports=h;}),null);
__d('FbtraceForcedByServerPolicy',['FbtraceForcedByServer','SamplingPolicyBase'],(function a(b,c,d,e,f,g){'use strict';var h=void 0;function i(){this.name='FbtraceForcedByServerPolicy';}i.get=function(){if(typeof h=='undefined')h=new i();return h;};function j(){return c('FbtraceForcedByServer').forced;}Object.assign(i.prototype,c('SamplingPolicyBase').prototype,{decideIfSampled:j});f.exports=i;}),null);
__d("guardFunction",[],(function a(b,c,d,e,f,g){function h(i,j,k){return function(){if(i.apply(k||this,arguments))j.apply(k||this,arguments);};}f.exports=h;}),null);
__d('Fbtrace',['Arbiter','ArtilleryTraceIDUtils','BanzaiScribe','FbtraceForcedByServer','FbtraceForcedByServerPolicy','SiteData','guardFunction'],(function a(b,c,d,e,f,g){'use strict';function h(){Object.assign(this,h);}Object.assign(h,{isOn:function s(){return false;},replySend:function s(t,u){},requestSend:function s(t,u,v){m(t,u);return {metadata:function w(){return undefined;},replyReceive:function w(x){}};}});var i=new h();function j(s,t,u){if(!s)throw {name:'ArgumentError',message:'no valid service name specified'};if(!t)throw {name:'ArgumentError',message:'no valid version specified'};var v=c('BanzaiScribe'),w=0,x=c('ArtilleryTraceIDUtils').newTraceId(),y=c('ArtilleryTraceIDUtils').newObjectId(),z=c('ArtilleryTraceIDUtils').traceIdToBucket(x),aa={service:s,version:t},ba=function ga(ha){if(typeof ha=='undefined')return 'undefined';if(typeof ha!='string')ha=ga(JSON.stringify(ha));return ha;},ca=function ga(ha){var ia='';for(var ja in ha){if(ia.length>0)ia+='\x02';ia+=ba(ja)+'\x03'+ba(ha[ja]);}return ia;},da=function ga(ha,ia,event,ja,ka){w++;return [ka,w,x,ha,ia,ba(event),ca(ja)].join('\x01');},ea=function ga(ha,ia,event,ja,ka){if(!ka&&typeof ka=='undefined')ka=Date.now()*1000;var la=da(ha,ia,event,ja,ka);v.log('fbtrace',la,z);},fa=function ga(){return y;};ea(c('ArtilleryTraceIDUtils').getDummyId(),y,'#rqrecv',Object.assign(u||{},aa));Object.assign(this,j,{replySend:function ga(ha,ia){ia=babelHelpers['extends']({},ia,aa,{success:ha?'true':'false'});ea(c('ArtilleryTraceIDUtils').getDummyId(),y,'#rpsend',ia);},requestSend:function ga(ha,ia,ja){m(ha,ia);var ka=fa(),la=c('ArtilleryTraceIDUtils').newObjectId();ja=babelHelpers['extends']({},ja,aa,{op:ha,'remote:service':ia});ea(ka,la,'#rqsend',ja);return {metadata:function ma(){return x+la;},replyReceive:function ma(na){ea(ka,la,'#rprecv',Object.assign(na||{},aa));},parentNode:this};}});}Object.assign(j,{isOn:function s(){return true;}});function k(){return i;}function l(s,t,u){u=u||{};u.init=true;var v=c('FbtraceForcedByServerPolicy').get();if(v.isSampled()){return new j(s,t,u);}else return new h();}function m(s,t){if(!s)throw {name:'ArgumentError',message:'no valid operation specified'};if(!t)throw {name:'ArgumentError',message:'no valid remote:service specified'};}function n(s,t){var u=i,v=void 0;i=s;try{v=t();}finally{i=u;}return v;}var o=function s(t,u){var v=k(),w=u.request,x=false;if(!v.isOn()&&c('FbtraceForcedByServer').forced&&/\/upload\/(?:composer|photos)\/|\/ajax\/composerx\/attachment\/media\//.test(w.uri.toString())){v=l('photo_upload_kludge',String(c('SiteData').revision||'dev'),{policy:'PhotoUpload'});x=true;}if(v.isOn()){var y=x?{policy:'PhotoUpload'}:{};if(w.userActionId)y.user_action_id=w.userActionId;var z=v.requestSend(w.uri.toString(),'www',y);w.fbtraceRemoteNode=z;w.transport.setRequestHeader('X-Fbtrace-Meta',z.metadata());}},p=function s(t,u){u.request.fbtraceRemoteNode.replyReceive({is_last:u.response.is_last,success:true});setTimeout(function(){u.request.fbtraceRemoteNode.parentNode.replySend(true,{});},0);},q=function s(t,u){u.request.fbtraceRemoteNode.replyReceive({is_last:u.response.is_last,success:false,error_code:u.response.error,error_summary:u.response.errorSummary,error_description:u.response.errorDescription});setTimeout(function(){u.request.fbtraceRemoteNode.parentNode.replySend(false,{});},0);},r=function s(t,u){return u.request.fbtraceRemoteNode;};c('Arbiter').subscribe('AsyncRequest/will_send',o);c('Arbiter').subscribe('AsyncRequest/response',c('guardFunction')(r,p));c('Arbiter').subscribe('AsyncRequest/error',c('guardFunction')(r,q));f.exports={defaultNode:k,requestReceive:l,withDefaultNode:n};}),null);
__d('MercuryAttachmentSnippetType',['keyMirror'],(function a(b,c,d,e,f,g){var h=c('keyMirror')({PHOTO:null,GIF:null,VIDEO:null,AUDIO_CLIP:null,STICKER:null,SHARE:null,ERROR:null,MIXED:null,GIFT:null,THIRDPARTYSTICKER:null,FILE:null,LIKE_STICKER:null});f.exports=h;}),null);
__d('P2PSnippetStringUtils',['fbt','P2PPaymentRequestStatus','P2PTransferStatus'],(function a(b,c,d,e,f,g,h){var i={getRequestCanceledSnippet:function j(k,l,m,n,o){if(k){return h._("Your request for {payment request amount} from {receiver's name} was canceled.",[h.param('payment request amount',o),h.param('receiver\'s name',n)]);}else if(l){return h._("{requester's name}'s request for {payment request amount} was canceled.",[h.param('requester\'s name',m),h.param('payment request amount',o)]);}else return h._("{requester's name}'s request for {payment request amount} from {receiver's name} was canceled.",[h.param('requester\'s name',m),h.param('payment request amount',o),h.param('receiver\'s name',n)]);},getRequestDeclinedSnippet:function j(k,l,m,n,o){if(k){return h._("{receiver's name} declined your request for {payment request amount}.",[h.param('receiver\'s name',n),h.param('payment request amount',o)]);}else if(l){return h._("You declined {requester's name}'s request for {payment request amount}.",[h.param('requester\'s name',m),h.param('payment request amount',o)]);}else return h._("{receiver's name} declined {sender's name}'s request for {payment request amount}.",[h.param('receiver\'s name',n),h.param('sender\'s name',m),h.param('payment request amount',o)]);},getRequestSentSnippet:function j(k,l,m,n,o){if(k){return h._("You requested {amount} from {requestee name}.",[h.param('amount',o),h.param('requestee name',n)]);}else if(l){return h._("{requester name} requested {amount} from you.",[h.param('requester name',m),h.param('amount',o)]);}else return h._("{name} requested {amount} from {requestee name}.",[h.param('name',m),h.param('amount',o),h.param('requestee name',n)]);},getRequestSnippetByStatus:function j(k,l,m,n,o,p){var q=k||c('P2PPaymentRequestStatus').INITED,r=[l,m,n,o,p];switch(q){case c('P2PPaymentRequestStatus').DECLINED:return this.getRequestDeclinedSnippet.apply(this,r);case c('P2PPaymentRequestStatus').TRANSFER_FAILED:case c('P2PPaymentRequestStatus').CANCELED:return this.getRequestCanceledSnippet.apply(this,r);}return this.getRequestSentSnippet.apply(this,r);},getTransferCanceledSnippet:function j(k,l,m,n,o){if(k){return h._("Your {amount} payment to {receiver_name} was canceled.",[h.param('amount',o),h.param('receiver_name',n)]);}else if(l){return h._("{sender name}'s {amount} payment was canceled.",[h.param('sender name',m),h.param('amount',o)]);}else return h._("{sender_name}'s {amount} payment to {receiver_name} was canceled.",[h.param('sender_name',m),h.param('amount',o),h.param('receiver_name',n)]);},getTransferDeclinedSnippet:function j(k,l,m,n,o){if(k){return h._("{receiver_name} didn't accept your {amount} payment.",[h.param('receiver_name',n),h.param('amount',o)]);}else if(l){return h._("You didn't accept {sender name}'s {amount} payment.",[h.param('sender name',m),h.param('amount',o)]);}else return h._("{receiver_name} didn't accept {sender_name}'s {amount} payment.",[h.param('receiver_name',n),h.param('sender_name',m),h.param('amount',o)]);},getTransferSentSnippet:function j(k,l,m,n,o){if(k){return h._("You sent {receiver name} {amount}.",[h.param('receiver name',n),h.param('amount',o)]);}else if(l){return h._("{name} sent you {amount}.",[h.param('name',m),h.param('amount',o)]);}else return h._("{sender name} sent {receiver name} {amount}.",[h.param('sender name',m),h.param('receiver name',n),h.param('amount',o)]);},getTransferSnippetByStatus:function j(k,l,m,n,o,p){var q=[l,m,n,o,p],r=k||c('P2PTransferStatus').PENDING_SENDER_INITED;switch(r){case c('P2PTransferStatus').CANCELED_DECLINED:return this.getTransferDeclinedSnippet.apply(this,q);case c('P2PTransferStatus').CANCELED_SENDER_RISK:case c('P2PTransferStatus').CANCELED_RECIPIENT_RISK:case c('P2PTransferStatus').CANCELED_SYSTEM_FAIL:case c('P2PTransferStatus').CANCELED_EXPIRED:case c('P2PTransferStatus').CANCELED_SAME_CARD:return this.getTransferCanceledSnippet.apply(this,q);}return this.getTransferSentSnippet.apply(this,q);}};f.exports=i;}),null);
__d('MercuryAttachmentSnippetRenderer',['fbt','CurrentUser','MercuryAttachmentSnippetType','MercuryAttachmentType','MercuryAudioType','MercuryGiftSnippetRenderer','P2PSnippetStringUtils','StickerConstants','StoryAttachmentStyle'],(function a(b,c,d,e,f,g,h){'use strict';var i={getAttachmentSnippetType:function j(k){if(this._hasOnlyPhotos(k))return c('MercuryAttachmentSnippetType').PHOTO;if(this._hasOnlyAnimatedImages(k))return c('MercuryAttachmentSnippetType').GIF;if(this._hasOnlyVideo(k))return c('MercuryAttachmentSnippetType').VIDEO;if(this._hasAudioClip(k))return c('MercuryAttachmentSnippetType').AUDIO_CLIP;if(this._hasLikeSticker(k))return c('MercuryAttachmentSnippetType').LIKE_STICKER;if(this._hasSticker(k))return c('MercuryAttachmentSnippetType').STICKER;if(this._hasThirdPartySticker(k))return c('MercuryAttachmentSnippetType').THIRDPARTYSTICKER;if(this._hasShare(k))return c('MercuryAttachmentSnippetType').SHARE;if(this._hasGift(k))return c('MercuryAttachmentSnippetType').GIFT;if(this._hasError(k))return c('MercuryAttachmentSnippetType').ERROR;if(this._hasFile(k))return c('MercuryAttachmentSnippetType').FILE;return c('MercuryAttachmentSnippetType').MIXED;},renderAttachmentSnippetText:function j(k,l,m,n){switch(k){case c('MercuryAttachmentSnippetType').PHOTO:return this._renderPhotoAttachmentSnippetText(l,m,this._getPhotoAttachments(n));case c('MercuryAttachmentSnippetType').GIF:return this._renderAnimatedImagesAttachmentSnippetText(l,m,this._getAnimatedImageAttachments(n));case c('MercuryAttachmentSnippetType').VIDEO:return l?h._("You sent a video."):h._("{sender name} sent a video.",[h.param('sender name',m)]);case c('MercuryAttachmentSnippetType').AUDIO_CLIP:return l?h._("You sent a voice message."):h._("{name} sent a voice message.",[h.param('name',m)]);case c('MercuryAttachmentSnippetType').STICKER:case c('MercuryAttachmentSnippetType').LIKE_STICKER:case c('MercuryAttachmentSnippetType').THIRDPARTYSTICKER:return l?h._("You sent a sticker."):h._("{name} sent a sticker.",[h.param('name',m)]);case c('MercuryAttachmentSnippetType').SHARE:if(n&&this._hasP2PPayment(n))return this._renderP2PPaymentSnippetText(n[0]);if(n&&this._hasP2PPaymentRequest(n))return this._renderP2PPaymentRequestSnippetText(n[0]);if(n&&this._hasBusinessMessage(n))return this._renderBusinessMessageSnippetText(n[0],m);if(n&&this._hasLocation(n))return l?h._("You sent a location."):h._("{sender name} sent a location.",[h.param('sender name',m)]);if(n&&this._hasLiveLocation(n))return l?h._("You sent a live location."):h._("{sender name} sent a live location.",[h.param('sender name',m)]);return l?h._("You sent a link."):h._("{sender name} sent a link.",[h.param('sender name',m)]);case c('MercuryAttachmentSnippetType').GIFT:return c('MercuryGiftSnippetRenderer').renderText(l,m);case c('MercuryAttachmentSnippetType').FILE:return l?h._("You sent an attachment."):h._("{sender name} sent an attachment.",[h.param('sender name',m)]);case c('MercuryAttachmentSnippetType').ERROR:return l?h._("You sent an attachment."):h._("{sender name} sent an attachment.",[h.param('sender name',m)]);default:return '';}},_hasOnlyPhotos:function j(k){return this._getPhotoAttachments(k).length===k.length;},_hasThirdPartySticker:function j(k){return (k.length===1&&k[0].attach_type===c('MercuryAttachmentType').THIRDPARTYSTICKER);},_hasOnlyAnimatedImages:function j(k){return this._getAnimatedImageAttachments(k).length===k.length;},_hasOnlyVideo:function j(k){return (k.length===1&&k[0].attach_type===c('MercuryAttachmentType').VIDEO);},_hasAudioClip:function j(k){var l=k[0].metadata&&k[0].metadata.type;return (k.length===1&&(l===c('MercuryAudioType').AudioClip||l===c('MercuryAudioType').VoiceMessageWithTranscript));},_hasBusinessMessage:function j(k){return this._hasSingleShareAttachmentOfStyle(k,c('StoryAttachmentStyle').BUSINESS_MESSAGE_ITEMS);},_hasSticker:function j(k){return (k.length===1&&k[0].attach_type===c('MercuryAttachmentType').STICKER);},_hasLikeSticker:function j(k){if(k.length<1)return false;var l=k[0].metadata&&k[0].metadata.stickerID;return (k.length===1&&(l==c('StickerConstants').LIKE_STICKER_ID||l==c('StickerConstants').HOT_LIKE_SMALL_STICKER_ID||l==c('StickerConstants').HOT_LIKE_MEDIUM_STICKER_ID||l==c('StickerConstants').HOT_LIKE_LARGE_STICKER_ID));},_hasLocation:function j(k){return this._hasSingleShareAttachmentOfStyle(k,c('StoryAttachmentStyle').MESSAGE_LOCATION);},_hasLiveLocation:function j(k){return this._hasSingleShareAttachmentOfStyle(k,c('StoryAttachmentStyle').MESSAGE_LIVE_LOCATION);},_hasP2PPayment:function j(k){return this._hasSingleShareAttachmentOfStyle(k,c('StoryAttachmentStyle').ORION);},_hasP2PPaymentRequest:function j(k){return this._hasSingleShareAttachmentOfStyle(k,c('StoryAttachmentStyle').ORION_REQUEST);},_hasSingleShareAttachmentOfStyle:function j(k,l){return (k.length===1&&k[0].attach_type===c('MercuryAttachmentType').SHARE&&k[0].share.style_list.indexOf(l)>=0);},_hasShare:function j(k){return (k.length===1&&k[0].attach_type===c('MercuryAttachmentType').SHARE);},_hasError:function j(k){return (k.length===1&&k[0].attach_type===c('MercuryAttachmentType').ERROR);},_hasGift:function j(k){return (k.length===1&&k[0].attach_type===c('MercuryAttachmentType').GIFT);},_hasFile:function j(k){return (k.length===1&&k[0].attach_type===c('MercuryAttachmentType').FILE);},_getPhotoAttachments:function j(k){if(!k)return [];return k.filter(function(l){return l.attach_type===c('MercuryAttachmentType').PHOTO;});},_getAnimatedImageAttachments:function j(k){if(!k)return [];return k.filter(function(l){return l.attach_type===c('MercuryAttachmentType').ANIMATED_IMAGE;});},_renderPhotoAttachmentSnippetText:function j(k,l,m){if(m.length===1){if(k){return h._("You sent a photo.");}else return h._("{name} sent a photo.",[h.param('name',l)]);}else if(k){return h._({"*":"You sent {num_photos} photos."},[h.param('num_photos',m.length,[0])]);}else return h._({"*":"{name} sent {num_photos} photos."},[h.param('name',l),h.param('num_photos',m.length,[0])]);},_renderAnimatedImagesAttachmentSnippetText:function j(k,l,m){if(m.length===1){if(k){return h._("You sent a GIF.");}else return h._("{name} sent a GIF.",[h.param('name',l)]);}else if(k){return h._("You sent {num_animated_images} GIFs.",[h.param('num_animated_images',m.length)]);}else return h._("{name} sent {num_animated_images} GIFs.",[h.param('name',l),h.param('num_animated_images',m.length)]);},_renderBusinessMessageSnippetText:function j(k,l){var m=k.share.target,n=m&&m.message||h._("{sender name} sent an attachment.",[h.param('sender name',l)]);return n;},_renderP2PPaymentSnippetText:function j(k){var l=k.share.target;return this.renderP2PPaymentSnippetText(c('CurrentUser').getID()===l.sender.id,l.sender.name,l.amountWithSymbol,l.status,c('CurrentUser').getID()===l.receiver.id,l.receiver.name);},_renderP2PPaymentRequestSnippetText:function j(k){var l=k.share.target;return this.renderP2PPaymentRequestSnippetText(c('CurrentUser').getID()===l.requester.id,l.requester.name,l.amountWithSymbol,l.currentStatus,c('CurrentUser').getID()===l.requestee.id,l.requestee.name);},renderP2PPaymentSnippetText:function j(k,l,m,n,o,p){return c('P2PSnippetStringUtils').getTransferSnippetByStatus(n,k,o||false,l||'',p||'',m);},renderP2PPaymentRequestSnippetText:function j(k,l,m,n,o,p){return c('P2PSnippetStringUtils').getRequestSnippetByStatus(n,k,o||false,l||'',p||'',m);}};f.exports=i;}),null);